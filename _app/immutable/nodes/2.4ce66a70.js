import{s as Se,f as Bn,n as j,o as qe,b as Ft,h as Wt,r as pn,i as G}from"../chunks/scheduler.77af2d83.js";import{S as $e,i as ze,e as ve,a as W,y as w,f as E,g as p,h,j as y,k as L,x as f,z as hn,m as qt,n as $t,o as En,A as zt,r as lt,s as _,u as at,c as H,B as N,v as rt,C as Cn,d as At,t as ct,w as dt}from"../chunks/index.caa9e03f.js";function Xt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var O=(e=>(e.Red="#CD5C5C",e.Blue="#1E90FF",e.Green="#90EE90",e.Yellow="#FCFF4F",e))(O||{}),M=(e=>(e.ORCH="Orch",e.TROLL="Troll",e.GREEN_DARK_LORD="Green Dark Lord",e.BLUE_DARK_LORD="Blue Dark Lord",e.RED_DARK_LORD="Red Dark Lord",e.YELLOW_DARK_LORD="Yellow Dark Lord",e))(M||{}),F=(e=>(e.APPRENTICE="Apprentice",e.KNIGHT="Knight",e.HERO="Hero",e.LORD="Lord",e.MASTER="Master",e))(F||{}),V=(e=>(e[e.KILL_ALL=0]="KILL_ALL",e[e.KILL_ALL_OF_TYPE=1]="KILL_ALL_OF_TYPE",e[e.REACH_CELL=2]="REACH_CELL",e[e.OPEN_DOOR=3]="OPEN_DOOR",e[e.KILL_AT_LEAST=4]="KILL_AT_LEAST",e))(V||{}),Ce=(e=>(e.EQUIPMENT="Equipment",e.MAGIC_ITEM="Magic Item",e.DOOR="Door",e.NOTE="Note",e))(Ce||{}),b=(e=>(e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.DOWN="Down",e))(b||{});const Jt=[{name:"Sword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Two-handed Sword",range:1,dice:4,twoHanded:!0,useHearHeroes:!1,amountInDeck:1},{name:"Halberd",range:2,dice:3,twoHanded:!0,useHearHeroes:!0,amountInDeck:1}],xt=[{name:"Orch Sword/Bow",range:99,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Troll Club",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4}],Vt=[{name:"Orch Mail",defense:0,magicProtection:!1,amountInDeck:4},{name:"Troll Skin",defense:1,magicProtection:!1,amountInDeck:4}],vn="0",In="@",Ke=" ",ut="#",kn=(e,t,o,n)=>({type:e,name:t,position:{x:o,y:n},found:!1}),Y=(e,t,o)=>({side:e,x:t,y:o,locked:!1,trapped:!1,open:!1,hidden:!1,trapAttacks:0}),Zt=(e,t,o)=>({...Y(e,t,o),hidden:!0}),Z=(e,t,o,n)=>{const i=Object.values(O).indexOf(t),l=Object.keys(O)[i];let r=F.LORD,g=2,u=2,m=4,v=4,k=4,S=xt[0],P=Vt[0];switch(e){case M.ORCH:{r=F.APPRENTICE,u=0,m=2,v=2,k=1;break}case M.TROLL:{r=F.KNIGHT,u=1,m=3,v=3,k=2,S=xt[1],P=Vt[1];break}}return e===M.YELLOW_DARK_LORD&&(g=3),{type:e,level:r,colour:t,actions:g,defense:u,health:m,maxHealth:v,experience:k,name:e+" ("+l+")",movement:3,position:{x:o,y:n},weapon:S,armour:P}},yn={name:"The Three Gates of Power",beaten:!1,winConditions:[{type:V.KILL_ALL,fulfilled:!1},{type:V.OPEN_DOOR,targetCell:{x:15,y:1},fulfilled:!1}],startingPositions:[{x:1,y:4},{x:0,y:3},{x:0,y:4},{x:0,y:5}],discoveredRooms:["A"],layout:{grid:["            EEEE","            EEEE","         DDDEEEE","AAA   CCCC","AAABBBCCCC   GGG","AAA   CCCCFFFGGG","      CCCC   GGG","      CCCC","      CCCCHHHIII","             III","             III"],doors:[Y(b.RIGHT,2,4),Y(b.RIGHT,5,4),Y(b.RIGHT,9,5),Y(b.RIGHT,12,5),Y(b.RIGHT,9,8),Y(b.RIGHT,12,8),Y(b.RIGHT,11,2),Zt(b.UP,9,3),Zt(b.RIGHT,15,1)],monsters:[Z(M.ORCH,O.Blue,9,7),Z(M.ORCH,O.Red,12,8),Z(M.TROLL,O.Red,15,1),Z(M.TROLL,O.Yellow,13,6)],secrets:[{type:Ce.EQUIPMENT,position:{x:9,y:4},found:!1,name:"Random Equipment"},{type:Ce.EQUIPMENT,position:{x:12,y:0},found:!1,name:"Random Equipment"},{type:Ce.MAGIC_ITEM,position:{x:15,y:5},found:!1,name:"Random Magic Item",item:{name:"Healing Herbs"}},{type:Ce.EQUIPMENT,position:{x:15,y:9},found:!1,name:"Random Equipment"}],notes:[{message:"Beyond stone and fire you shall find the Dread tunnel, the road to the Ice Dragons treasure.",position:{x:2,y:4}},{message:"The Gate of Water. <There is an image of a sea dragon under the text>",position:{x:9,y:8}},{message:"The Gate of Air. <There is an image of a pegasus under the text>",position:{x:9,y:5}},{message:"The Gate of Fire. <There is an image of a hippogriph under the text>",position:{x:9,y:3}}]},killCount:0},jt={name:"Troll cave",beaten:!1,winConditions:[{type:V.KILL_ALL,fulfilled:!1}],nextDungeon:yn,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A"],layout:{grid:["     ######","     #CCCC#","     #CCCC#","     #CCCC#","     ##E###","      #E#  ","      #E## ","##### #BB# ","#AAA###BB# ","#AAADDDBB# ","#AAA###BB# ","##### #### "],doors:[Y(b.RIGHT,3,9),Y(b.RIGHT,6,9),Y(b.UP,7,7),Y(b.UP,7,4)],monsters:[Z(M.ORCH,O.Green,6,9),Z(M.ORCH,O.Yellow,8,10),Z(M.ORCH,O.Red,7,5),Z(M.ORCH,O.Red,9,3),Z(M.TROLL,O.Green,6,1)],secrets:[kn(Ce.NOTE,"Welcome to Drakriddarna",2,9)],notes:[]},killCount:0},en=e=>{I(e,"Game saved."),localStorage.setItem("state",JSON.stringify(e))},bn=()=>{const e=localStorage.getItem("state");if(e){const t=JSON.parse(e);return t.currentActor=t.heroes.find(o=>{var n;return o.name===((n=t.currentActor)==null?void 0:n.name)}),I(t,"Game loaded."),t}},Tn=()=>{const e=an;return rn(e,jt),{heroes:e,dungeon:jt,currentActor:e[0],actionLog:["Game Initialised","Each character has 2 actions. Move, Attack, Search or Pick Lock.","Each character can move 3 steps per action.","If another action is performed before moving 3 steps, the move is finished and both actions are consumed.","The rules of this game are harsh and unfair."]}},Ye=(e,t)=>(Jt[0].amountInDeck--,{name:e,actions:2,movement:3,defense:0,level:F.APPRENTICE,health:7,maxHealth:7,colour:t,experience:0,position:{x:-1,y:-1},weapon:Jt[0]}),an=[Ye("Fearik",O.Yellow),Ye("Helbran",O.Red),Ye("Siedel",O.Green),Ye("Wulf",O.Blue)],rn=(e,t)=>{e.forEach((o,n)=>o.position=t.startingPositions[n])},Ee=e=>{let t=[];for(let o=0;o<e.length;o++)t.push(e[o]);return t},ft=(e,t,o)=>e.dungeon.layout.monsters.some(n=>n.position.x===t&&n.position.y===o&&n.health>0),mt=(e,t,o)=>e.heroes.some(n=>n.position.x===t&&n.position.y===o),An=e=>{e.movement===0&&(e.actions--,e.actions!==0&&(e.movement=3)),e.actions==0&&(e.movement=0)},Q=(e,t)=>{const o=t.currentActor;if(!o||o.actions===0)return;let n=o.position.x,i=o.position.y;switch(e){case"UL":n=o.position.x-1,i=o.position.y-1;break;case"U":i=o.position.y-1;break;case"UR":n=o.position.x+1,i=o.position.y-1;break;case"L":n=o.position.x-1;break;case"R":n=o.position.x+1;break;case"DL":n=o.position.x-1,i=o.position.y+1;break;case"D":i=o.position.y+1;break;case"DR":n=o.position.x+1,i=o.position.y+1;break}const l=mt(t,n,i),r=!Xe(t.dungeon.layout,n,i),g=ft(t,n,i);if(!l&&!r){const u=Bt(t.dungeon,n,i);u?u&&(g?dn(o,t,n,i):cn(o,t,n,i,1)):Rn(t,o,n,i)&&Oe(o,t,n,i)}else I(t,`${o.name} could not make that move`);An(o)},cn=(e,t,o,n,i)=>{e.position.x=o,e.position.y=n;const l=t.dungeon.layout.notes.find(g=>nn(g.position,e.position));l&&(t.dungeon.layout.doors.some(u=>u.hidden&&nn(l.position,{x:u.x,y:u.y}))||I(t,`${e.name} reads: ${l.message}`)),t.dungeon.layout.monsters.some(g=>pt(e.position,g.position.x,g.position.y))?(I(t,`${e.name} walked by a monster and lost the momentum`),e.movement=0):e.movement-=i},Oe=(e,t,o,n)=>{const i=Je(t.dungeon.layout.grid,o,n);i&&t.dungeon.discoveredRooms.push(i),cn(e,t,e.position.x,e.position.y,1),I(t,`${e.name} opened a door`)},dn=(e,t,o,n)=>{var l;if(e.actions===1&&e.movement!==3){I(t,`${e.name} has no actions left to attack`);return}const i=t.dungeon.layout.monsters.find(r=>r.position.x===o&&r.position.y===n);if(i){const r=((l=i.armour)==null?void 0:l.defense)??i.defense,g=Me(e.level,e.weapon.dice),u=Math.max(g-r,0);I(t,`${e.name} attacked ${i.name} with ${e.weapon.name} for ${ht(u,g,i)}`),i.health-=u,i.health<=0&&(t.dungeon.layout.monsters=t.dungeon.layout.monsters.filter(m=>m!=i),I(t,`${e.name} killed ${i.name}`),t.dungeon.killCount++,e.experience+=i.experience),e.actions>1&&e.movement<3?e.actions-=2:e.actions--}},Me=(e,t)=>{let o=[];for(let n=0;n<t;n++)o.push(Math.floor(Math.random()*6)+1);switch(e){case F.APPRENTICE:o=o.filter(n=>n===5);break;case F.KNIGHT:case F.HERO:o=o.filter(n=>n>=4);break;case F.LORD:case F.MASTER:o=o.filter(n=>n>=3);break}return o.length},Fe=e=>{const t=e.currentActor;if(!t)return;if(!gn(t)){I(e,`${t.name} has no actions left to pick lock`);return}const o=e.dungeon.layout.doors.find(n=>n.x===t.position.x&&n.y===t.position.y);o&&o.locked&&(Me(t.level,1)>=1?(o.locked=!1,I(e,`${t.name} managed to pick the lock`)):I(e,`${t.name} failed to pick the lock`),t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.movement=3,t.actions==0&&(t.movement=0))},We=e=>{const t=e.currentActor;if(!t)return;if(!gn(t)){I(e,`${t.name} has no actions left to search`);return}const o=Me(t.level,1);if(o>=1){const n=e.dungeon.layout.doors.find(r=>r.hidden&&r.x===t.position.x&&r.y===t.position.y);n&&(I(e,`${t.name} searched (${o}) and found a hidden door`),n.hidden=!1);const i=e.dungeon.layout.doors.find(r=>r.trapped&&r.x===t.position.x&&t.position.y);i&&!n&&(I(e,`${t.name} searched (${o}) and found a trap in a door`),i.trapped=!1);const l=e.dungeon.layout.secrets.find(r=>pt(r.position,t.position.x,t.position.y));l&&!i&&!n&&I(e,`${t.name} searched (${o}) and found ${l.name}`),!n&&!i&&!l&&I(e,`${t.name} searched but found nothing`)}else I(e,`${t.name} searched but found nothing`);t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.actions==0&&(t.movement=0)},gt=e=>{if(Qn(e),e.currentActor!==void 0){I(e,`${e.currentActor.name} ended their turn`);let o=e.heroes.indexOf(e.currentActor)+1;o===e.heroes.length&&(Ln(e),o=0),e.currentActor.actions=2,e.currentActor.movement=3,e.currentActor=e.heroes[o],I(e,`${e.currentActor.name} started their turn`)}},Qn=e=>{e.dungeon.winConditions.forEach(t=>{var o;switch(t.type){case V.KILL_ALL:{const n=e.dungeon.layout.monsters.map(i=>i.health).reduce((i,l)=>i+l,0);t.fulfilled=n<=0;break}case V.REACH_CELL:{t.fulfilled=e.heroes.some(n=>{var i;return n.position.x===((i=t.targetCell)==null?void 0:i.x)&&n.position.y===t.targetCell.y});break}case V.KILL_ALL_OF_TYPE:{t.fulfilled=e.dungeon.layout.monsters.filter(n=>n.type===t.targetMonsterType).some(n=>n.health>0);break}case V.OPEN_DOOR:{t.fulfilled=((o=e.dungeon.layout.doors.find(n=>{var i,l;return n.x===((i=t.targetCell)==null?void 0:i.x)&&n.y===((l=t.targetCell)==null?void 0:l.y)}))==null?void 0:o.open)??!1;break}case V.KILL_AT_LEAST:{t.fulfilled=(t.killMinCount?t.killMinCount:0)<=e.dungeon.killCount;break}}}),e.dungeon.beaten=e.dungeon.winConditions.map(t=>t.fulfilled).reduce((t,o)=>t&&o,!0),e.dungeon.beaten&&(I(e,"All win conditions have been fulfilled"),I(e,`You have cleared ${e.dungeon.name}`))},un=(e,t,o)=>{const n=Me(F.APPRENTICE,e.trapAttacks),i=Math.max(n-t.defense,0);I(o,`Door was trapped. ${t.name} took ${ht(i,n,t)}`),t.health-=i},Rn=(e,t,o,n)=>{const i=e.dungeon.layout.doors.find(l=>l.x===t.position.x&&l.y===t.position.y);if(i&&!i.locked){const l=Dn(t.position.x,t.position.y,o,n);if(i.side===l)return i.open=!0,i.trapped&&un(i,t,e),!0}return i&&i.locked&&I(e,"Door is locked"),!1},Dn=(e,t,o,n)=>{if(e===o){if(t>n)return b.UP;if(t<n)return b.DOWN}if(t===n){if(e>o)return b.LEFT;if(e<o)return b.RIGHT}},Xe=(e,t,o)=>{let n=!0;if(t<0||t>=e.grid[0].length||o<0||o>=e.grid.length)n=!1;else{const i=Je(e.grid,t,o);(i===vn||i===In||i===Ke||i===ut)&&(n=!1)}return n},Bt=(e,t,o)=>{const n=Je(e.layout.grid,t,o);return n?e.discoveredRooms.includes(n):!1},Je=(e,t,o)=>{let n;return e.forEach((i,l)=>{Ee(i).forEach((r,g)=>{l===o&&g===t&&(n=r)})}),n},pt=(e,t,o)=>e.x===t&&e.y===o||e.x===t-1&&e.y===o||e.x===t-1&&e.y===o-1||e.x===t&&e.y===o-1||e.x===t+1&&e.y===o-1||e.x===t+1&&e.y===o||e.x===t+1&&e.y===o+1||e.x===t&&e.y===o+1||e.x===t-1&&e.y===o+1,Ln=e=>{const t=e.dungeon.layout.monsters.filter(o=>{const n=Je(e.dungeon.layout.grid,o.position.x,o.position.y);return n&&e.dungeon.discoveredRooms.includes(n)&&o.health>0});t.length===0&&I(e,"No monsters can act"),t.forEach(o=>{const n=o.actions;for(;o.actions>0;){I(e,`${o.name} acted `);const i=e.heroes.filter(l=>pt(o.position,l.position.x,l.position.y));if(i.length>0){const l=Math.floor(Math.random()*i.length);Hn(e,o,i[l])}else wn(e,o)}o.actions=n})},tn=(e,t)=>Math.sqrt(Math.pow(e.x-(t==null?void 0:t.x),2)+Math.pow(e.y-(t==null?void 0:t.y),2)),wn=(e,t)=>{const o=e.heroes.map(i=>({hero:i,dist:tn(i.position,t.position)})).sort((i,l)=>i.dist-l.dist)[0],n=_n(e,t.position);if(n.length>0){const i=n.map(l=>({pos:l,dist:tn(l,o.hero.position)})).sort((l,r)=>l.dist-r.dist)[0].pos;t.position=i,I(e,`${t.name} moved towards ${o.hero.name} (${i.x},${i.y})`)}else I(e,`${t.name} could not move`);t.actions--};let _n=(e,t)=>{const o=t.x,n=t.y,i=[];for(let l=o-1;l<=o+1;l++)for(let r=n-1;r<=n+1;r++)l===o&&r===n||Xe(e.dungeon.layout,l,r)&&Bt(e.dungeon,l,r)&&i.push({x:l,y:r});return i.filter(l=>!e.heroes.find(r=>r.position.x===l.x&&r.position.y===l.y)).filter(l=>!e.dungeon.layout.monsters.find(g=>g.position.x===l.x&&g.position.y===l.y))};const ht=(e,t,o)=>{var i;const n=((i=o.armour)==null?void 0:i.defense)??o.defense;return`${e} damage (${t}-${n}=${e})`},Hn=(e,t,o)=>{if(t.actions===1&&t.movement!==3){I(e,`${o.name} has no actions left to attack`);return}if(o){const n=Me(t.level,t.weapon.dice),i=Math.max(n-o.defense,0);I(e,`${t.name} attacked ${o.name} with ${t.weapon.name} for ${ht(i,n,o)}`),o.health-=i,o.health<=0&&(I(e,`${t.name} killed ${o.name}`),e.heroes=e.heroes.filter(l=>l!==o)),(t==null?void 0:t.actions)>1&&(t==null?void 0:t.movement)<3?t.actions-=2:t.actions--}},gn=e=>e.movement<3?e.actions>1:e.actions>0,nn=(e,t)=>e.x===t.x&&e.y===t.y,I=(e,t)=>{e.actionLog=[t,...e.actionLog]},On="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAGiklEQVR4Ae3dS47iMBAA0DDiDogT9g6JY7ELJ2IJnKKnMxpLSQRRHJzxRPWyCQZ/n1ulFiqT3eVy+W5mXs/nszkcDjNrN01u/dkd/63Y9Z973e/35ng85jb7qP7UmKfTafdR5xoT+EBg37V9PB6zurher83X19dq9WdNolepm0/udbvdmvP53LRtm9t0cf0aYy6erIahBH6FWq3FEiAwEBAABhwKBGIJCACx9ttqCQwEBIABhwKBWAICQKz9tloCAwEBYMChQCCWgAAQa7+tlsBAQAAYcCgQiCUgAMTab6slMBD4kwk4eKdwoUvXXZKxN3caXZZd7tWl5i5plztOv36NMfvje03glcDqAaA7O9ClD69xvTsLMJV7n+bRpQOXvJaO+XMWoOQ09EUgS2D1ANDNZu5Zg6yZ/1R+959Fjdz7GmPmeqlPYCzgO4CxiDKBQAICQKDNtlQCYwEBYCyiTCCQgAAQaLMtlcBYQAAYiygTCCQgAATabEslMBYQAMYiygQCCQgAgTbbUgmMBQSAsYgygUAC+9xc/bXr59q/y+mvkXtfY8xcL/UJ9AV2Oc8F6Dec87oLFms+R+DdWYCpuc3J2Z9qv+SzqTE9F2CJqDalBLKeC5A76NrPEXh3FmBqnjVy9muMOWXgMwJJwHcAScKdQEABASDgplsygSQgACQJdwIBBQSAgJtuyQSSgACQJNwJBBQQAAJuuiUTSAICQJJwJxBQQAAIuOmWTCAJCABJwp1AQIHsswD/m9G7swBT86yRs19jzCkDnxHoBPY1fre/JP3S3/df2q4/96kc/3699PrVmJ4LkHTcawj8k7MAay+sbdu1h3jZvxz/lyze3JCA7wA2tFmmSqC0gABQWlR/BDYkIABsaLNMlUBpAQGgtKj+CGxIQADY0GaZKoHSAgJAaVH9EdiQgACwoc0yVQKlBQSA0qL6I7AhAQFgQ5tlqgRKC6x+FmDt5wjUzrGvPX7pPwj9ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAoJTAbwUM8lhPvL+bAAAAAElFTkSuQmCC",Sn="data:image/png;base64,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",Mn=(e,t)=>{const o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),i=Math.min(o,n),l=Math.max(o,n),r=i,g=l-i;let u=Math.sqrt(2);return g===0&&(u=1),Math.floor(u*r+g)},Pn=(e,t,o)=>{const n=e.currentActor,i=e.dungeon.layout.doors.find(l=>l.x===n.position.x&&l.y===n.position.y);if(i)if(!i.open&&!i.hidden&&!i.locked)switch(i.open=!0,i.trapped&&un(i,n,e),i.side){case b.RIGHT:Oe(n,e,t+1,o);break;case b.LEFT:Oe(n,e,t-1,o);break;case b.DOWN:Oe(n,e,t,o+1);break;case b.UP:Oe(n,e,t,o-1);break}else i.locked&&!i.hidden&&(I(e,"Door is locked"),Fe(e));else We(e)},Nn=(e,t,o)=>{const n=e.currentActor,i=Xe(e.dungeon.layout,t,o),l=Mn(n.position,{x:t,y:o});if(console.log("distance: "+l),i){const r=mt(e,t,o),g=ft(e,t,o);!r&&!g&&l<=n.movement?(n.position={x:t,y:o},n.movement-=l):g&&(l<=n.weapon.range?dn(n,e,t,o):I(e,"Monster is out of range"))}},Un=(e,t,o)=>{const n=o.currentActor,i=document.getElementById("gameBoard");if(!i)return;const l=i.getBoundingClientRect(),r=Math.min(Math.floor((e.clientX-l.left)/t),o.dungeon.layout.grid[0].length-1),g=Math.min(Math.floor((e.clientY-l.top)/t),o.dungeon.layout.grid.length-1),u=o.dungeon.layout.grid[g][r];r===n.position.x&&g===n.position.y?Pn(o,r,g):o.dungeon.discoveredRooms.includes(u)&&Nn(o,r,g),An(n)};function Gn(e){let t,o,n,i;return{c(){t=p("div"),o=p("canvas"),this.h()},l(l){t=h(l,"DIV",{style:!0,class:!0});var r=y(t);o=h(r,"CANVAS",{width:!0,height:!0,id:!0}),y(o).forEach(E),r.forEach(E),this.h()},h(){L(o,"width",s*40),L(o,"height",s*30),L(o,"id","gameBoard"),L(t,"style",e[2]),L(t,"class","dungeon svelte-a4uhtl")},m(l,r){W(l,t,r),f(t,o),n||(i=w(o,"click",e[1]),n=!0)},p:j,d(l){l&&E(t),n=!1,i()}}}function Yn(e){let t,o,n,i;return{c(){t=p("div"),o=p("canvas"),this.h()},l(l){t=h(l,"DIV",{style:!0,class:!0});var r=y(t);o=h(r,"CANVAS",{width:!0,height:!0,id:!0}),y(o).forEach(E),r.forEach(E),this.h()},h(){L(o,"width",s*40),L(o,"height",s*30),L(o,"id","gameBoard"),L(t,"style",e[3]),L(t,"class","dungeon svelte-a4uhtl")},m(l,r){W(l,t,r),f(t,o),n||(i=w(o,"click",e[1]),n=!0)},p:j,d(l){l&&E(t),n=!1,i()}}}function Kn(e){let t,o,n;Bn(e[6]);function i(g,u){return g[0]<600?Yn:Gn}let l=i(e),r=l(e);return{c(){r.c(),t=ve()},l(g){r.l(g),t=ve()},m(g,u){r.m(g,u),W(g,t,u),o||(n=w(window,"resize",e[6]),o=!0)},p(g,[u]){l===(l=i(g))&&r?r.p(g,u):(r.d(1),r=l(g),r&&(r.c(),r.m(t.parentNode,t)))},i:j,o:j,d(g){g&&E(t),r.d(g),o=!1,n()}}}const s=48;function Fn(e,t,o){let{state:n}=t,i,{debugMode:l=!0}=t;qe(()=>{const a=new Image;a.src=On;const A=new Image;A.src=Sn,r(a,A),setInterval(()=>r(a,A),10)});const r=(a,A)=>{if(!n||!document)return;const c=document.getElementById("gameBoard"),d=c.getContext("2d");d.clearRect(0,0,c.width,c.height),d.fillStyle="black",d.fillRect(0,0,c.width,c.height),n.dungeon.layout.grid.forEach((B,T)=>{Ee(B).forEach((C,R)=>u(d,C,R,T,a))}),n.dungeon.layout.grid.forEach((B,T)=>{Ee(B).forEach((C,R)=>m(d,C,R,T))}),n.dungeon.layout.grid.forEach((B,T)=>{Ee(B).forEach((C,R)=>v(d,C,R,T))}),n.dungeon.layout.grid.forEach((B,T)=>{Ee(B).forEach((C,R)=>$(d,C,R,T,A))}),ie(d,n.currentActor),Ie(d,n.currentActor)},g=(a,A,c)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="black",a.fillRect(A*s,c*s,s,s),a.stroke()},u=(a,A,c,d,B)=>{ke(A)||!n.dungeon.discoveredRooms.includes(A)&&A!==Ke?n.dungeon.discoveredRooms.some(T=>z(c,d,T))?a.drawImage(B,48,0,48,48,c*s,d*s,s,s):g(a,c,d):he(A)?g(a,c,d):a.drawImage(B,0,0,48,48,c*s,d*s,s,s)},m=(a,A,c,d)=>{A===Ke||A===ut||(a.beginPath(),a.strokeStyle="black",a.rect(c*s,d*s,s,s),l&&(a.font="7px Arial",a.fillText(c+","+d,c*s+3,d*s+(s-3))),a.stroke())},v=(a,A,c,d)=>{const B=le(c,d);if(B&&!B.hidden&&!B.open&&!he(A))switch(a.fillStyle="brown",B.side){case b.RIGHT:{a.fillRect(c*s+(s-2),d*s,4,s),B.locked&&l&&(a.fillStyle="grey",a.fillRect(c*s+(s-4),d*s+(s/2-4),8,8)),B.trapped&&l&&(a.fillStyle="red",a.fillRect(c*s+(s-4),d*s+(s/2-4),4,4));break}case b.LEFT:{a.fillRect(c*s-2,d*s,4,s),B.locked&&l&&(a.fillStyle="grey",a.fillRect(c*s-4,d*s+(s/2-4),8,8)),B.trapped&&l&&(a.fillStyle="red",a.fillRect(c*s-4,d*s+(s/2-4),4,4));break}case b.UP:{a.fillRect(c*s,d*s-2,s,4),B.locked&&l&&(a.fillStyle="grey",a.fillRect(c*s+(s/2-4),d*s-4,8,8)),B.trapped&&l&&(a.fillStyle="red",a.fillRect(c*s+(s/2-4),d*s-4,4,4));break}case b.DOWN:{a.fillRect(c*s,d*s+(s-2),s,4),B.locked&&l&&(a.fillStyle="grey",a.fillRect(c*s+(s/2-4),d*s+(s-4),8,8)),B.trapped&&l&&(a.fillStyle="red",a.fillRect(c*s+(s/2-4),d*s+(s-4),4,4));break}}},k=(a,A,c,d)=>{a.beginPath(),a.strokeStyle=A.colour,a.fillStyle=A.colour,a.fillRect(c*s+4,d*s+(s-6),s-8,4),a.stroke()},S=(a,A,c,d)=>{l&&c.forEach(B=>{const T=A.position.x,C=A.position.y,R=B.position.x,J=B.position.y;a.strokeStyle=A.colour,a.beginPath(),a.moveTo(T*s+s/2,C*s+s/2),a.lineTo(R*s+s/2,J*s+s/2),a.stroke()})},P=(a,A,c,d)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="red",a.fillRect(c*s+4,d*s,s-8,4),a.fillStyle="green",a.fillRect(c*s+4,d*s,(s-8)*(A.health/A.maxHealth),4),a.rect(c*s+4,d*s,s-8,4),a.stroke()},Pe=(a,A,c,d)=>{var B=a.fillStyle,T=a.strokeStyle;a.strokeStyle="#080808",a.fillStyle="darkred";for(let C=0;C<A.actions;C++)a.fillRect(c*s+4+6*C,d*s+s-12,5,5),a.rect(c*s+4+6*C,d*s+s-12,5,5),a.stroke();a.fillStyle="blue";for(let C=0;C<A.movement;C++)a.fillRect(c*s+s-22+6*C,d*s+s-12,5,5),a.rect(c*s+s-22+6*C,d*s+s-12,5,5),a.stroke();a.fillStyle=B,a.strokeStyle=T},Ie=(a,A)=>{A===n.currentActor&&(a.beginPath(),a.strokeStyle="lightblue",a.lineWidth=2,a.moveTo(A.position.x*s,A.position.y*s),a.lineTo(A.position.x*s+s/3,A.position.y*s),a.moveTo(A.position.x*s,A.position.y*s),a.lineTo(A.position.x*s,A.position.y*s+s/3),a.moveTo(A.position.x*s+s,A.position.y*s),a.lineTo(A.position.x*s+s/3*2,A.position.y*s),a.moveTo(A.position.x*s+s,A.position.y*s),a.lineTo(A.position.x*s+s,A.position.y*s+s/3),a.moveTo(A.position.x*s,A.position.y*s+s),a.lineTo(A.position.x*s,A.position.y*s+s/3*2),a.moveTo(A.position.x*s,A.position.y*s+s),a.lineTo(A.position.x*s+s/3,A.position.y*s+s),a.moveTo(A.position.x*s+s,A.position.y*s+s),a.lineTo(A.position.x*s+s,A.position.y*s+s/3*2),a.moveTo(A.position.x*s+s,A.position.y*s+s),a.lineTo(A.position.x*s+s/3*2,A.position.y*s+s),a.stroke(),a.lineWidth=1)},ie=(a,A)=>{if(A===n.currentActor&&l){for(let c=A.position.x-A.movement;c<=A.position.x+A.movement;c++)for(let d=A.position.y-A.movement;d<=A.position.y+A.movement;d++)if(Bt(n.dungeon,c,d)){const T=ft(n,c,d),C=mt(n,c,d),R=Xe(n.dungeon.layout,c,d);!C&&!T&&R&&(a.fillStyle="rgba(50, 50, 255, 0.08)",a.fillRect(c*s,d*s,s,s),a.stroke())}}},$=(a,A,c,d,B)=>{a.beginPath();const T=n.heroes.find(C=>C.position.x===c&&C.position.y===d);if(T)a.drawImage(B,4*16,0,16,16,c*s,d*s,s,s),Pe(a,T,c,d),k(a,T,c,d),P(a,T,c,d);else{const C=n.dungeon.layout.monsters.find(R=>R.position.x===c&&R.position.y===d);if(C&&C.health>0&&!he(A)){switch(C.type){case M.ORCH:a.drawImage(B,s,16,16,16,c*s,d*s,s,s);break;case M.TROLL:a.drawImage(B,s,16,16,16,c*s,d*s,s,s);break;default:a.drawImage(B,16,16,16,16,c*s,d*s,s,s);break}k(a,C,c,d),P(a,C,c,d),S(a,C,n.heroes)}}},he=a=>a===Ke||!n.dungeon.discoveredRooms.includes(a),ke=a=>a===ut,le=(a,A)=>n.dungeon.layout.doors.find(c=>c.x===a&&c.y===A),z=(a,A,c)=>{if(!n)return;const d=Math.max(a-1,0),B=Math.max(A-1,0),T=Math.min(a+1,n.dungeon.layout.grid.length),C=Math.min(A+1,n.dungeon.layout.grid[0].length);for(let R=d;R<=T;R++)for(let J=B;J<=C;J++){const re=n.dungeon.layout.grid[J];if(Ee(re)[R]===c)return!0}return!1},Ne=a=>{Un(a,s,n)},ye=`max-height: ${s*17}px; max-width: ${s*40}`,ae=`max-height: ${s*15}px; max-width: ${s*40}`;function X(){o(0,i=window.innerWidth)}return e.$$set=a=>{"state"in a&&o(4,n=a.state),"debugMode"in a&&o(5,l=a.debugMode)},[i,Ne,ye,ae,n,l,X]}class Wn extends $e{constructor(t){super(),ze(this,t,Fn,Kn,Se,{state:4,debugMode:5})}}function qn(e){let t;return{c(){t=p("canvas"),this.h()},l(o){t=h(o,"CANVAS",{id:!0,height:!0,width:!0}),y(t).forEach(E),this.h()},h(){L(t,"id","characterBoard"),L(t,"height","720"),L(t,"width","260")},m(o,n){W(o,t,n)},p:j,i:j,o:j,d(o){o&&E(t)}}}const q=180;function $n(e,t,o){let{state:n}=t;qe(()=>{i(),setInterval(i,100)});const i=()=>{if(!n||!document)return;const u=document.getElementById("characterBoard"),m=u.getContext("2d");m.clearRect(0,0,u.width,u.height),m.stroke(),n.heroes.forEach((v,k)=>{l(m,u,v,k),r(m,v,k),g(m,v,k)})},l=(u,m,v,k)=>{u.fillStyle=v.colour,u.fillRect(12,k*q+12,m.width,q-12),u.stroke(),u.fillStyle="black"},r=(u,m,v)=>{const S=(m===n.currentActor?"> "+m.name:m.name)+" - "+m.level+" ("+m.experience+")";u.strokeStyle="black",u.font="18px Arial",u.fillText(S,16,v*q+30),u.fillText("HP: "+m.health,16,v*q+50),u.fillText("Actions: "+m.actions,16,v*q+70),u.fillText("Moves: "+m.movement,16,v*q+90),u.stroke()},g=(u,m,v)=>{u.fillText("Equipment",16,v*q+110),u.font="12px Arial",u.fillText("🗡️ "+m.weapon.name+" ("+m.weapon.dice+")",16,v*q+125);let k="None (0)",S="None (0)";m.armour&&(k=m.armour.name+" ("+m.armour.defense+")"),m.shield&&(S=m.shield.name+" ("+m.armour.dice+")"),u.fillText("🧱 "+k,16,v*q+142),u.fillText("🛡️ "+S,16,v*q+159)};return e.$$set=u=>{"state"in u&&o(0,n=u.state)},[n]}class zn extends $e{constructor(t){super(),ze(this,t,$n,qn,Se,{state:0})}}function on(e,t,o){const n=e.slice();return n[2]=t[o],n[4]=o,n}function Xn(e){let t,o,n=e[2]+"",i;return{c(){t=p("p"),o=qt(">"),i=qt(n),this.h()},l(l){t=h(l,"P",{class:!0});var r=y(t);o=$t(r,">"),i=$t(r,n),r.forEach(E),this.h()},h(){L(t,"class","svelte-1xp6uq")},m(l,r){W(l,t,r),f(t,o),f(t,i)},p(l,r){r&1&&n!==(n=l[2]+"")&&En(i,n)},d(l){l&&E(t)}}}function sn(e){let t,o=e[4]<25&&Xn(e);return{c(){o&&o.c(),t=ve()},l(n){o&&o.l(n),t=ve()},m(n,i){o&&o.m(n,i),W(n,t,i)},p(n,i){n[4]<25&&o.p(n,i)},d(n){n&&E(t),o&&o.d(n)}}}function ln(e){let t,o=Xt(e[0]),n=[];for(let i=0;i<o.length;i+=1)n[i]=sn(on(e,o,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=ve()},l(i){for(let l=0;l<n.length;l+=1)n[l].l(i);t=ve()},m(i,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,l);W(i,t,l)},p(i,l){if(l&1){o=Xt(i[0]);let r;for(r=0;r<o.length;r+=1){const g=on(i,o,r);n[r]?n[r].p(g,l):(n[r]=sn(g),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=o.length}},d(i){i&&E(t),hn(n,i)}}}function Jn(e){let t,o=e[0],n=ln(e);return{c(){t=p("div"),n.c(),this.h()},l(i){t=h(i,"DIV",{class:!0});var l=y(t);n.l(l),l.forEach(E),this.h()},h(){L(t,"class","log svelte-1xp6uq")},m(i,l){W(i,t,l),n.m(t,null)},p(i,[l]){l&1&&Se(o,o=i[0])?(n.d(1),n=ln(i),n.c(),n.m(t,null)):n.p(i,l)},i:j,o:j,d(i){i&&E(t),n.d(i)}}}function xn(e,t,o){let n=[],{state:i}=t;return qe(()=>{setInterval(()=>{o(0,n=i.actionLog)},1e3)}),e.$$set=l=>{"state"in l&&o(1,i=l.state)},[n,i]}class Vn extends $e{constructor(t){super(),ze(this,t,xn,Jn,Se,{state:1})}}function Zn(e){let t,o,n,i,l,r,g,u,m,v,k,S,P,Pe="UL",Ie,ie,$,he="U",ke,le,z,Ne="UR",ye,ae,X,a="Next",A,c,d,B,T="L",C,R,J,re,ee,Et="R",xe,be,Ae,Ct="Search",Ve,K,Te,ce,vt="DL",Ze,Qe,de,It="D",je,Re,ue,kt="DR",et,De,ge,yt="Pick lock",tt,fe,Le,me,bt="Save",nt,we,Be,Tt="Load",ot,x,st,Ue,it,Qt;n=new zn({props:{state:e[0]}});function fn(D){e[2](D)}let Rt={};e[0]!==void 0&&(Rt.state=e[0]),l=new Wn({props:Rt}),Ft.push(()=>zt(l,"state",fn));function mn(D){e[4](D)}let Dt={};return e[0]!==void 0&&(Dt.state=e[0]),x=new Vn({props:Dt}),Ft.push(()=>zt(x,"state",mn)),{c(){t=p("div"),o=p("div"),lt(n.$$.fragment),i=_(),lt(l.$$.fragment),g=_(),u=p("div"),m=p("div"),v=p("table"),k=p("tr"),S=p("td"),P=p("button"),P.textContent=Pe,Ie=_(),ie=p("td"),$=p("button"),$.textContent=he,ke=_(),le=p("td"),z=p("button"),z.textContent=Ne,ye=_(),ae=p("td"),X=p("button"),X.textContent=a,A=_(),c=p("tr"),d=p("td"),B=p("button"),B.textContent=T,C=_(),R=p("td"),J=_(),re=p("td"),ee=p("button"),ee.textContent=Et,xe=_(),be=p("td"),Ae=p("button"),Ae.textContent=Ct,Ve=_(),K=p("tr"),Te=p("td"),ce=p("button"),ce.textContent=vt,Ze=_(),Qe=p("td"),de=p("button"),de.textContent=It,je=_(),Re=p("td"),ue=p("button"),ue.textContent=kt,et=_(),De=p("td"),ge=p("button"),ge.textContent=yt,tt=_(),fe=p("tr"),Le=p("td"),me=p("button"),me.textContent=bt,nt=_(),we=p("td"),Be=p("button"),Be.textContent=Tt,ot=_(),lt(x.$$.fragment),this.h()},l(D){t=h(D,"DIV",{class:!0});var U=y(t);o=h(U,"DIV",{class:!0});var _e=y(o);at(n.$$.fragment,_e),_e.forEach(E),i=H(U),at(l.$$.fragment,U),U.forEach(E),g=H(D),u=h(D,"DIV",{class:!0});var pe=y(u);m=h(pe,"DIV",{class:!0});var He=y(m);v=h(He,"TABLE",{});var te=y(v);k=h(te,"TR",{});var ne=y(k);S=h(ne,"TD",{});var Lt=y(S);P=h(Lt,"BUTTON",{"data-svelte-h":!0}),N(P)!=="svelte-fw3uxo"&&(P.textContent=Pe),Lt.forEach(E),Ie=H(ne),ie=h(ne,"TD",{});var wt=y(ie);$=h(wt,"BUTTON",{"data-svelte-h":!0}),N($)!=="svelte-1jeoia6"&&($.textContent=he),wt.forEach(E),ke=H(ne),le=h(ne,"TD",{});var _t=y(le);z=h(_t,"BUTTON",{"data-svelte-h":!0}),N(z)!=="svelte-1p8c8vc"&&(z.textContent=Ne),_t.forEach(E),ye=H(ne),ae=h(ne,"TD",{});var Ht=y(ae);X=h(Ht,"BUTTON",{"data-svelte-h":!0}),N(X)!=="svelte-1rtxc14"&&(X.textContent=a),Ht.forEach(E),ne.forEach(E),A=H(te),c=h(te,"TR",{});var oe=y(c);d=h(oe,"TD",{});var Ot=y(d);B=h(Ot,"BUTTON",{"data-svelte-h":!0}),N(B)!=="svelte-10dnpu6"&&(B.textContent=T),Ot.forEach(E),C=H(oe),R=h(oe,"TD",{}),y(R).forEach(E),J=H(oe),re=h(oe,"TD",{});var St=y(re);ee=h(St,"BUTTON",{"data-svelte-h":!0}),N(ee)!=="svelte-12287ni"&&(ee.textContent=Et),St.forEach(E),xe=H(oe),be=h(oe,"TD",{});var Mt=y(be);Ae=h(Mt,"BUTTON",{"data-svelte-h":!0}),N(Ae)!=="svelte-cps1bu"&&(Ae.textContent=Ct),Mt.forEach(E),oe.forEach(E),Ve=H(te),K=h(te,"TR",{});var se=y(K);Te=h(se,"TD",{});var Pt=y(Te);ce=h(Pt,"BUTTON",{"data-svelte-h":!0}),N(ce)!=="svelte-1ji074i"&&(ce.textContent=vt),Pt.forEach(E),Ze=H(se),Qe=h(se,"TD",{});var Nt=y(Qe);de=h(Nt,"BUTTON",{"data-svelte-h":!0}),N(de)!=="svelte-li5tq6"&&(de.textContent=It),Nt.forEach(E),je=H(se),Re=h(se,"TD",{});var Ut=y(Re);ue=h(Ut,"BUTTON",{"data-svelte-h":!0}),N(ue)!=="svelte-3esmwe"&&(ue.textContent=kt),Ut.forEach(E),et=H(se),De=h(se,"TD",{});var Gt=y(De);ge=h(Gt,"BUTTON",{"data-svelte-h":!0}),N(ge)!=="svelte-sacog4"&&(ge.textContent=yt),Gt.forEach(E),se.forEach(E),tt=H(te),fe=h(te,"TR",{});var Ge=y(fe);Le=h(Ge,"TD",{});var Yt=y(Le);me=h(Yt,"BUTTON",{"data-svelte-h":!0}),N(me)!=="svelte-1vr5zyk"&&(me.textContent=bt),Yt.forEach(E),nt=H(Ge),we=h(Ge,"TD",{});var Kt=y(we);Be=h(Kt,"BUTTON",{"data-svelte-h":!0}),N(Be)!=="svelte-1m2jkw7"&&(Be.textContent=Tt),Kt.forEach(E),Ge.forEach(E),te.forEach(E),He.forEach(E),ot=H(pe),at(x.$$.fragment,pe),pe.forEach(E),this.h()},h(){L(o,"class","characterSide svelte-13uybsp"),L(t,"class","container svelte-13uybsp"),L(m,"class","commands svelte-13uybsp"),L(u,"class","container svelte-13uybsp")},m(D,U){W(D,t,U),f(t,o),rt(n,o,null),f(t,i),rt(l,t,null),W(D,g,U),W(D,u,U),f(u,m),f(m,v),f(v,k),f(k,S),f(S,P),f(k,Ie),f(k,ie),f(ie,$),f(k,ke),f(k,le),f(le,z),f(k,ye),f(k,ae),f(ae,X),f(v,A),f(v,c),f(c,d),f(d,B),f(c,C),f(c,R),f(c,J),f(c,re),f(re,ee),f(c,xe),f(c,be),f(be,Ae),f(v,Ve),f(v,K),f(K,Te),f(Te,ce),f(K,Ze),f(K,Qe),f(Qe,de),f(K,je),f(K,Re),f(Re,ue),f(K,et),f(K,De),f(De,ge),f(v,tt),f(v,fe),f(fe,Le),f(Le,me),f(fe,nt),f(fe,we),f(we,Be),f(u,ot),rt(x,u,null),Ue=!0,it||(Qt=[w(window,"keydown",Cn(e[1])),w(P,"click",function(){G(Q("UL",e[0]))&&Q("UL",e[0]).apply(this,arguments)}),w($,"click",function(){G(Q("U",e[0]))&&Q("U",e[0]).apply(this,arguments)}),w(z,"click",function(){G(Q("UR",e[0]))&&Q("UR",e[0]).apply(this,arguments)}),w(X,"click",function(){G(gt(e[0]))&&gt(e[0]).apply(this,arguments)}),w(B,"click",function(){G(Q("L",e[0]))&&Q("L",e[0]).apply(this,arguments)}),w(ee,"click",function(){G(Q("R",e[0]))&&Q("R",e[0]).apply(this,arguments)}),w(Ae,"click",function(){G(We(e[0]))&&We(e[0]).apply(this,arguments)}),w(ce,"click",function(){G(Q("DL",e[0]))&&Q("DL",e[0]).apply(this,arguments)}),w(de,"click",function(){G(Q("D",e[0]))&&Q("D",e[0]).apply(this,arguments)}),w(ue,"click",function(){G(Q("DR",e[0]))&&Q("DR",e[0]).apply(this,arguments)}),w(ge,"click",function(){G(Fe(e[0]))&&Fe(e[0]).apply(this,arguments)}),w(me,"click",function(){G(en(e[0]))&&en(e[0]).apply(this,arguments)}),w(Be,"click",e[3])],it=!0)},p(D,[U]){e=D;const _e={};U&1&&(_e.state=e[0]),n.$set(_e);const pe={};!r&&U&1&&(r=!0,pe.state=e[0],Wt(()=>r=!1)),l.$set(pe);const He={};!st&&U&1&&(st=!0,He.state=e[0],Wt(()=>st=!1)),x.$set(He)},i(D){Ue||(At(n.$$.fragment,D),At(l.$$.fragment,D),At(x.$$.fragment,D),Ue=!0)},o(D){ct(n.$$.fragment,D),ct(l.$$.fragment,D),ct(x.$$.fragment,D),Ue=!1},d(D){D&&(E(t),E(g),E(u)),dt(n),dt(l),dt(x),it=!1,pn(Qt)}}}function jn(e,t,o){let n=Tn();qe(()=>{setInterval(l,1e3)});function i(m){switch(m.key){case"6":case"d":Q("R",n);break;case"9":case"e":Q("UR",n);break;case"8":case"w":Q("U",n);break;case"7":case"q":Q("UL",n);break;case"4":case"a":Q("L",n);break;case"1":case"z":Q("DL",n);break;case"2":case"x":Q("D",n);break;case"3":case"c":Q("DR",n);break;case"0":case" ":gt(n);break;case"-":case"r":Fe(n);break;case"+":case"f":We(n);break}}const l=()=>{if(n.dungeon.beaten&&n.dungeon.nextDungeon){o(0,n.dungeon=n.dungeon.nextDungeon,n);const m=an.filter(v=>!n.heroes.find(k=>v.name===k.name));n.heroes.push(...m),rn(n.heroes,n.dungeon),o(0,n.actionLog=["You have reached "+n.dungeon.name],n)}};function r(m){n=m,o(0,n)}const g=()=>o(0,n=bn());function u(m){n=m,o(0,n)}return[n,i,r,g,u]}class no extends $e{constructor(t){super(),ze(this,t,jn,Zn,Se,{})}}export{no as component};
