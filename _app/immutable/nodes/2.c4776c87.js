import{s as pe,n as be,e as Se,o as un,f as yn,r as Nn,b as he,h as _e,i as dt}from"../chunks/scheduler.8ae2156d.js";import{S as we,i as Ne,e as me,a as I,f,g as H,m as R,h as w,j as N,n as M,k as C,x as p,o as x,s as Z,c as j,y as Ie,d as S,p as Pe,t as $,b as Be,z as fn,A as ve,r as Oe,u as Re,v as Me,w as Ce,B as Oo,l as ln,C as mt}from"../chunks/index.9c43906b.js";import{t as Ve,a as pt,s as Tn}from"../chunks/index.b80fb6ce.js";function Ge(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var F=(e=>(e.Red="#CD5C5C",e.Blue="#1E90FF",e.Green="#90EE90",e.Yellow="#FCFF4F",e))(F||{}),G=(e=>(e.ORCH="Orch",e.TROLL="Troll",e.GREEN_DARK_LORD="Green Dark Lord",e.BLUE_DARK_LORD="Blue Dark Lord",e.RED_DARK_LORD="Red Dark Lord",e.YELLOW_DARK_LORD="Yellow Dark Lord",e))(G||{}),de=(e=>(e.APPRENTICE="apprentice",e.KNIGHT="knight",e.HERO="hero",e.LORD="lord",e.MASTER="master",e))(de||{}),ie=(e=>(e[e.KILL_ALL=0]="KILL_ALL",e[e.KILL_ALL_OF_TYPE=1]="KILL_ALL_OF_TYPE",e[e.REACH_CELL=2]="REACH_CELL",e[e.OPEN_DOOR=3]="OPEN_DOOR",e[e.KILL_AT_LEAST=4]="KILL_AT_LEAST",e))(ie||{}),ne=(e=>(e.EQUIPMENT="Equipment",e.MAGIC_ITEM="Magic Item",e.TRAP_DOOR="Trap Door",e.NOTE="Note",e))(ne||{}),A=(e=>(e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.DOWN="Down",e))(A||{}),X=(e=>(e[e.WEAPON=0]="WEAPON",e[e.ARMOUR=1]="ARMOUR",e[e.SHIELD=2]="SHIELD",e[e.MAGIC=3]="MAGIC",e))(X||{});const an=[{name:"items.weapons.sword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:0,type:X.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.twoHandedSword",range:1,dice:4,twoHanded:!0,useHearHeroes:!1,amountInDeck:1,type:X.WEAPON,value:3,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.halberd",range:2,dice:3,twoHanded:!0,useHearHeroes:!0,amountInDeck:1,type:X.WEAPON,value:2,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.flail",range:1,dice:4,twoHanded:!1,useHearHeroes:!0,amountInDeck:1,type:X.WEAPON,value:4,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.doubleHeadedAxe",range:1,dice:4,twoHanded:!0,useHearHeroes:!0,amountInDeck:1,type:X.WEAPON,value:3,ignoresShield:!1,ignoresArmour:!1}],on=[{name:"items.weapons.orchSword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4,type:X.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.orchBow",range:999,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4,type:X.WEAPON,value:0,ignoresShield:!0,ignoresArmour:!1},{name:"items.weapons.trollClub",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4,type:X.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.darkLordSword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:3,type:X.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"items.weapons.greenDarkLordSword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:1,type:X.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1}],gt=[{name:"items.armour.chainMail",type:X.ARMOUR,amountInDeck:2,defense:1,magicProtection:!1,movementReduction:0,value:2},{name:"items.armour.plateMail",type:X.ARMOUR,amountInDeck:1,defense:2,magicProtection:!1,movementReduction:1,value:3},{name:"items.armour.dragonSkinMail",type:X.ARMOUR,amountInDeck:1,defense:2,magicProtection:!0,movementReduction:0,value:4}],On=[{name:"items.armour.orchMail",defense:0,magicProtection:!1,amountInDeck:4,type:X.ARMOUR,movementReduction:0,value:0},{name:"items.armour.trollSkin",defense:1,magicProtection:!1,amountInDeck:4,type:X.ARMOUR,movementReduction:0,value:0},{name:"items.armour.darkLordCape",defense:2,magicProtection:!1,amountInDeck:4,type:X.ARMOUR,movementReduction:0,value:0}],ht=[{name:"items.shields.largeShield",type:X.SHIELD,amountInDeck:2,dice:2,value:2},{name:"items.shields.smallShield",type:X.SHIELD,amountInDeck:2,dice:1,value:1}],_t=[{name:"items.shields.blueDarkLordShield",type:X.SHIELD,amountInDeck:1,dice:1,value:0}],Fe="USED",Fn="ATTACK_BONUS",Wn="SEARCH_BONUS",Ro="BREAK_LOCK",Vn="RE_ROLL_ATTACK",Yn="DESCRIPTION",An="ACTIVE",kn="MOVEMENT_BONUS",qn="ACTIONS_BONUS",Mo="RESET_ON",Co="NEXT_TURN",vt="TRADE",To="NEXT_SCENARIO",Pn={movementBonusOnPickup:(e,n,o)=>{var t,s;o.maxMovement+=(t=n.properties)==null?void 0:t[kn],o.actions>0&&(o.movement+=(s=n.properties)==null?void 0:s[kn])}},Lo={movementBonusOnDrop:(e,n,o)=>{var t,s;o.maxMovement-1>0&&(o.maxMovement-=(t=n.properties)==null?void 0:t[kn]),o.movement-1>=0&&(o.movement-=(s=n.properties)==null?void 0:s[kn])}},yt={magicHerbsOnUse:(e,n,o,t)=>{if(n.disabled){v(e,"logs.item.cannotUse",{item:h(n.name)});return}if(!t){v(e,"logs.item.noTarget");return}if(!je(o)){v(e,"logs.heroAction.noActions",{hero:h(o.name)});return}if(n.properties){if(n.properties[Fe]){v(e,"logs.item.noUsesLeft",{item:h(n.name)});return}n.properties[Fe]=!0;const s=Math.min(ze(o.level,3),t.maxHealth-t.health);t.health+=s,v(e,"logs.item.magicHerbs",{user:h(o.name),item:h(n.name),target:h(t.name),addedHealth:`${s}`}),o.actions--,o.movement=o.maxMovement}},chaosSwordOnUse:(e,n,o,t)=>{if(n.disabled){v(e,"logs.item.cannotUse",{item:h(n.name)});return}},potionOfSpeedOnUse:(e,n,o)=>{var t,s,i;if(n.disabled){v(e,"logs.item.cannotUse",{item:h(n.name)});return}(t=n.properties)!=null&&t[Fe]?v(e,"logs.item.consumed",{item:h(n.name)}):(o.actions+=(s=n.properties)==null?void 0:s[qn],n.properties&&(n.properties[Fe]=!0),v(e,"logs.item.potionOfSpeed",{user:h(o.name),item:h(n.name),actions:(i=n.properties)==null?void 0:i[qn]}))},necklaceOfLightOnUse:(e,n,o,t)=>{var s;if(n.disabled){v(e,"logs.item.cannotUse",{item:h(n.name)});return}if(!t){v(e,"logs.item.noTarget");return}if(!je(o)){v(e,"logs.heroAction.noActions",{hero:h(o.name)});return}n.properties&&!((s=n.properties)!=null&&s[Fe])&&(n.properties[Fe]=!0,t.ignoredByMonsters=!0,o.actions--)}},Ho={magicHerbsOnReset:(e,n)=>{n.properties&&(n.properties[Fe]=!1)},necklaceOfLightOnUse:(e,n)=>{n.properties&&(n.properties[Fe]=!1),e.heroes.forEach(o=>o.ignoredByMonsters=!1)}},At=(e,n)=>{if(n.effect&&e.currentActor){const o=yt[n.effect];o(e,n,e.currentActor,e.targetActor),e.targetActor=void 0}},wo=e=>{e.heroes.forEach(n=>{n.inventory.filter(o=>bt(o)).forEach(o=>{if(o.reset){const t=Ho[o.reset];t(e,o)}})})},No=e=>{e.heroes.forEach(n=>{n.inventory.filter(o=>kt(o)).forEach(o=>{if(o.reset){const t=Ho[o.reset];t(e,o)}})})},kt=e=>e.properties?(e.properties[Mo]??[]).some(o=>o===Co):!1,bt=e=>e.properties?(e.properties[Mo]??[]).some(o=>o===To):!1,Et=e=>{const n=e.currentActor;if(n.blinded){v(e,"logs.heroAction.blinded",{hero:h(n.name)});return}const o=n.inventory.filter(a=>{var c;return(c=a.properties)==null?void 0:c[Wn]}).map(a=>{var c;return v(e,"logs.heroAction.searchBonus",{hero:h(n.name),item:h(a.name)}),(c=a.properties)==null?void 0:c[Wn]}).reduce((a,c)=>a+c,0),t=ze(n.level,1+o);let s,i,r,l;t>=1?(s=Nt(e,n,t),s||(i=Ct(e,n,t)),!s&&!i&&(r=Tt(e,n,t)),!s&&!i&&!r&&(l=Lt(e,n,t)),!s&&!i&&!r&&!l&&v(e,"logs.heroAction.searchFoundNothing",{hero:h(n.name)})):v(e,"logs.heroAction.searchFoundNothing",{hero:h(n.name)})},Po=e=>{const n=e.currentActor;if(!n)return!1;const o=e.dungeon.layout.secrets.filter(t=>t.type===ne.TRAP_DOOR).filter(t=>!t.found).find(t=>ye(t.position,n.position));return o?(Je(e,Dt(o),n,!1),v(e,"logs.heroAction.pitfall",{hero:h(n.name)}),n.movement=0,n.actions=0,n.incapacitated=!0,o.found=!0,!0):!1},Bo=(e,n)=>{const o=e.itemDeck.findIndex(t=>t.type===n.type&&t.name===n.name);e.itemDeck.splice(o,1)},Go=(e,n)=>{const o=e.magicItemDeck.findIndex(t=>t.type===n.type&&t.name===n.name);e.magicItemDeck.splice(o,1)},Dt=e=>({health:0,position:e.position,defense:0,experience:0,actions:0,movement:0,maxMovement:0,colour:F.Red,maxHealth:0,name:"Trap Door",level:de.APPRENTICE,incapacitated:!1,weapon:{name:"Falling",amountInDeck:0,dice:3,useHearHeroes:!0,twoHanded:!1,range:1,type:X.WEAPON,value:0,ignoresShield:!0,ignoresArmour:!0},inventory:[]}),It=(e,n)=>e.dungeon.layout.doors.filter(o=>o.hidden).find(o=>_n({x:o.x,y:o.y},n.x,n.y)),Ot=(e,n)=>e.dungeon.layout.doors.filter(o=>o.trapped).find(o=>o.x===n.x&&o.y===n.y),Rt=(e,n)=>e.dungeon.layout.secrets.filter(o=>!o.found).find(o=>_n(o.position,n.x,n.y)),Mt=(e,n)=>e.dungeon.layout.secrets.filter(o=>!o.found).filter(o=>o.type===ne.TRAP_DOOR).find(o=>_n(o.position,n.x,n.y)),Ct=(e,n,o)=>{const t=It(e,n.position);return t?(t.hidden=!1,v(e,"logs.heroAction.foundDoor",{hero:h(n.name),result:`${o}`}),!0):!1},Tt=(e,n,o)=>{const t=Ot(e,n.position);return t?(v(e,"logs.heroAction.foundTrapInDoor",{hero:h(n.name),result:`${o}`}),t.trapped=!1,!0):!1},Lt=(e,n,o)=>{const t=Rt(e,n.position);if(t){switch(v(e,"logs.heroAction.foundSecret",{hero:h(n.name),result:`${o}`,secret:h(t.name)}),t.found=!0,t.type){case ne.EQUIPMENT:{const s=t.item??Ht(e);s.amountInDeck>0&&(Bo(e,s),v(e,"logs.heroAction.equipped",{hero:h(n.name),item:h(s.name)}),xo(e,s,n));break}case ne.MAGIC_ITEM:{const s=t.item??wt(e);s.amountInDeck>0&&(Go(e,s),v(e,"logs.heroAction.found",{hero:h(n.name),item:h(s.name)}),n.inventory.push(s),s.pickup&&Pn[s.pickup](e,s,n));break}}return!0}return!1},Ht=e=>{const n=e.itemDeck.length,o=Math.floor(Math.random()*n);return e.itemDeck[o]},wt=e=>{const n=e.magicItemDeck.length,o=Math.floor(Math.random()*n);return e.magicItemDeck[o]},Nt=(e,n,o)=>{const t=Mt(e,n.position);return t?(v(e,"logs.heroAction.foundSecret",{hero:h(n.name),result:`${o}`,secret:h(t.name)}),t.found=!0,!0):!1},vn=(e,n)=>(an[0].amountInDeck--,{name:e,actions:2,movement:3,maxMovement:3,defense:0,level:de.APPRENTICE,health:7,maxHealth:7,colour:n,experience:0,position:{x:-1,y:-1},weapon:an[0],incapacitated:!1,inventory:[],isInventoryOpen:!1}),xe=(e,n)=>{ae(n);const o=n.currentActor;if(!o||o.actions===0)return;const t={x:o.position.x,y:o.position.y};switch(e){case"UL":t.x=o.position.x-1,t.y=o.position.y-1;break;case"U":t.y=o.position.y-1;break;case"UR":t.x=o.position.x+1,t.y=o.position.y-1;break;case"L":t.x=o.position.x-1;break;case"R":t.x=o.position.x+1;break;case"DL":t.x=o.position.x-1,t.y=o.position.y+1;break;case"D":t.y=o.position.y+1;break;case"DR":t.x=o.position.x+1,t.y=o.position.y+1;break}const s=mn(n,t.x,t.y),i=!Dn(n.dungeon.layout,t.x,t.y),r=dn(n,t.x,t.y);if(!s&&!i){const l=nn(n.dungeon,t.x,t.y);l?l&&(r?Ko(o,n,t):Xo(o,n,t.x,t.y,1)):Ut(n,o,t.x,t.y)&&tn(o,n,t.x,t.y)}else v(n,"logs.heroAction.illegalMove",{hero:h(o.name)});Po(n)||Bn(o)},Uo=e=>{ae(e);const n=e.currentActor;if(!n)return;if(n.blinded){v(e,"logs.heroAction.blinded",{hero:h(n.name)});return}if(!je(n)){v(e,"logs.heroAction.noActions",{hero:h(n.name)});return}const o=e.dungeon.layout.doors.find(t=>t.x===n.position.x&&t.y===n.position.y);o&&o.locked&&(ze(n.level,1)>=1?(o.locked=!1,v(e,"logs.heroAction.pickedLock",{hero:h(n.name)})):v(e,"logs.heroAction.failedToPickLock",{hero:h(n.name)}),n.actions>1&&n.movement<3?n.actions-=2:n.actions--,n.movement=We(n),n.actions==0&&(n.movement=0))},En=e=>{ae(e),e.heroes.forEach((n,o)=>{n.position=e.dungeon.startingPositions[o],n.movement=We(n),n.actions=2,n.health=n.maxHealth})},J=e=>e.heroes.filter(n=>n.health>0).map(n=>n),Pt=e=>{ae(e);const n=e.currentActor;n&&(n.actions--,n.movement=We(n),n.actions===0&&wn(e))},je=e=>e.movement<We(e)?e.actions>1:e.actions>0,tn=(e,n,o,t)=>{ae(n);const s=De(n.dungeon.layout.grid,o,t);s&&![gn,pn,en].includes(s)&&n.dungeon.discoveredRooms.push(s),Xo(e,n,e.position.x,e.position.y,1),v(n,"logs.heroAction.openedDoor",{hero:h(e.name)})},Ko=(e,n,o)=>{if(ae(n),e.actions===1&&e.movement<e.maxMovement){v(n,"logs.heroAction.noActions",{hero:h(e.name)});return}if(!e.weapon.useHearHeroes&&Vt(n,e)){v(n,"logs.heroAction.notNearFriend",{hero:h(e.name),weapon:h(e.weapon.name)});return}const t=Wt(n,o);t&&(Je(n,e,t,!1),t.health<=0&&Ft(n,t,e),e.actions>1&&e.movement<3?e.actions-=2:e.actions--)},Fo=e=>{ae(e);const n=e.currentActor;if(n){if(n.blinded){v(e,"logs.heroAction.blinded",{hero:h(n.name)});return}if(!je(n)){v(e,"logs.heroAction.noActions",{hero:h(n.name)});return}Et(e),n.actions>1&&n.movement<We(n)?n.actions-=2:n.actions--,n.actions==0&&(n.movement=0)}},dn=(e,n,o)=>e.dungeon.layout.monsters.some(t=>t.position.x===n&&t.position.y===o&&t.health>0),mn=(e,n,o)=>J(e).some(t=>t.position.x===n&&t.position.y===o),Bn=e=>{e.movement===0&&(e.actions--,e.actions!==0&&(e.movement=We(e))),e.actions==0&&(e.movement=0)},Bt=e=>{ae(e),J(e).forEach(n=>{const o=n.level;n.experience>=28?n.level=de.MASTER:n.experience>=18?n.level=de.LORD:n.experience>=10?n.level=de.HERO:n.experience>=4&&(n.level=de.KNIGHT),o!==n.level&&v(e,"logs.heroAction.leveledUp",{hero:h(n.name),level:h(`content.level.${n.level}`)})})},Gt=e=>{J(e).forEach(n=>n.experience+=1)},Wo=e=>{Yt(e).forEach(n=>{n.experience=0,n.health=n.maxHealth,n.movement=n.maxMovement,n.actions=2})},Vo=(e,n,o)=>!o.open&&!o.hidden&&(!o.locked||o.locked&&n)&&e.movement>0,Yo=(e,n)=>{const o=e.dungeon.layout.notes.find(t=>ye(t.position,n.position));o&&(e.dungeon.layout.doors.some(s=>s.hidden&&ye(o.position,{x:s.x,y:s.y}))||v(e,"logs.heroAction.reads",{hero:h(n.name),note:h(o.message)}))},qo=(e,n)=>{const o=e.dungeon.layout.monsters.some(t=>_n(n.position,t.position.x,t.position.y));return o&&v(e,"logs.heroAction.walkedByMonster",{hero:h(n.name)}),o},Rn=(e,n,o)=>{v(e,"logs.heroAction.drop",{hero:h(o.name),item:h(n.name)}),e.dungeon.layout.items.push({item:n,position:o.position}),n.drop&&Lo[n.drop](e,n,o)},xo=(e,n,o)=>{switch(n.type){case X.ARMOUR:o.armour&&Rn(e,o.armour,o),o.armour=n;break;case X.SHIELD:o.shield&&Rn(e,o.shield,o),o.shield=n;break;case X.WEAPON:o.weapon&&Rn(e,o.weapon,o),o.weapon=n;break;default:o.inventory.push(n);break}if(n.pickup){const t=Pn[n.pickup];t(e,n,o)}},Xo=(e,n,o,t,s)=>{e.position.x=o,e.position.y=t,Yo(n,e),qo(n,e)?e.movement=0:e.movement-=s},Ut=(e,n,o,t)=>{const s=e.dungeon.layout.doors.find(r=>r.x===n.position.x&&r.y===n.position.y),i=n.inventory.some(r=>{var l;return(l=r.properties)==null?void 0:l[Ro]});if(s&&Vo(n,i,s)){s.locked&&i&&v(e,"logs.heroAction.brokeLock",{hero:h(n.name)});const r=Kt(n.position.x,n.position.y,o,t);if(s.side===r)return s.open=!0,s.trapped&&Je(e,rt(s),n,!1),!0}return s&&s.locked&&v(e,"logs.heroAction.locked"),!1},Kt=(e,n,o,t)=>{if(e===o){if(n>t)return A.UP;if(n<t)return A.DOWN}if(n===t){if(e>o)return A.LEFT;if(e<o)return A.RIGHT}},Ft=(e,n,o)=>{e.dungeon.layout.monsters=e.dungeon.layout.monsters.filter(t=>t!=n),e.dungeon.killCount++,o.experience+=n.experience},Wt=(e,n)=>e.dungeon.layout.monsters.find(o=>ye(o.position,n)),Vt=(e,n)=>at(e,n).filter(o=>o!==n).length>0,Yt=e=>e.heroes.filter(n=>n.health<=0).map(n=>n),pn=" ",en="?",gn="#",qt={hasNecklaceOfLight:(e,n)=>{const o=J(e).some(t=>t.inventory.some(s=>s.name==="items.magicItems.necklaceOfLight.name"));return e.settings.debug&&v(e,"logs.debug.hasNecklaceOfLight",{hasNecklaceOfLight:o?"Y":"N"}),n.fulfilled&&o}},xt=(e,n,o)=>({item:o,position:{x:e,y:n}}),fe=(e,n,o,t)=>({type:e,name:n,position:{x:o,y:t},found:!1}),cn=(e,n,o,t)=>({type:e,name:t.name,position:{x:n,y:o},found:!1,item:t}),q=(e,n,o)=>({side:e,x:n,y:o,locked:!1,trapped:!1,open:!1,hidden:!1,trapAttacks:0}),Jo=(e,n,o,t)=>({...q(e,n,o),trapped:!0,trapAttacks:t}),He=(e,n,o)=>({...q(e,n,o),hidden:!0}),$e=(e,n,o)=>({...q(e,n,o),locked:!0}),sn=(e,n,o,t)=>({...q(e,n,o),locked:!0,trapped:!0,trapAttacks:t}),Ln=(e,n,o,t)=>({...q(e,n,o),hidden:!0,trapped:!0,trapAttacks:t}),So=(e,n,o,t,s)=>{const i=oe(e,n,o,t);return i.inventory=s,i},oe=(e,n,o,t)=>{const s=Object.values(F).indexOf(n),i=Object.keys(F)[s];let r=de.MASTER,l=2,a=2,c=4,u=4,g=4,E=on[3],_=On[2],T,O;return e===G.ORCH?(r=de.APPRENTICE,a=0,c=2,u=2,g=1,E=on[0],T=on[1],_=On[0]):e===G.TROLL?(r=de.KNIGHT,a=1,c=3,u=3,g=2,E=on[2],_=On[1]):e===G.YELLOW_DARK_LORD?l=3:e===G.GREEN_DARK_LORD?E=on[4]:e===G.BLUE_DARK_LORD&&(O=_t[0]),{type:e,level:r,colour:n,actions:l,defense:a,health:c,maxHealth:u,experience:g,weapon:E,armour:_,shield:O,rangedWeapon:T,name:e+" ("+i+")",movement:3,maxMovement:3,position:{x:o,y:t},incapacitated:!1,inventory:[]}},ke=[{name:"items.magicItems.healingHerbs.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{USED:!1,ACTIVE:!0,DESCRIPTION:"items.magicItems.healingHerbs.description",RESET_ON:[vt,To]},effect:"magicHerbsOnUse",reset:"magicHerbsOnReset"},{name:"items.magicItems.boots.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.boots.description",MOVEMENT_BONUS:1},pickup:"movementBonusOnPickup",drop:"movementBonusOnDrop"},{name:"items.magicItems.giantsGlove.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.giantsGlove.description",BREAK_DOOR:!0,ATTACK_BONUS:1}},{name:"items.magicItems.ringOfPrecision.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.ringOfPrecision.description",RE_ROLL_ATTACK:!0}},{name:"items.magicItems.crownOfWisdom.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.crownOfWisdom.description",SEARCH_BONUS:1}},{name:"items.magicItems.swordOfChaos.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.swordOfChaos.description"},effect:"chaosSwordOnUse"},{name:"items.magicItems.potionOfSpeed.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{DESCRIPTION:"items.magicItems.potionOfSpeed.description",USED:!1,ACTIONS_BONUS:2,ACTIVE:!0},effect:"potionOfSpeedOnUse"},{name:"items.magicItems.necklaceOfLight.name",type:X.MAGIC,value:0,amountInDeck:1,properties:{USED:!1,RESET_ON:[Co],ACTIVE:!0,DESCRIPTION:"items.magicItems.necklaceOfLight.description"},effect:"necklaceOfLightOnUse",reset:"necklaceOfLightOnReset"}],Qo={name:"campaign.iceDragon.e1m4.name",beaten:!1,winConditions:[{type:ie.KILL_AT_LEAST,killMinCount:7,fulfilled:!1},{type:ie.KILL_ALL,fulfilled:!1},{type:ie.REACH_CELL,fulfilled:!1,targetCell:{x:16,y:11},checkFulfilled:"hasNecklaceOfLight",additionalDescription:"content.winConditions.additional.requiresNecklace"}],startingPositions:[{x:3,y:2},{x:2,y:1},{x:2,y:2},{x:2,y:3}],discoveredRooms:["A"],layout:{grid:[" ##### ########   "," #AAA###CCCCCC#   "," #AAABBBCCCCCC#   "," #AAA###CCCCCC#   "," ##D## #####G##   ","  #D#  #####G##   ","###D## #####G##   ","#EEEE###HHHHHH#   ","#EEEEFFFHHHHHH#   ","##L#####HHHHHH####","##L#NNN#HHHHHHIII#","##L#NNN####K##III#","#MMMNNN####K##III#","#MMM#######K###J##","#MMM###PPPPPPPJJ##","#MMMPPPPPPPPPP####","#######PPPPPPP#   ","      #########   "],corridors:["B","D","G","F","L","K","J"],pits:[],doors:[q(A.DOWN,3,3),$e(A.RIGHT,4,2),q(A.RIGHT,7,2),$e(A.DOWN,12,3),q(A.DOWN,3,6),q(A.DOWN,12,6),He(A.DOWN,2,8),sn(A.RIGHT,4,8,2),q(A.RIGHT,7,8),q(A.DOWN,11,10),q(A.DOWN,2,11),He(A.RIGHT,3,12),q(A.DOWN,3,15),Jo(A.DOWN,11,13,2),Ln(A.RIGHT,13,10,2),Ln(A.RIGHT,13,14,2),He(A.UP,15,13)],monsters:[oe(G.ORCH,F.Blue,12,1),oe(G.ORCH,F.Red,12,6),oe(G.ORCH,F.Green,2,8),oe(G.ORCH,F.Yellow,2,14),oe(G.TROLL,F.Blue,10,9),So(G.TROLL,F.Yellow,9,15,[ke[7]]),oe(G.RED_DARK_LORD,F.Red,16,10)],secrets:[fe(ne.NOTE,"campaign.iceDragon.e1m4.secrets.note1",13,2),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",4,10),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",5,15),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",14,10),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",15,11),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",14,12)],notes:[{position:{x:11,y:8},message:"campaign.iceDragon.e1m4.notes.liberVortex"},{position:{x:13,y:10},message:"campaign.iceDragon.e1m4.notes.ironDoor"}],items:[xt(3,8,an[1])]},killCount:0},Zo={name:"campaign.iceDragon.e1m3.name",nextDungeon:Qo,beaten:!1,winConditions:[{type:ie.KILL_ALL,fulfilled:!1},{type:ie.OPEN_DOOR,targetCell:{x:18,y:4},fulfilled:!1}],startingPositions:[{x:2,y:5},{x:1,y:4},{x:1,y:5},{x:1,y:6}],discoveredRooms:["A"],layout:{grid:["       ########     ","     ###DDDEEE#     ","     #CCC##EEE#     ","######CCC##EEE######","#AAA##CCC####F#IIII#","#AAABBB#J####F#IIII#","#AAA####J##G#F#IIII#","##### ##J##GGF#IIII#","   ####KKK###F#IIII#","   #LLLKKK# #FMIIII#","   ####KKK####M#####","      #KKKMMMMM#    ","      ####MMMM##    ","         ######     "],corridors:["B","D","F","L"],pits:[{x:16,y:6},{x:17,y:6},{x:18,y:6},{x:15,y:8},{x:16,y:8},{x:17,y:8}],doors:[q(A.RIGHT,3,5),sn(A.DOWN,6,5,1),q(A.UP,6,5),q(A.DOWN,8,4),He(A.UP,8,2),q(A.DOWN,8,7),q(A.LEFT,7,9),sn(A.LEFT,4,9,1),sn(A.RIGHT,9,11,1),He(A.RIGHT,14,9),He(A.UP,18,4),sn(A.LEFT,14,9,1),q(A.LEFT,13,7),$e(A.UP,11,6),q(A.UP,13,4),q(A.LEFT,11,1)],monsters:[oe(G.ORCH,F.Yellow,5,5),So(G.TROLL,F.Yellow,7,3,[ke[3]]),oe(G.ORCH,F.Red,7,11),oe(G.ORCH,F.Blue,11,2),oe(G.ORCH,F.Blue,14,11),oe(G.YELLOW_DARK_LORD,F.Yellow,18,5)],secrets:[cn(ne.MAGIC_ITEM,8,10,ke[2]),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",8,6),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",11,1),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",11,7),fe(ne.TRAP_DOOR,"campaign.iceDragon.trapDoor",13,11)],notes:[{position:{x:6,y:5},message:"campaign.iceDragon.e1m3.notes.hint1"},{position:{x:8,y:3},message:"campaign.iceDragon.e1m3.notes.hint2"},{position:{x:8,y:8},message:"campaign.iceDragon.e1m3.notes.hint3"},{position:{x:14,y:10},message:"campaign.iceDragon.e1m3.notes.hint4"}],items:[]},killCount:0},jo={name:"campaign.iceDragon.e1m2.name",nextDungeon:Zo,beaten:!1,winConditions:[{type:ie.KILL_ALL,fulfilled:!1},{type:ie.OPEN_DOOR,targetCell:{x:17,y:14},fulfilled:!1}],startingPositions:[{x:2,y:14},{x:1,y:15},{x:2,y:15},{x:3,y:15}],discoveredRooms:["M"],layout:{grid:["############## #####","#AAA###CCCCCC###EEE#","#AAABBBC@CC@CDDDEEE#","#AAA###CCCCCC###EEE#","##### ##H##### #EEE#","       #H#     #EEE#","##### ##H##### #EEE#","#KKK###IIIIII# #EEE#","#KKKJJJIIIIII# ##F##","#KKK###IIIIII# ##F##","##L## #IIIIII# ##F##"," #L#  ######## #GGG#","##L##          #GGG#","#MMM#          #GGG#","#MMM#          #GGG#","#MMM#          #####","#####               "],corridors:["B","D","F","H","J","L"],doors:[q(A.UP,2,13),q(A.UP,2,10),q(A.RIGHT,3,8),$e(A.RIGHT,6,8),q(A.UP,8,7),q(A.UP,8,4),He(A.LEFT,7,2),q(A.LEFT,4,2),$e(A.RIGHT,12,2),q(A.RIGHT,15,2),q(A.DOWN,17,7),q(A.DOWN,17,10),He(A.DOWN,17,14)],monsters:[oe(G.TROLL,F.Red,3,7),oe(G.ORCH,F.Red,12,8),oe(G.ORCH,F.Green,11,1),oe(G.TROLL,F.Green,2,2),oe(G.ORCH,F.Yellow,18,7),oe(G.TROLL,F.Yellow,17,10)],secrets:[fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",1,3),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",3,3),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",15,2),cn(ne.MAGIC_ITEM,2,3,ke[1]),cn(ne.MAGIC_ITEM,16,11,ke[6])],notes:[{message:"campaign.iceDragon.e1m2.notes.hint1",position:{x:2,y:10}},{message:"campaign.iceDragon.e1m2.notes.hint2",position:{x:8,y:10}},{message:"campaign.iceDragon.e1m2.notes.hint3",position:{x:2,y:3}},{message:"campaign.iceDragon.e1m2.notes.hint4",position:{x:17,y:11}}],items:[]},killCount:0},$o={name:"campaign.iceDragon.e1m1.name",nextDungeon:jo,beaten:!1,winConditions:[{type:ie.KILL_ALL,fulfilled:!1},{type:ie.OPEN_DOOR,targetCell:{x:15,y:1},fulfilled:!1}],startingPositions:[{x:2,y:5},{x:1,y:4},{x:1,y:5},{x:1,y:6}],discoveredRooms:["A"],layout:{grid:["            ######","            #EEEE#","         ####EEEE#","##### ####DDDEEEE#","#AAA###CCCC#######","#AAABBBCCCC###GGG#","#AAA###CCCCFFFGGG#","##### #CCCC###GGG#","      #CCCC#######","      #CCCCHHHIII#","      ########III#","             #III#","             #####"],corridors:["B","D","F","H"],doors:[q(A.RIGHT,3,5),q(A.RIGHT,6,5),q(A.RIGHT,10,6),q(A.RIGHT,13,6),q(A.RIGHT,10,9),q(A.RIGHT,13,9),q(A.RIGHT,12,3),He(A.UP,10,4),He(A.RIGHT,15,2)],monsters:[oe(G.ORCH,F.Blue,10,8),oe(G.ORCH,F.Red,13,9),oe(G.TROLL,F.Red,16,2),oe(G.TROLL,F.Yellow,14,7)],secrets:[fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",10,5),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",13,1),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",16,10),cn(ne.MAGIC_ITEM,16,6,ke[0])],notes:[{message:"campaign.iceDragon.e1m1.notes.hint1",position:{x:3,y:5}},{message:"campaign.iceDragon.e1m1.notes.hint2",position:{x:10,y:9}},{message:"campaign.iceDragon.e1m1.notes.hint3",position:{x:10,y:6}},{message:"campaign.iceDragon.e1m1.notes.hint4",position:{x:10,y:4}}],items:[]},killCount:0},zo={name:"campaign.iceDragon.e1mo.name",beaten:!1,winConditions:[{type:ie.KILL_ALL,fulfilled:!1}],nextDungeon:$o,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A"],layout:{grid:["     ######","     #CCCC#","     #CCCC#","     #CCCC#","     ##E###","      #E#  ","      #E## ","##### #BB# ","#AAA###BB# ","#AAADDDBB# ","#AAA###BB# ","##### #### "],doors:[q(A.RIGHT,3,9),q(A.RIGHT,6,9),q(A.UP,7,7),q(A.UP,7,4)],monsters:[oe(G.ORCH,F.Green,6,9),oe(G.ORCH,F.Yellow,8,10),oe(G.ORCH,F.Red,7,5),oe(G.ORCH,F.Red,9,3),oe(G.TROLL,F.Green,6,1)],secrets:[],notes:[],items:[],corridors:["D","E"]},killCount:0,events:[1,2,3,4,5,6]},Xt=()=>{const e=[];return ke.forEach(n=>{for(let o=0;o<n.amountInDeck;o++)e.push(n)}),e},Jt=()=>{const e=[];return an.forEach(n=>{for(let o=0;o<n.amountInDeck;o++)e.push(n)}),gt.forEach(n=>{for(let o=0;o<n.amountInDeck;o++)e.push(n)}),ht.forEach(n=>{for(let o=0;o<n.amountInDeck;o++)e.push(n)}),e},St={name:"campaign.iceDragon.name",dungeons:[zo,$o,jo,Zo,Qo],itemDeck:Jt(),magicItemDeck:Xt(),heroes:[vn("Fearik",F.Yellow),vn("Helbran",F.Red),vn("Siedel",F.Green),vn("Wulf",F.Blue)]},Gn=(e,n)=>{const o=Math.abs(n.x-e.x),t=Math.abs(n.y-e.y),s=Math.min(o,t),i=Math.max(o,t),r=s,l=i-s;let a=Math.sqrt(2);return l===0&&(a=1),Math.floor(a*r+l)},Qt=(e,n)=>{ae(e);const o=e.currentActor,t=e.dungeon.layout.items.find(i=>ye(i.position,o.position));if(t){const i=t.item;i.type===X.MAGIC?Go(e,i):Bo(e,i);const r=e.dungeon.layout.items.indexOf(t);e.dungeon.layout.items.splice(r,1),v(e,"logs.heroAction.pickUp",{hero:h(o.name),item:h(i.name)}),xo(e,i,o);return}const s=e.dungeon.layout.doors.find(i=>i.x===o.position.x&&i.y===o.position.y&&!i.open);if(s&&!s.hidden){const i=o.inventory.some(r=>{var l;return(l=r.properties)==null?void 0:l[Ro]});if(Vo(o,i,s)){switch(s.locked&&i&&v(e,"logs.heroAction.brokeLock",{hero:h(o.name)}),s.open=!0,s.trapped&&Je(e,rt(s),o,!1),s.side){case A.RIGHT:tn(o,e,n.x+1,n.y);break;case A.LEFT:tn(o,e,n.x-1,n.y);break;case A.DOWN:tn(o,e,n.x,n.y+1);break;case A.UP:tn(o,e,n.x,n.y-1);break}Bn(o)}else if(s.locked&&!s.hidden){if(!je(o)){v(e,"logs.heroAction.noActions",{hero:h(o.name)});return}v(e,"logs.heroAction.locked"),Uo(e)}}else{if(!je(o)){v(e,"logs.heroAction.noActions",{hero:h(o.name)});return}Fo(e)}},Zt=(e,n)=>{ae(e);const o=e.currentActor;if(o.actions===0){o.movement=0,v(e,"logs.heroAction.noActions",{hero:h(o.name)});return}if(Dn(e.dungeon.layout,n.x,n.y)){const s=mn(e,n.x,n.y),i=dn(e,n.x,n.y),r=Gn(o.position,n),l=Un(o.position,n,2,e,!0);if(!s&&!i&&r<=o.movement&&l){if(o.position=n,o.movement-=r,Yo(e,o),qo(e,o)&&(o.movement=0),Po(e))return}else i&&(r<=o.weapon.range?Ko(o,e,n):v(e,"logs.heroAction.monsterOutOfRange"))}Bn(o)},jt=(e,n,o)=>{const t=document.getElementById("gameBoard");if(!t)return;const s=t.getBoundingClientRect(),i=Math.min(Math.floor((e.clientX-s.left)/n),o.dungeon.layout.grid[0].length-1),r=Math.min(Math.floor((e.clientY-s.top)/n),o.dungeon.layout.grid.length-1),l=o.dungeon.layout.grid[r][i],a=o.currentActor;i===a.position.x&&r===a.position.y?Qt(o,{x:i,y:r}):Xe(o.dungeon,l)&&Zt(o,{x:i,y:r})},Mn=e=>e.dungeon.layout.monsters.filter(n=>[G.ORCH,G.TROLL].includes(n.type)),$t=e=>{const n=et(e);n.length===0&&v(e,"logs.monsterAction.noMonsterAct"),n.forEach(o=>{const t=o.actions;for(v(e,"logs.monsterAction.acted",{monster:h(o.name)});o.actions>0;){ae(e);const s=at(e,o).filter(u=>!u.ignoredByMonsters),i=os(e,o),r=rs([...i,...Mn(e)],o),l=ls([...i,...Mn(e)],o),a=as([...J(e),...Mn(e)],o,e);switch(zt(e,o,s,i,r,l,a)){case"MELEE_ATTACK":{const u=ns(s);xn(e,o,u,!1);break}case"RANGED_ATTACK":{const u=es(i,o);xn(e,o,u,!0);break}case"MOVE":{ss(e,o);break}case"DIAGONAL_FIRE_ATTACK":Cn(e,o,r);break;case"ORTHOGONAL_FIRE_ATTACK":Cn(e,o,l);break;case"SAME_ROOM_FIRE_ATTACK":Cn(e,o,a)}o.movement=We(o)}o.actions=t,o.movement=We(o)})},zt=(e,n,o,t,s,i,r)=>o.length>0?"MELEE_ATTACK":!n.rangedWeapon&&s.length===0?"MOVE":t.length>0&&n.rangedWeapon?Math.random()<.1?(v(e,"logs.monsterAction.moveDespiteTarget",{monster:h(n.name)}),"MOVE"):"RANGED_ATTACK":r.length>0?Math.random()<.1?(v(e,"logs.monsterAction.moveDespiteTarget",{monster:h(n.name)}),"MOVE"):"SAME_ROOM_FIRE_ATTACK":t.length>0&&i.length>0?Math.random()<.1?(v(e,"logs.monsterAction.moveDespiteTarget",{monster:h(n.name)}),"MOVE"):"ORTHOGONAL_FIRE_ATTACK":t.length>0&&s.length>0?Math.random()<.1?(v(e,"logs.monsterAction.moveDespiteTarget",{monster:h(n.name)}),"MOVE"):"DIAGONAL_FIRE_ATTACK":"MOVE",es=(e,n)=>e.filter(o=>!o.shield).sort(o=>rn(n.position,o.position)).sort((o,t)=>t.health-o.health||rn(n.position,o.position)-rn(n.position,t.position))[0],ns=e=>e.sort((n,o)=>o.health-n.health)[0],os=(e,n)=>J(e).filter(o=>!o.ignoredByMonsters).filter(o=>Un(n.position,o.position,48,e,!1)),et=e=>e.dungeon.layout.monsters.filter(n=>{const o=De(e.dungeon.layout.grid,n.position.x,n.position.y);return o&&Xe(e.dungeon,o)&&n.health>0}),xn=(e,n,o,t)=>{Je(e,n,o,t),(n==null?void 0:n.actions)>1&&(n==null?void 0:n.movement)<3?n.actions-=2:n.actions--},ts=(e,n)=>J(e).map(o=>({hero:o,dist:rn(o.position,n.position)})).sort((o,t)=>o.dist-t.dist)[0],ss=(e,n)=>{const o=ts(e,n);for(;n.movement>0;){if(o&&o.dist>1){const t=is(e,n.position);if(t.length>0){const s=t.map(i=>({pos:i,dist:rn(i,o.hero.position)})).sort((i,r)=>i.dist-r.dist)[0].pos;n.position=s,v(e,"logs.monsterAction.movedTowards",{monster:h(n.name),hero:h(o.hero.name),x:`${s.x}`,y:`${s.y}`})}else v(e,"logs.monsterAction.couldNotMove",{monster:h(n.name)})}n.movement--}n.actions--},is=(e,n)=>{const o=n.x,t=n.y,s=[];for(let i=o-1;i<=o+1;i++)for(let r=t-1;r<=t+1;r++)i===o&&r===t||Dn(e.dungeon.layout,i,r)&&nn(e.dungeon,i,r)&&s.push({x:i,y:r});return s.filter(i=>!J(e).find(r=>r.position.x===i.x&&r.position.y===i.y)).filter(i=>!e.dungeon.layout.monsters.some(r=>r.position.x===i.x&&r.position.y===i.y))},rs=(e,n)=>e.filter(o=>[G.YELLOW_DARK_LORD,G.BLUE_DARK_LORD].includes(n.type)&&Math.abs(n.position.x-o.position.x)===Math.abs(n.position.y-o.position.y)&&Gn(n.position,o.position)>1),ls=(e,n)=>e.filter(o=>[G.RED_DARK_LORD,G.BLUE_DARK_LORD].includes(n.type)&&(n.position.x===o.position.x||n.position.y===o.position.y)&&Gn(n.position,o.position)>1),as=(e,n,o)=>e.filter(t=>[G.GREEN_DARK_LORD,G.BLUE_DARK_LORD].includes(n.type)&&De(o.dungeon.layout.grid,n.position.x,n.position.y)===De(o.dungeon.layout.grid,t.position.x,t.position.y)),Cn=(e,n,o)=>{o.forEach(t=>{var s,i;(s=t.armour)!=null&&s.magicProtection?v(e,"logs.monsterAction.fireAttackDeflected",{monster:h(n.name),target:h(t.name),armour:h((i=t.armour)==null?void 0:i.name)}):Je(e,n,t,!0)})},Xn=[{name:"events.hungryTroll.name",number:1,description:"events.hungryTroll.description",effect:"theHungryTroll",used:!1},{name:"events.sunStone.name",number:2,description:"events.sunStone.description",effect:"sunStone",used:!1},{name:"events.timePortal.name",number:3,description:"events.timePortal.description",effect:"timePortal",used:!1},{name:"events.fountainOfYouth.name",number:4,description:"events.fountainOfYouth.description",effect:"fountainOfYouth",used:!1},{name:"events.sleepingGas.name",number:5,description:"events.sleepingGas.description",effect:"sleepingGasCloud",used:!1},{name:"events.lostOrch.name",number:6,description:"events.lostOrch.description",effect:"theLostOrch",used:!1},{name:"events.dragonsBreath.name",number:7,description:"events.dragonsBreath.description",effect:"theDragonsBreath",used:!1},{name:"events.landslide.name",number:8,description:"events.landslide.description",effect:"landslide",used:!1},{name:"events.magicNode.name",number:9,description:"events.magicNode.description",effect:"fountainOfYouth",used:!1},{name:"events.foresight.name",number:10,description:"events.foresight.description",effect:"foresight",used:!1},{name:"events.earthquake.name",number:11,description:"events.earthquake.description",effect:"earthquake",used:!1},{name:"events.magicStorm.name",number:12,description:"events.magicStorm.description",effect:"theMagicStorm",used:!1},{name:"events.elementalWeapon.name",number:13,description:"events.elementalWeapon.description",effect:"theElementalWeapon",used:!1},{name:"events.orchDrums.name",number:14,description:"events.orchDrums.description",effect:"theOrchDrums",used:!1},{name:"events.weakness.name",number:15,description:"events.weakness.description",effect:"theSymbolOfWeakness",used:!1}],nt=e=>e.events?Hn(Xn.filter(n=>{var o;return(o=e==null?void 0:e.events)==null?void 0:o.includes(n.number)})):Hn(Xn),ot=e=>{const n=e.eventDeck.filter(o=>!o.used);return n.length>0?n[0]:(Hn(e.eventDeck),ot(e))},cs={sunStone:(e,n)=>{Ae(e,n);const o=J(e).length-1,t=Math.floor(Math.random()*o),s=J(e)[t],i=De(e.dungeon.layout.grid,s.position.x,s.position.y);e.dungeon.layout.monsters.filter(r=>r.type===G.TROLL).filter(r=>De(e.dungeon.layout.grid,r.position.x,r.position.y)===i).forEach(r=>{v(e,"logs.events.sunStone",{monster:h(r.name)}),r.health=0}),n.used=!0},theHungryTroll:(e,n)=>{Ae(e,n),Jn(e,G.TROLL),n.used=!0},timePortal:(e,n)=>{Ae(e,n),e.heroes.forEach(o=>o.actions++),n.used=!0},fountainOfYouth:(e,n)=>{Ae(e,n),J(e).forEach(o=>{if(o.health<o.maxHealth){const t=ze(o.level,3);o.health+=Math.min(t,o.maxHealth-o.health)}}),n.used=!0},sleepingGasCloud:(e,n)=>{Ae(e,n),J(e).forEach(o=>{o.actions=Math.max(1,o.actions-1)}),n.used=!0},theLostOrch:(e,n)=>{Ae(e,n),Jn(e,G.ORCH),n.used=!0},theDragonsBreath:(e,n)=>{Ae(e,n),J(e).forEach(o=>o.blinded=!0),n.used=!0},landslide:(e,n)=>{Ae(e,n);const o=e.dungeon.layout.corridors.filter(r=>!hs(e,r)).filter(r=>Xe(e.dungeon,r)),t=o.length-1,s=Math.floor(Math.random()*t),i=o[s];e.dungeon.collapsedCorridor=i,e.dungeon.layout.grid=e.dungeon.layout.grid.map(r=>r.replaceAll(i,en)),n.used=!0},foreSight:(e,n)=>{if(Ae(e,n),e.dungeon.layout.secrets.filter(t=>t.type===ne.EQUIPMENT||t.type===ne.MAGIC_ITEM).filter(t=>!t.found).filter(t=>t.item).filter(t=>{const s=De(e.dungeon.layout.grid,t.position.x,t.position.y)??"";return!Xe(e.dungeon,s)}).length>0){const t=e.dungeon.layout.secrets.pop();t&&t.item&&(v(e,"logs.events.foreSight",{x:`${t.position.x+2}`,y:`${t.position.y-1}`}),e.dungeon.layout.items.push({item:t.item,position:t.position}))}n.used=!0},earthquake:(e,n)=>{Ae(e,n);const o=tt(e),t={name:"boulder",type:X.WEAPON,value:0,dice:3,useHearHeroes:!0,twoHanded:!1,range:1,amountInDeck:0,ignoresShield:!1,ignoresArmour:!1},s={name:"Earthquake",actions:0,health:0,maxMovement:0,position:{x:0,y:0},weapon:t,level:de.APPRENTICE,maxHealth:0,movement:0,experience:0,colour:F.Red,inventory:[],defense:0};e.dungeon.layout.monsters.filter(i=>i.type===G.TROLL).filter(i=>De(e.dungeon.layout.grid,i.position.x,i.position.y)===o).forEach(i=>Je(e,s,i,!1)),J(e).filter(i=>De(e.dungeon.layout.grid,i.position.x,i.position.y)===o).forEach(i=>Je(e,s,i,!1)),n.used=!0},theMagicStorm:(e,n)=>{var t;Ae(e,n);const o=J(e).filter(s=>s.inventory.filter(i=>!i.disabled).some(i=>i.type===X.MAGIC));if(o.length>0){const s=o.length-1,i=Math.floor(Math.random()*s),r=o[i],l=r.inventory.filter(a=>a.type===X.MAGIC);if(l.length>0){const a=l.length-1,c=Math.floor(Math.random()*a),u=l[c];u.disabled=!0,!((t=u.properties)!=null&&t[An])&&u.pickup&&u.drop&&Lo[u.drop](e,u,r)}}n.used=!0},theElementalWeapon:(e,n)=>{Ae(e,n);const o=J(e),t=o.length-1,s=Math.floor(Math.random()*t),i=o[s];i.weapon.elemental=!0,n.used=!0},theOrchDrums:(e,n)=>{Ae(e,n),e.dungeon.layout.monsters.filter(o=>o.type===G.ORCH).forEach(o=>o.actions=3),n.used=!0},theSymbolOfWeakness:(e,n)=>{Ae(e,n),J(e).forEach(o=>o.weakened=!0),n.used=!0}},us=e=>{J(e).some(n=>n.weapon.elemental)&&(v(e,"logs.events.magicStormRestored"),J(e).forEach(n=>{n.inventory.forEach(o=>{var t;!((t=o.properties)!=null&&t[An])&&o.pickup&&Pn[o.pickup](e,o,n),o.disabled=!1})}))},fs=e=>{e.eventDeck.filter(o=>!o.used).length===0&&(ps(e),ds(e),us(e)),gs(e),ms(e)},ds=e=>{const n=e.dungeon.collapsedCorridor;n&&(v(e,"logs.events.landslideRestored"),e.dungeon.layout.grid=e.dungeon.layout.grid.map(o=>o.replaceAll(en,n)),e.dungeon.collapsedCorridor=void 0)},ms=e=>{J(e).some(n=>n.blinded)&&(v(e,"logs.events.blindedRestored"),J(e).forEach(n=>n.blinded=!1))},ps=e=>{J(e).some(n=>n.weapon.elemental)&&(v(e,"logs.events.elementalWeaponRestored"),J(e).forEach(n=>n.weapon.elemental=!1))},gs=e=>{J(e).some(n=>n.weakened)&&(v(e,"logs.events.weakenedRestored"),J(e).forEach(n=>n.weakened=!1))},tt=e=>{const n=e.dungeon.discoveredRooms.length-1,o=Math.floor(Math.random()*n);return e.dungeon.discoveredRooms[o]},Jn=(e,n)=>{const o=et(e).filter(l=>l.type===n);if(o.length===4)return;const s=tt(e),i=[F.Red,F.Green,F.Yellow,F.Blue];o.forEach(l=>{const a=i.indexOf(l.colour);a!==-1&&i.splice(a,1)});let r=!1;for(let l=0;l<e.dungeon.layout.grid.length;l++){const a=hn(e.dungeon.layout.grid[l]);for(let c=0;c<a.length;c++)if(a[c]===s&&!mn(e,c,l)&&!dn(e,c,l)){e.dungeon.layout.monsters.push(oe(n,i[0],c,l)),r=!0;break}if(r)break}},Ae=(e,n)=>{v(e,n.description),v(e,n.name)},Hn=e=>{let n=e.length,o;for(;n>0;)o=Math.floor(Math.random()*n),n--,[e[n],e[o]]=[e[o],e[n]];return e.forEach(t=>t.used=!1),e},hs=(e,n)=>{const o=[];return e.dungeon.layout.grid.forEach((t,s)=>{hn(t).forEach((i,r)=>{i===n&&o.push(mn(e,r,s)||dn(e,r,s))})}),o.some(t=>t)},h=(e,n)=>Ve.get(e,n)??e,_s=e=>{ae(e),localStorage.setItem("state",JSON.stringify(e)),v(e,"logs.gameSaved")},ae=e=>{e.reRender=!0,localStorage.setItem("reloadGuard",JSON.stringify(e))},st=e=>(e.currentActor=e.heroes.find(n=>{var o;return n.name===((o=e.currentActor)==null?void 0:o.name)}),v(e,"logs.gameLoaded"),ae(e),e),it=()=>{const e=structuredClone(St),n={heroes:e.heroes,dungeon:e.dungeons[1],currentActor:e.heroes[0],actionLog:[{key:"logs.playingCampaign",properties:{name:h(e.name)}},{key:"logs.gameInitialized"},{key:"logs.initLogActions"},{key:"logs.initLogMoves"},{key:"logs.initLogMoveFinished"},{key:"logs.initLogUnfair"}],itemDeck:Sn(e.itemDeck),magicItemDeck:Sn(e.magicItemDeck),settings:{cellSize:48,debug:!1},eventDeck:nt(e.dungeons[0]),reRender:!0};return En(n),localStorage.setItem("autosave",JSON.stringify(n)),n},Sn=e=>{let n=e.length,o;for(;n>0;)o=Math.floor(Math.random()*n),n--,[e[n],e[o]]=[e[o],e[n]];return e},hn=e=>{const n=[];for(let o=0;o<e.length;o++)n.push(e[o]);return n},ze=(e,n)=>{let o=[];for(let t=0;t<n;t++)o.push(Math.floor(Math.random()*6)+1);switch(e){case de.APPRENTICE:o=o.filter(t=>t===5);break;case de.KNIGHT:case de.HERO:o=o.filter(t=>t>=4);break;case de.LORD:case de.MASTER:o=o.filter(t=>t>=3);break}return o.length},We=e=>{var n;return e.maxMovement-(((n=e.armour)==null?void 0:n.movementReduction)??0)},vs=e=>e.dungeon.winConditions.filter(n=>n.type!==ie.KILL_ALL).some(n=>!n.fulfilled),wn=e=>{if(e.settings.debug&&console.log(e),ae(e),As(e),e.currentActor===void 0)return e;{v(e,"logs.endedTurn",{name:h(e.currentActor.name)});let o=J(e).indexOf(e.currentActor)+1;if(o===J(e).length&&($t(e),o=0,No(e)),J(e).length===0)return ys(e);J(e)[o].incapacitated&&(v(e,"logs.noLongerIncapacitated",{name:h(J(e)[o].name)}),J(e)[o].incapacitated=!1,o++),e.currentActor.actions=2,e.currentActor.movement=We(e.currentActor),e.currentActor=J(e)[o];const t=vs(e);if(o===0&&!t){fs(e);const s=ot(e);e.currentEvent=s,cs[s.effect](e,s)}v(e,"logs.startedTurn",{name:h(e.currentActor.name)})}return e},ys=e=>{const n=localStorage.getItem("autosave");if(n){const o=JSON.parse(n);return ae(o),Wo(o),En(o),wo(o),No(o),lt({x:o.dungeon.startingPositions[0].x,y:o.dungeon.startingPositions[0].y},o.settings.cellSize),o.currentActor=o.heroes.find(t=>{var s;return t.name===((s=o.currentActor)==null?void 0:s.name)}),v(o,"logs.allHeroesDead"),o}return v(e,"logs.failedToReset"),e},As=e=>{var n,o;e.dungeon.winConditions.forEach(t=>{var s;switch(t.type){case ie.KILL_ALL:{const i=e.dungeon.layout.monsters.map(r=>r.health).reduce((r,l)=>r+l,0);t.fulfilled=i<=0;break}case ie.REACH_CELL:{t.fulfilled=J(e).some(i=>{var r;return i.position.x===((r=t.targetCell)==null?void 0:r.x)&&i.position.y===t.targetCell.y});break}case ie.KILL_ALL_OF_TYPE:{t.fulfilled=e.dungeon.layout.monsters.filter(i=>i.type===t.targetMonsterType).some(i=>i.health>0);break}case ie.OPEN_DOOR:{t.fulfilled=((s=e.dungeon.layout.doors.find(i=>{var r,l;return i.x===((r=t.targetCell)==null?void 0:r.x)&&i.y===((l=t.targetCell)==null?void 0:l.y)}))==null?void 0:s.open)??!1;break}case ie.KILL_AT_LEAST:{t.fulfilled=(t.killMinCount?t.killMinCount:0)<=e.dungeon.killCount;break}}t.checkFulfilled&&(t.fulfilled=qt[t.checkFulfilled](e,t))}),e.dungeon.beaten=e.dungeon.winConditions.map(t=>t.fulfilled).reduce((t,s)=>t&&s,!0),e.dungeon.beaten&&(v(e,"logs.allConditionsFulfilled"),v(e,"logs.clearedDungeon",{name:h(e.dungeon.name)}),(n=e.dungeon.nextDungeon)!=null&&n.name&&v(e,"logs.moveToNext",{name:h((o=e.dungeon.nextDungeon)==null?void 0:o.name)}))},rt=e=>({health:0,position:{x:e.x,y:e.y},defense:0,experience:0,actions:0,movement:0,maxMovement:0,colour:F.Red,maxHealth:0,name:"Door",level:de.APPRENTICE,incapacitated:!1,weapon:{name:"Trap",amountInDeck:0,dice:e.trapAttacks,useHearHeroes:!0,twoHanded:!1,range:1,type:X.WEAPON,value:0,ignoresShield:!0,ignoresArmour:!1},inventory:[]}),Dn=(e,n,o)=>{var s,i;let t=!0;if(n<0||n>=e.grid[0].length||o<0||o>=e.grid.length)t=!1;else{const r=(s=e.pits)==null?void 0:s.some(c=>ye(c,{x:n,y:o})),l=(i=e.pillars)==null?void 0:i.some(c=>ye(c,{x:n,y:o})),a=De(e.grid,n,o);(r||l||a===pn||a===gn)&&(t=!1)}return t},nn=(e,n,o)=>{const t=De(e.layout.grid,n,o);return t?Xe(e,t):!1},Xe=(e,n)=>e.discoveredRooms.includes(n),De=(e,n,o)=>{let t="";return e.forEach((s,i)=>{hn(s).forEach((r,l)=>{i===o&&l===n&&(t=r)})}),t},_n=(e,n,o)=>e.x===n&&e.y===o||e.x===n-1&&e.y===o||e.x===n-1&&e.y===o-1||e.x===n&&e.y===o-1||e.x===n+1&&e.y===o-1||e.x===n+1&&e.y===o||e.x===n+1&&e.y===o+1||e.x===n&&e.y===o+1||e.x===n-1&&e.y===o+1,ks=(e,n,o,t)=>{var i;const s=((i=t.armour)==null?void 0:i.defense)??t.defense;return`${e} damage (${n}-(${s}+${o})=${e})`},ye=(e,n)=>e.x===n.x&&e.y===n.y,v=(e,n,o)=>{e.actionLog=[{key:n,properties:o},...e.actionLog],ae(e)},Je=(e,n,o,t)=>{var k,y;let s=n.weapon;t&&n.rangedWeapon&&(s=n.rangedWeapon);let i=0,r=0;s.ignoresArmour?o.armour&&v(e,"logs.takeDamage.armourUseless",{actor:h(o.name),weapon:h(s.name)}):i=((k=o.armour)==null?void 0:k.defense)??o.defense,s.ignoresShield?o.shield&&v(e,"logs.takeDamage.shieldUseless",{actor:h(o.name),weapon:h(s.name)}):r=ze(o.level,((y=o.shield)==null?void 0:y.dice)??0);const l=n.inventory.filter(m=>{var d;return(d=m==null?void 0:m.properties)==null?void 0:d[Vn]}).some(m=>{var d;return v(e,"logs.takeDamage.usedEffect",{actor:h(n.name),item:h(m.name)}),(d=m.properties)==null?void 0:d[Vn]}),a=n.inventory.filter(m=>{var d;return(d=m==null?void 0:m.properties)==null?void 0:d[Fn]}).map(m=>{var d;return v(e,"logs.takeDamage.usedEffect",{actor:h(n.name),item:h(m.name)}),(d=m.properties)==null?void 0:d[Fn]}).reduce((m,d)=>m+d,0),c=n.blinded?1:0,u=n.weakened?1:0,g=n.weapon.elemental?1:0,E=a+g,_=c+u,T=ze(n.level,s.dice+E-_);let O=Math.max(T-(i+r),0);O===0&&l&&(v(e,"logs.takeDamage.reRoll",{actor:h(n.name)}),O=Math.max(T-(i+r),0)),o.health-=O,v(e,"logs.takeDamage.attackedWith",{actor:h(n.name),target:h(o.name),weapon:h(s.name),damage:ks(O,T,r,o)}),o.health<=0&&(v(e,"logs.takeDamage.killed",{actor:h(n.name),target:h(o.name)}),o.health=0,o.level=de.APPRENTICE)},lt=(e,n)=>{const o=document.getElementById("gameBoardContainer"),t=document.getElementById("gameBoard");if(o&&t){const s=e.x*n,i=e.y*n,r=t.offsetWidth,l=t.offsetHeight;o.scrollLeft=Math.round(s/r),o.scrollTop=Math.round(i/l)}},bs=e=>{e.dungeon.beaten&&e.dungeon.nextDungeon&&(e.dungeon=e.dungeon.nextDungeon,e.actionLog=[{key:"logs.youHaveReached",properties:{name:h(e.dungeon.name)}}],e.eventDeck=nt(e.dungeon),ae(e),Gt(e),Bt(e),Wo(e),En(e),wo(e),lt({x:e.dungeon.startingPositions[0].x,y:e.dungeon.startingPositions[0].y},e.settings.cellSize),localStorage.setItem("autosave",JSON.stringify(e)))},rn=(e,n)=>Math.sqrt(Math.pow(e.x-(n==null?void 0:n.x),2)+Math.pow(e.y-(n==null?void 0:n.y),2)),Un=(e,n,o,t,s)=>{const i={x:e.x*o-Math.floor(o/2),y:e.y*o-Math.floor(o/2)},r={x:n.x*o-Math.floor(o/2),y:n.y*o-Math.floor(o/2)};return Kn(i,e,r,n,o,t,s,[])},Kn=(e,n,o,t,s,i,r,l)=>{var O,k;if(isNaN(e.x)||isNaN(e.y))return!1;const a=Es(e,o),c={x:Math.round((a.x+Math.floor(s/2))/s),y:Math.round((a.y+Math.floor(s/2))/s)};if(isNaN(c.x)||isNaN(c.y)||isNaN(a.x)||isNaN(a.y))return!1;const u=De(i.dungeon.layout.grid,c.x,c.y),g=(O=i.dungeon.layout.pits)==null?void 0:O.some(y=>ye(y,c)),E=(k=i.dungeon.layout.pillars)==null?void 0:k.some(y=>ye(y,c)),_=i.dungeon.layout.monsters.some(y=>ye(y.position,c)),T=J(i).filter(y=>!ye(y.position,n)).some(y=>ye(y.position,c));return c.x===t.x&&c.y===t.y?(l.push(c),!0):E||_||!r&&T||u===gn||u===en||r&&(g||u===pn)?!1:(c.x===n.x&&c.y===n.y||l.some(y=>y.x===c.x&&y.y===c.y)||l.push(c),Kn(a,n,o,t,s,i,r,l))},Es=(e,n)=>{const o=e.x,t=e.y,s=n.x-o,i=n.y-t,r=s/Math.pow(Math.pow(s,2)+Math.pow(i,2),1/2),l=i/Math.pow(Math.pow(s,2)+Math.pow(i,2),1/2),a=Math.round(r+o),c=Math.round(l+t);return{x:a,y:c}},at=(e,n)=>J(e).filter(o=>_n(n.position,o.position.x,o.position.y)),Ds=""+new URL("../assets/Dungeon_Tileset.e372bb4f.png",import.meta.url).href,Is="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAAgCAYAAADKbvy8AAAHzUlEQVRoge2af2gURxTHvydBhGKhObRwmJSq+0e9SDQhSU24BEEukBChEYwYgxRCTLg/KqEpEUJK00BCDKJ/HCZnaAm2NSk0lkoEzz9ET+PPREPUf+5qMSf5QzmFimhLYPvH5W1m92Z3Z3YvYsEHx+7OzuftzHv7Zt7OnAccUbw+1VgWTy14eHXNxI0OHivKu2HfBV5WTw4P/PFIDfLWrUXy2UvkrVsLANjVPq7KdMKpDsXrU3M35/HvAZa8G5b4/olJJO/dzbgX7ulacd6JHo8R5BmeZFf7uO2b5FQH+8Y1V/sBAKXr1wAAZj/9AoV/nUXL6WmtPqvDDcvqIKOFe7q4fbN7edzwTvXksGBFXRAj9xcBvFgqfYHvdn6Eby+90CkggxkbJKPDyLGRM/Hn37ojrg/jDAC2DkWUG9bYDvaN75+YRGd9rfGoPZPXf1He1BAO9GQMoSTNBTlYvf8EcLFLO792TjEqtmyQnQ6SeGrBowAqAFTUBTP4jy92IfnsJVbvP4HGrYrGuGV5krdtu9ktnZj1X5S3E1E9q3iFzQVpv/77y1daGXsuIrI6jIaw4o113bA86Z+Y5B5FxS0vo0eLwHhqwYNzURUAmgtqdHOXcR4DgNyz3XxDSugwihteluUNg+GeLoS6e8FeA0Couxfhni5dXV7/ZXizYVhWT0YERpqK8WXfeSSfvdSVs8lHc7VflxQ40WElbngRVvH6VNZAZMzczXm6xCHU3asZja1n7L8sb3y+Uz0ZMP0uHa5TLx2uUxWvT/3t8l2Vvcf+nOrg2N01L9P+4yd+0JWz12VlZWpZWVkGy9NDz5Xl2fps+2X0ELeKYMrScjfnofP6U7ScnkaouxfJe3fRPzGpZXHN1X5Emoq5BhTVYeYAp7wMG+ruRd627eisrzWN5ueJpOlzzfovyos8X0QPOVEbQus3faiDKYzpYc8TSTRX+zFy4YHpA0V1mEWRG16UDfd0ZRjvn5tn0Flfa8oC0I68/ovyZs93oodES2KoYWSI0vVr0JJI6h5AdczmPxkd2eZlWKPxqJxdBGDZ/h3r0ZJIgr4Bjf0X4XfevOkZuQDTxEWmHawNMj7E2TB9nkhqYfuc6QBFotmKhp0OXuOzwWebBSDcf1Hequ9O9KyyAiNNxToFitenRpqKpZzH0yHTeJaX7bhTlkS0/zJ8ttpB97gf8iS3nr4RKpPV4ZQXMUK2WCNvVSbDO5Fs6Xkv76BI7VG9TVmJfbm3wbrhnXAr4kDF6xPe+zLjUyp/2PB61tgmIyn1DYoqA9iQn48/fvoZuw804sn8PB7HbgslUYcOlkPxF2pl8QezGB6dEnaCE94px50DZecKIxsYiupWRmR5nvOKKgPCbFFlADNXYgCA3QcaAQAb8vNR0bjHNokyGhEAFH8hDh0sF0pCnPAinJk9uTvygaEo0Bq0/Gaxk7Er5xF+uKReUBfrvKLKAFLPFgAAhcWfY3b6Bj75bBPuXrttGuHEzlyJYfeBRsxO39DxIqL4CzEWmQMA3ElcxeBAG8Yic7iTmMoqb+yDHWdY3NZY0yw0MBQFRZJQw73Lq+ux1iDCD3MQ2rKI0JZFaV00/AHASOSUVj4SOQXF65N6qYy8iNxJXMWdxFXdtYzY8Yo3vetutIcVRysyedu2I9Tdq7FcQ2hRuCSx1qDt+B0YiiLWmt5QDQxFEdqyqKsTfphjqUfx+tSTO8qwd+qy5sAn8/MAoDu3mseoUxWNewBAmicdvOEMAL7+5qSjOdTIkwPZJTU7DoC2lMn+5SIjAim0yRkAhKKHjTQA2FdZo/vFWoOmemjo3Dt1Gb+WV+Fx7DaezM9jQ36+FonsuZmQMVjHifLs/DI8OoX4g1kAy8YzOs84H8nyvP1EO47+59NZX6vt2GcspfEiieYyswiiho9dOQ8g7byiUB8+2Lq8av9qbhoz4SMAzP9UZCwjnfsqa3TnIlEgwyve5f05duHYKMb9RNpcleF5S3EUfcOj/HmWuEhTMVpOT2vXgMkcyA6fADKGQ7OOAXznAcAHW4tRFOqz1dHR3oCqYAk62hvQ0d6A6d9HdedVwRLbTNKKtxJ6q9kto+97WwBAlw3SlpATHliOJF27/YU67tDB8gzu1tM32m5MPLXgiacWPBlZKA116SzSsr86iacWPPsqazTDvh7sAZCeiANDUbwe7MGMQDJw6/4jlBZs1K6PHhvH5eM7UHX4OjraGyxZcp4VXxUsAaK3M7LYjL/wLRmzpSuS1u0vBDBlup9nxw+PTmFwoA0A0MIMi4rXpw4OtGlDpsYtRSPLUR3T/4WSQopAY+SJDl9FoT5tuATSEc3OqXZJiIjIDMMiPDuM0bF/YhK5Z7u17TPW0LI8O+yxvFOOJGMINSYwJCLOI34mfARFoT5dUhMYiloOoWzjqoIluh9bxutEtnh2DhocaENnfa22kBxpKjZ1nghPwtvNF+HYTVxWuHMgOZHNImW+vciJr+bSb26sNaglMSJ6aAgsLdioOxcVJzzNKXRNzqLN053Hz3mMdWR4EqNjRDnevAlYfMiTYqtGWwk5kTJXEecpXp/a0d6AW/cfce+XFmy0TGKywQ8OtOnWH2n+EREr3movVeS5ZltKlvuBboV1vqzzKGKOHhvXHVeK19q89B1mdu2Gt9rXc/vc9/I/lf8AumRDnk2NWWYAAAAASUVORK5CYII=",Os=(e,n,o,t,s)=>{J(t).forEach(r=>{Rs(e,r,n,o,s)}),Ls(e,t,o),Hs(e,t,o)},Rs=(e,n,o,t,s)=>{const i=n.position.x,r=n.position.y;if(e.drawImage(o,4*16,0,16,16,i*t,r*t,t,t),Ms(e,n,i,r,t),Ts(e,n,i,r,t),Cs(e,n,i,r,t),s){const l=`(${i},${r})`;e.fillStyle="black",e.font="8px Arial",e.fillText(l,i*t+3,r*t+10)}},Ms=(e,n,o,t,s)=>{const i=e.fillStyle,r=e.strokeStyle;e.strokeStyle="#080808",e.fillStyle="darkred";for(let l=0;l<n.actions;l++)e.fillRect(o*s+4+6*l,t*s+s-12,5,5),e.rect(o*s+4+6*l,t*s+s-12,5,5),e.stroke();e.fillStyle="blue";for(let l=0;l<n.movement;l++)e.fillRect(o*s+s-22+6*l,t*s+s-12,5,5),e.rect(o*s+s-22+6*l,t*s+s-12,5,5),e.stroke();e.fillStyle=i,e.strokeStyle=r},Cs=(e,n,o,t,s)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="red",e.fillRect(o*s+4,t*s,s-8,4),e.fillStyle="green",e.fillRect(o*s+4,t*s,(s-8)*(n.health/n.maxHealth),4),e.rect(o*s+4,t*s,s-8,4),e.stroke()},Ts=(e,n,o,t,s)=>{e.beginPath(),e.strokeStyle=n.colour,e.fillStyle=n.colour,e.fillRect(o*s+4,t*s+(s-6),s-8,4),e.stroke()},Ls=(e,n,o)=>{const t=n.currentActor;if(t){for(let s=t.position.x-t.movement;s<=t.position.x+t.movement;s++)for(let i=t.position.y-t.movement;i<=t.position.y+t.movement;i++)if(nn(n.dungeon,s,i)&&!(s===(t==null?void 0:t.position.x)&&i===(t==null?void 0:t.position.y))){const l=dn(n,s,i),a=mn(n,s,i),c=Dn(n.dungeon.layout,s,i),u=Un(t.position,{x:s,y:i},2,n,!0);!a&&!l&&c&&u&&(e.fillStyle="rgba(50, 50, 255, 0.08)",e.fillRect(s*o,i*o,o,o),e.stroke())}}},Hs=(e,n,o)=>{const t=n.currentActor;t&&(e.beginPath(),e.strokeStyle="lightblue",e.lineWidth=2,e.moveTo(t.position.x*o,t.position.y*o),e.lineTo(t.position.x*o+o/3,t.position.y*o),e.moveTo(t.position.x*o,t.position.y*o),e.lineTo(t.position.x*o,t.position.y*o+o/3),e.moveTo(t.position.x*o+o,t.position.y*o),e.lineTo(t.position.x*o+o/3*2,t.position.y*o),e.moveTo(t.position.x*o+o,t.position.y*o),e.lineTo(t.position.x*o+o,t.position.y*o+o/3),e.moveTo(t.position.x*o,t.position.y*o+o),e.lineTo(t.position.x*o,t.position.y*o+o/3*2),e.moveTo(t.position.x*o,t.position.y*o+o),e.lineTo(t.position.x*o+o/3,t.position.y*o+o),e.moveTo(t.position.x*o+o,t.position.y*o+o),e.lineTo(t.position.x*o+o,t.position.y*o+o/3*2),e.moveTo(t.position.x*o+o,t.position.y*o+o),e.lineTo(t.position.x*o+o/3*2,t.position.y*o+o),e.stroke(),e.lineWidth=1)},ws=(e,n,o,t,s)=>{t.dungeon.layout.monsters.forEach(i=>{Ns(e,n,t,i,o,s)})},Ns=(e,n,o,t,s,i)=>{const r=o.dungeon.layout.grid[t.position.y][t.position.x];if(t&&t.health>0&&Xe(o.dungeon,r)){switch(t.type){case G.ORCH:Ps(e,n,s,t);break;case G.TROLL:Bs(e,n,s,t);break;default:Gs(e,n,s,t);break}Us(e,t,s),Ks(e,t,s),Fs(e,t,o.heroes,o,s,i)}},Ps=(e,n,o,t)=>{e.drawImage(n,o,16,16,16,t.position.x*o,t.position.y*o,o,o)},Bs=(e,n,o,t)=>{e.drawImage(n,o,16,16,16,t.position.x*o,t.position.y*o,o,o)},Gs=(e,n,o,t)=>{e.drawImage(n,16,16,16,16,t.position.x*o,t.position.y*o,o,o)},Us=(e,n,o)=>{e.beginPath(),e.strokeStyle=n.colour,e.fillStyle=n.colour,e.fillRect(n.position.x*o+4,n.position.y*o+(o-6),o-8,4),e.stroke(),e.strokeStyle="black",e.fillStyle="black"},Ks=(e,n,o)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="red",e.fillRect(n.position.x*o+4,n.position.y*o,o-8,4),e.fillStyle="green",e.fillRect(n.position.x*o+4,n.position.y*o,(o-8)*(n.health/n.maxHealth),4),e.rect(n.position.x*o+4,n.position.y*o,o-8,4),e.stroke(),e.strokeStyle="black",e.fillStyle="black"},Fs=(e,n,o,t,s,i)=>{i&&o.forEach(r=>{const l=[],a={x:n.position.x*48-24,y:n.position.y*48-24},c={x:r.position.x*48-24,y:r.position.y*48-24};if(Kn(a,n.position,c,r.position,48,t,!1,l)){const g=n.position.x,E=n.position.y,_=r.position.x,T=r.position.y;e.beginPath(),e.strokeStyle=n.colour,e.lineWidth=2,e.moveTo(g*s+s/2,E*s+s/2),e.lineTo(_*s+s/2,T*s+s/2),e.stroke(),e.lineWidth=1}})},Ws=(e,n,o,t,s)=>{t.dungeon.layout.doors.forEach(i=>{js(e,n,o,t,i,s)})},Vs=(e,n,o,t,s)=>{t.dungeon.layout.grid.forEach((i,r)=>{hn(i).forEach((l,a)=>{Xs(e,n,t,l,a,r,o),Zs(e,l,t,a,r,o,s)})}),qs(e,n,o,t,s),xs(e,n,o,t,s)},Ys=(e,n,o,t,s)=>{t.dungeon.layout.secrets.filter(i=>i.found).forEach(i=>{switch(i.type){case ne.TRAP_DOOR:Ss(e,n,o,i);break;default:Qs(e,n,o,i);break}}),t.dungeon.layout.secrets.filter(i=>!i.found).forEach(i=>{if(e.globalAlpha=.6,Qe(e,n,8,0,o,i.position.x,i.position.y,t),e.globalAlpha=1,s){const r=`${i.type}`;e.fillStyle="rgba(255, 50, 50, 0.28)",e.fillRect(i.position.x*o,i.position.y*o,o,o),e.fillStyle="black",e.font="12px Arial",e.fillText(r,i.position.x*o,i.position.y*o+10)}})},Qe=(e,n,o,t,s,i,r,l)=>{l.dungeon.discoveredRooms.some(a=>Qn(i,r,a,l))||Qn(i,r,en,l)?e.drawImage(n,o*48,t,48,48,i*s,r*s,s,s):ct(e,i,r,s)},qs=(e,n,o,t,s)=>{var i,r;(r=(i=t.dungeon.layout.pits)==null?void 0:i.filter(l=>nn(t.dungeon,l.x,l.y)||s))==null||r.forEach(l=>{Qe(e,n,7,0,o,l.x,l.y,t)})},xs=(e,n,o,t,s)=>{var i,r;(r=(i=t.dungeon.layout.pillars)==null?void 0:i.filter(l=>nn(t.dungeon,l.x,l.y)||s))==null||r.forEach(l=>{Qe(e,n,6,0,o,l.x,l.y,t)})},Xs=(e,n,o,t,s,i,r)=>{Js(t,o)?t===en?(Qe(e,n,0,0,r,s,i,o),Qe(e,n,5,0,r,s,i,o)):Qe(e,n,1,0,r,s,i,o):bn(t,o)?ct(e,s,i,r):Qe(e,n,0,0,r,s,i,o)},Js=(e,n)=>$s(e)||!Xe(n.dungeon,e)&&e!==pn,ct=(e,n,o,t)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="black",e.fillRect(n*t,o*t,t,t),e.stroke()},Ss=(e,n,o,t)=>{const s=t.position.x,i=t.position.y;e.drawImage(n,3*48,0,48,48,s*o,i*o,o,o)},Qs=(e,n,o,t)=>{const s=t.position.x,i=t.position.y;e.drawImage(n,4*48,0,48,48,s*o,i*o,o,o)},Zs=(e,n,o,t,s,i,r)=>{!r&&(bn(n,o)||n===gn)||(e.beginPath(),e.strokeStyle="black",e.rect(t*i,s*i,i,i),r&&(e.font="7px Arial",e.fillText(`${n}: ${t},${s}`,t*i+3,s*i+(i-3))),e.stroke())},js=(e,n,o,t,s,i)=>{const r=t.dungeon.layout.grid[s.y][s.x];if(s&&!s.hidden&&!s.open&&!bn(r,t))switch(e.fillStyle="brown",s.side){case A.RIGHT:{e.fillRect(s.x*o+(o-2),s.y*o,4,o),s.locked&&i&&(e.fillStyle="grey",e.fillRect(s.x*o+(o-4),s.y*o+(o/2-4),8,8));break}case A.LEFT:{e.fillRect(s.x*o-2,s.y*o,4,o),s.locked&&i&&(e.fillStyle="grey",e.fillRect(s.x*o-4,s.y*o+(o/2-4),8,8));break}case A.UP:{e.fillRect(s.x*o,s.y*o-2,o,4),s.locked&&i&&(e.fillStyle="grey",e.fillRect(s.x*o+(o/2-4),s.y*o-4,8,8));break}case A.DOWN:{e.fillRect(s.x*o,s.y*o+(o-2),o,4),s.locked&&i&&(e.fillStyle="grey",e.fillRect(s.x*o+(o/2-4),s.y*o+(o-4),8,8));break}}i&&!bn(r,t)&&(e.fillStyle="black",e.font="12px Arial",e.fillText(`[${s.hidden?"H":"-"}/${s.trapped?`T${s.trapAttacks}`:"-"}/${s.locked?"L":"-"}]`,s.x*o,s.y*o+10),e.fillStyle="rgba(50, 255, 255, 0.28)",e.fillRect(s.x*o,s.y*o,o,o))},$s=e=>e===gn,bn=(e,n)=>e===pn||!Xe(n.dungeon,e),Qn=(e,n,o,t)=>{if(!t)return;const s=Math.max(e-1,0),i=Math.max(n-1,0),r=Math.min(n+1,t.dungeon.layout.grid.length-1),l=Math.min(e+1,t.dungeon.layout.grid[0].length-1);for(let a=s;a<=l;a++)for(let c=i;c<=r;c++){const u=t.dungeon.layout.grid[c];if(hn(u)[a]===o)return!0}return!1},ut=(e,n,o,t)=>{const s=n.match(/.{1,30}(?:\s|$)/g),i=o.x*t,r=o.y*t+t,l=Math.max((s==null?void 0:s.length)??0,1)*(t/2.5);e.fillStyle="rgba(82,11,159,0.8)",e.beginPath(),e.roundRect(i,r,t*4,l,[0,30,30,30]),e.stroke(),e.fill(),e.font="12px Arial",e.fillStyle="wheat",s==null||s.forEach((a,c)=>{e.fillText(a,i+10,r+14*(c+1))})},zs=(e,n,o,t,s)=>{if(s&&t.dungeon.layout.notes.forEach(l=>{e.font="7px Arial",e.fillStyle="black",e.fillText("N",l.position.x*o+o/2,l.position.y*o+o/2),e.fillStyle="rgba(120, 50, 5, 0.12)",e.fillRect(l.position.x*o,l.position.y*o,o,o)}),!t.currentActor)return;const i=t.currentActor,r=t.dungeon.layout.notes.find(l=>ye(l.position,i.position));if(r&&!t.dungeon.layout.doors.some(a=>a.hidden&&ye(r.position,{x:a.x,y:a.y}))){const a=h(r.message);ut(e,a,r.position,o)}},ei=(e,n,o,t,s)=>{t.dungeon.layout.items.forEach(i=>{if(!(!nn(t.dungeon,i.position.x,i.position.y)&&!s))switch(i.item.type){case X.MAGIC:Zn(e,n,o,t,i);break;case X.WEAPON:Zn(e,n,o,t,i)}})},Zn=(e,n,o,t,s)=>{const i=s.position.x,r=s.position.y;if(e.drawImage(n,0,48,48,48,i*o,r*o,o,o),!t.currentActor)return;const l=t.currentActor;if(ye(l==null?void 0:l.position,s.position)){const a=h(s.item.name);ut(e,a,s.position,o)}};function jn(e){let n,o,t=e[2](e[0])+"",s,i;return{c(){n=H("p"),o=R("❇️ "),s=R(t),this.h()},l(r){n=w(r,"P",{class:!0});var l=N(n);o=M(l,"❇️ "),s=M(l,t),l.forEach(f),this.h()},h(){C(n,"class",i=yn(e[0].fulfilled?"fulfilled":"notFulfilled")+" svelte-1yg4fsj")},m(r,l){I(r,n,l),p(n,o),p(n,s)},p(r,l){l&1&&t!==(t=r[2](r[0])+"")&&x(s,t),l&1&&i!==(i=yn(r[0].fulfilled?"fulfilled":"notFulfilled")+" svelte-1yg4fsj")&&C(n,"class",i)},d(r){r&&f(n)}}}function ni(e){let n=e[1],o,t=jn(e);return{c(){t.c(),o=me()},l(s){t.l(s),o=me()},m(s,i){t.m(s,i),I(s,o,i)},p(s,[i]){i&2&&pe(n,n=s[1])?(t.d(1),t=jn(s),t.c(),t.m(o.parentNode,o)):t.p(s,i)},i:be,o:be,d(s){s&&f(o),t.d(s)}}}function oi(e,n,o){let t;Se(e,Ve,c=>o(4,t=c));let{condition:s}=n,{state:i}=n,r=!1;const l=c=>{let u="";switch(c.additionalDescription&&(u=` ${t(c.additionalDescription)}`),c.type){case ie.KILL_ALL:return t("content.winConditions.killAll")+u;case ie.KILL_ALL_OF_TYPE:return t("content.winConditions.killAll",{type:c.targetMonsterType})+u;case ie.KILL_AT_LEAST:return t("content.winConditions.killAtLeast",{minKills:c.killMinCount})+` (${i.dungeon.killCount}/${c.killMinCount})`+u;case ie.OPEN_DOOR:return t("content.winConditions.openDoor")+u;case ie.REACH_CELL:return t("content.winConditions.reachCell")+u}};un(()=>{a(),setInterval(a,100)});const a=()=>{i.reRender&&o(1,r=!r)};return e.$$set=c=>{"condition"in c&&o(0,s=c.condition),"state"in c&&o(3,i=c.state)},[s,r,l,i]}class ti extends we{constructor(n){super(),Ne(this,n,oi,ni,pe,{condition:0,state:3})}}function $n(e){let n,o,t,s,i,r,l=e[0].number+"",a,c,u=e[2](e[0].name)+"",g,E,_,T;function O(b,L){return b[1]?ii:si}let k=O(e),y=k(e),m=e[1]&&zn(e),d=e[1]&&eo(e);return{c(){n=H("div"),o=H("button"),y.c(),t=Z(),m&&m.c(),s=Z(),i=H("div"),r=H("span"),a=R(l),c=R(". "),g=R(u),E=Z(),d&&d.c(),this.h()},l(b){n=w(b,"DIV",{});var L=N(n);o=w(L,"BUTTON",{class:!0});var B=N(o);y.l(B),B.forEach(f),t=j(L),m&&m.l(L),L.forEach(f),s=j(b),i=w(b,"DIV",{});var se=N(i);r=w(se,"SPAN",{class:!0});var le=N(r);a=M(le,l),c=M(le,". "),g=M(le,u),le.forEach(f),E=j(se),d&&d.l(se),se.forEach(f),this.h()},h(){C(o,"class","hideEventButton svelte-4rf9ww"),C(r,"class","svelte-4rf9ww")},m(b,L){I(b,n,L),p(n,o),y.m(o,null),p(n,t),m&&m.m(n,null),I(b,s,L),I(b,i,L),p(i,r),p(r,a),p(r,c),p(r,g),p(i,E),d&&d.m(i,null),_||(T=Ie(o,"click",e[3]),_=!0)},p(b,L){k===(k=O(b))&&y?y.p(b,L):(y.d(1),y=k(b),y&&(y.c(),y.m(o,null))),b[1]?m?m.p(b,L):(m=zn(b),m.c(),m.m(n,null)):m&&(m.d(1),m=null),L&1&&l!==(l=b[0].number+"")&&x(a,l),L&5&&u!==(u=b[2](b[0].name)+"")&&x(g,u),b[1]?d?d.p(b,L):(d=eo(b),d.c(),d.m(i,null)):d&&(d.d(1),d=null)},d(b){b&&(f(n),f(s),f(i)),y.d(),m&&m.d(),d&&d.d(),_=!1,T()}}}function si(e){let n=e[2]("content.winConditions.buttonOpen")+"",o;return{c(){o=R(n)},l(t){o=M(t,n)},m(t,s){I(t,o,s)},p(t,s){s&4&&n!==(n=t[2]("content.winConditions.buttonOpen")+"")&&x(o,n)},d(t){t&&f(o)}}}function ii(e){let n=e[2]("content.winConditions.buttonClose")+"",o;return{c(){o=R(n)},l(t){o=M(t,n)},m(t,s){I(t,o,s)},p(t,s){s&4&&n!==(n=t[2]("content.winConditions.buttonClose")+"")&&x(o,n)},d(t){t&&f(o)}}}function zn(e){let n,o=e[2]("content.event.current")+"",t;return{c(){n=H("p"),t=R(o),this.h()},l(s){n=w(s,"P",{class:!0});var i=N(n);t=M(i,o),i.forEach(f),this.h()},h(){C(n,"class","svelte-4rf9ww")},m(s,i){I(s,n,i),p(n,t)},p(s,i){i&4&&o!==(o=s[2]("content.event.current")+"")&&x(t,o)},d(s){s&&f(n)}}}function eo(e){let n,o=e[2](e[0].description)+"",t;return{c(){n=H("p"),t=R(o),this.h()},l(s){n=w(s,"P",{class:!0});var i=N(n);t=M(i,o),i.forEach(f),this.h()},h(){C(n,"class","svelte-4rf9ww")},m(s,i){I(s,n,i),p(n,t)},p(s,i){i&5&&o!==(o=s[2](s[0].description)+"")&&x(t,o)},d(s){s&&f(n)}}}function ri(e){let n,o,t=e[0]&&$n(e);return{c(){n=H("div"),t&&t.c(),this.h()},l(s){n=w(s,"DIV",{class:!0});var i=N(n);t&&t.l(i),i.forEach(f),this.h()},h(){C(n,"class",o="event "+(e[1]?"eventOpen":"")+" svelte-4rf9ww")},m(s,i){I(s,n,i),t&&t.m(n,null)},p(s,[i]){s[0]?t?t.p(s,i):(t=$n(s),t.c(),t.m(n,null)):t&&(t.d(1),t=null),i&2&&o!==(o="event "+(s[1]?"eventOpen":"")+" svelte-4rf9ww")&&C(n,"class",o)},i:be,o:be,d(s){s&&f(n),t&&t.d()}}}function li(e,n,o){let t;Se(e,Ve,l=>o(2,t=l));let{event:s}=n,i=!0;const r=()=>o(1,i=!i);return e.$$set=l=>{"event"in l&&o(0,s=l.event)},[s,i,t,r]}class ai extends we{constructor(n){super(),Ne(this,n,li,ri,pe,{event:0})}}function no(e,n,o){const t=e.slice();return t[15]=n[o],t[16]=n,t[17]=o,t}function ci(e){let n=e[2]("content.winConditions.buttonOpen")+"",o;return{c(){o=R(n)},l(t){o=M(t,n)},m(t,s){I(t,o,s)},p(t,s){s&4&&n!==(n=t[2]("content.winConditions.buttonOpen")+"")&&x(o,n)},d(t){t&&f(o)}}}function ui(e){let n=e[2]("content.winConditions.buttonClose")+"",o;return{c(){o=R(n)},l(t){o=M(t,n)},m(t,s){I(t,o,s)},p(t,s){s&4&&n!==(n=t[2]("content.winConditions.buttonClose")+"")&&x(o,n)},d(t){t&&f(o)}}}function oo(e){let n,o,t=Ge(e[0].dungeon.winConditions.sort(ro)),s=[];for(let r=0;r<t.length;r+=1)s[r]=to(no(e,t,r));const i=r=>$(s[r],1,1,()=>{s[r]=null});return{c(){n=H("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){n=w(r,"DIV",{class:!0});var l=N(n);for(let a=0;a<s.length;a+=1)s[a].l(l);l.forEach(f),this.h()},h(){C(n,"class","conditionsDiv svelte-qsh3al")},m(r,l){I(r,n,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null);o=!0},p(r,l){if(l&1){t=Ge(r[0].dungeon.winConditions.sort(ro));let a;for(a=0;a<t.length;a+=1){const c=no(r,t,a);s[a]?(s[a].p(c,l),S(s[a],1)):(s[a]=to(c),s[a].c(),S(s[a],1),s[a].m(n,null))}for(Pe(),a=t.length;a<s.length;a+=1)i(a);Be()}},i(r){if(!o){for(let l=0;l<t.length;l+=1)S(s[l]);o=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(r){r&&f(n),fn(s,r)}}}function to(e){let n,o,t,s;function i(a){e[8](a,e[15],e[16],e[17])}function r(a){e[9](a)}let l={};return e[15]!==void 0&&(l.condition=e[15]),e[0]!==void 0&&(l.state=e[0]),n=new ti({props:l}),he.push(()=>ve(n,"condition",i)),he.push(()=>ve(n,"state",r)),{c(){Oe(n.$$.fragment)},l(a){Re(n.$$.fragment,a)},m(a,c){Me(n,a,c),s=!0},p(a,c){e=a;const u={};!o&&c&1&&(o=!0,u.condition=e[15],_e(()=>o=!1)),!t&&c&1&&(t=!0,u.state=e[0],_e(()=>t=!1)),n.$set(u)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){$(n.$$.fragment,a),s=!1},d(a){Ce(n,a)}}}function so(e){let n,o,t;return o=new ai({props:{event:e[0].currentEvent}}),{c(){n=H("div"),Oe(o.$$.fragment)},l(s){n=w(s,"DIV",{});var i=N(n);Re(o.$$.fragment,i),i.forEach(f)},m(s,i){I(s,n,i),Me(o,n,null),t=!0},p(s,i){const r={};i&1&&(r.event=s[0].currentEvent),o.$set(r)},i(s){t||(S(o.$$.fragment,s),t=!0)},o(s){$(o.$$.fragment,s),t=!1},d(s){s&&f(n),Ce(o)}}}function fi(e){let n,o,t,s,i,r,l,a,c,u,g,E;function _(m,d){return m[1]?ui:ci}let T=_(e),O=T(e),k=e[1]&&oo(e),y=e[0].currentEvent&&so(e);return{c(){n=H("div"),o=H("canvas"),t=Z(),s=H("div"),i=H("div"),r=H("button"),O.c(),l=Z(),k&&k.c(),c=Z(),y&&y.c(),this.h()},l(m){n=w(m,"DIV",{style:!0,class:!0,id:!0});var d=N(n);o=w(d,"CANVAS",{width:!0,height:!0,id:!0}),N(o).forEach(f),t=j(d),s=w(d,"DIV",{class:!0});var b=N(s);i=w(b,"DIV",{class:!0});var L=N(i);r=w(L,"BUTTON",{class:!0});var B=N(r);O.l(B),B.forEach(f),L.forEach(f),l=j(b),k&&k.l(b),b.forEach(f),c=j(d),y&&y.l(d),d.forEach(f),this.h()},h(){C(o,"width",e[3]*40),C(o,"height",e[3]*30),C(o,"id","gameBoard"),C(r,"class","hideConditionsButton svelte-qsh3al"),C(i,"class","buttonDiv svelte-qsh3al"),C(s,"class",a="winConditions "+(e[1]?"":"conditionsHidden")+" svelte-qsh3al"),C(n,"style",e[5]()),C(n,"class","dungeon svelte-qsh3al"),C(n,"id","gameBoardContainer")},m(m,d){I(m,n,d),p(n,o),p(n,t),p(n,s),p(s,i),p(i,r),O.m(r,null),p(s,l),k&&k.m(s,null),p(n,c),y&&y.m(n,null),u=!0,g||(E=[Ie(o,"click",e[4]),Ie(r,"click",e[7])],g=!0)},p(m,[d]){T===(T=_(m))&&O?O.p(m,d):(O.d(1),O=T(m),O&&(O.c(),O.m(r,null))),m[1]?k?(k.p(m,d),d&2&&S(k,1)):(k=oo(m),k.c(),S(k,1),k.m(s,null)):k&&(Pe(),$(k,1,1,()=>{k=null}),Be()),(!u||d&2&&a!==(a="winConditions "+(m[1]?"":"conditionsHidden")+" svelte-qsh3al"))&&C(s,"class",a),m[0].currentEvent?y?(y.p(m,d),d&1&&S(y,1)):(y=so(m),y.c(),S(y,1),y.m(n,null)):y&&(Pe(),$(y,1,1,()=>{y=null}),Be())},i(m){u||(S(k),S(y),u=!0)},o(m){$(k),$(y),u=!1},d(m){m&&f(n),O.d(),k&&k.d(),y&&y.d(),g=!1,Nn(E)}}}const io=10,ro=(e,n)=>e.fulfilled===n.fulfilled?0:e.fulfilled?1:-1;function di(e,n,o){var m;let t;Se(e,Ve,d=>o(2,t=d));let{state:s}=n,{debugMode:i}=n,r=!0,l,a;const c=(s==null?void 0:s.settings.cellSize)??48;let u=0,g=0;a=window.innerHeight,l=((m=document.getElementById("footer"))==null?void 0:m.offsetHeight)??0,un(()=>{const d=new Image;d.src=Ds;const b=new Image;b.src=Is,setInterval(()=>E(d,b),10)});const E=(d,b)=>{if(!s||!document)return;const L=document.getElementById("gameBoard"),B=L.getContext("2d");s.reRender&&(g++,u++,B.clearRect(0,0,L.width,L.height),B.fillStyle="black",B.fillRect(0,0,L.width,L.height),Vs(B,d,c,s,i),Ys(B,d,c,s,i),ei(B,d,c,s,i),Ws(B,d,c,s,i),ws(B,b,c,s,i),Os(B,b,c,s,i),zs(B,b,c,s,i),i&&(B.fillStyle="white",B.font="8px Arial",B.fillText(`Re-renders: ${u}`,2,10),B.fillText(`FPS: ${g/(io/1e3)}`,2,20)),setTimeout(()=>{o(0,s.reRender=!1,s),g=0},io))},_=d=>{jt(d,c,s)},T=()=>`max-height: ${a-l-20}px; max-width: ${c*40}`,O=()=>o(1,r=!r);function k(d,b,L,B){L[B]=d,o(0,s)}function y(d){s=d,o(0,s)}return e.$$set=d=>{"state"in d&&o(0,s=d.state),"debugMode"in d&&o(6,i=d.debugMode)},[s,r,t,c,_,T,i,O,k,y]}class mi extends we{constructor(n){super(),Ne(this,n,di,fi,pe,{state:0,debugMode:6})}}function pi(e){let n,o=e[2]("content.inventory.uses")+"",t;return{c(){n=H("button"),t=R(o),this.h()},l(s){n=w(s,"BUTTON",{class:!0});var i=N(n);t=M(i,o),i.forEach(f),this.h()},h(){n.disabled=!0,C(n,"class","svelte-gca2x5")},m(s,i){I(s,n,i),p(n,t)},p(s,i){i&4&&o!==(o=s[2]("content.inventory.uses")+"")&&x(t,o)},d(s){s&&f(n)}}}function gi(e){let n,o=e[2]("content.inventory.use")+"",t,s,i;return{c(){n=H("button"),t=R(o),this.h()},l(r){n=w(r,"BUTTON",{class:!0});var l=N(n);t=M(l,o),l.forEach(f),this.h()},h(){C(n,"class","svelte-gca2x5")},m(r,l){I(r,n,l),p(n,t),s||(i=Ie(n,"click",e[3]),s=!0)},p(r,l){l&4&&o!==(o=r[2]("content.inventory.use")+"")&&x(t,o)},d(r){r&&f(n),s=!1,i()}}}function hi(e){var y;let n,o="",t,s,i,r=e[2](e[0].name)+"",l,a,c,u=e[2]((y=e[0].properties)==null?void 0:y[Yn])+"",g,E,_;function T(m,d){var b,L,B;if((b=m[0].properties)!=null&&b[An]&&!((L=m[0].properties)!=null&&L[Fe]))return gi;if((B=m[0].properties)!=null&&B[An])return pi}let O=T(e),k=O&&O(e);return{c(){n=H("div"),n.innerHTML=o,t=Z(),s=H("div"),i=H("b"),l=R(r),a=Z(),c=H("span"),g=R(u),E=Z(),_=H("div"),k&&k.c(),this.h()},l(m){n=w(m,"DIV",{class:!0,"data-svelte-h":!0}),Oo(n)!=="svelte-pn8o3r"&&(n.innerHTML=o),t=j(m),s=w(m,"DIV",{class:!0});var d=N(s);i=w(d,"B",{class:!0});var b=N(i);l=M(b,r),b.forEach(f),a=j(d),c=w(d,"SPAN",{class:!0});var L=N(c);g=M(L,u),L.forEach(f),d.forEach(f),E=j(m),_=w(m,"DIV",{class:!0});var B=N(_);k&&k.l(B),B.forEach(f),this.h()},h(){C(n,"class","item item-icon svelte-gca2x5"),C(i,"class","svelte-gca2x5"),C(c,"class","svelte-gca2x5"),C(s,"class","item item-description bottom-border svelte-gca2x5"),C(_,"class","item item-action svelte-gca2x5")},m(m,d){I(m,n,d),I(m,t,d),I(m,s,d),p(s,i),p(i,l),p(s,a),p(s,c),p(c,g),I(m,E,d),I(m,_,d),k&&k.m(_,null)},p(m,[d]){var b;d&5&&r!==(r=m[2](m[0].name)+"")&&x(l,r),d&5&&u!==(u=m[2]((b=m[0].properties)==null?void 0:b[Yn])+"")&&x(g,u),O===(O=T(m))&&k?k.p(m,d):(k&&k.d(1),k=O&&O(m),k&&(k.c(),k.m(_,null)))},i:be,o:be,d(m){m&&(f(n),f(t),f(s),f(E),f(_)),k&&k.d()}}}function _i(e,n,o){let t;Se(e,Ve,l=>o(2,t=l));let{item:s}=n,{state:i}=n;const r=()=>At(i,s);return e.$$set=l=>{"item"in l&&o(0,s=l.item),"state"in l&&o(1,i=l.state)},[s,i,t,r]}class vi extends we{constructor(n){super(),Ne(this,n,_i,hi,pe,{item:0,state:1})}}function lo(e,n,o){const t=e.slice();return t[6]=n[o],t[7]=n,t[8]=o,t}function ao(e){let n,o,t;function s(r){e[4](r,e[6],e[7],e[8])}let i={state:e[1]};return e[6]!==void 0&&(i.item=e[6]),n=new vi({props:i}),he.push(()=>ve(n,"item",s)),{c(){Oe(n.$$.fragment)},l(r){Re(n.$$.fragment,r)},m(r,l){Me(n,r,l),t=!0},p(r,l){e=r;const a={};l&2&&(a.state=e[1]),!o&&l&1&&(o=!0,a.item=e[6],_e(()=>o=!1)),n.$set(a)},i(r){t||(S(n.$$.fragment,r),t=!0)},o(r){$(n.$$.fragment,r),t=!1},d(r){Ce(n,r)}}}function co(e){let n,o,t=Ge(e[0]),s=[];for(let r=0;r<t.length;r+=1)s[r]=ao(lo(e,t,r));const i=r=>$(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();n=me()},l(r){for(let l=0;l<s.length;l+=1)s[l].l(r);n=me()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);I(r,n,l),o=!0},p(r,l){if(l&3){t=Ge(r[0]);let a;for(a=0;a<t.length;a+=1){const c=lo(r,t,a);s[a]?(s[a].p(c,l),S(s[a],1)):(s[a]=ao(c),s[a].c(),S(s[a],1),s[a].m(n.parentNode,n))}for(Pe(),a=t.length;a<s.length;a+=1)i(a);Be()}},i(r){if(!o){for(let l=0;l<t.length;l+=1)S(s[l]);o=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(r){r&&f(n),fn(s,r)}}}function yi(e){var c;let n,o=e[3]("content.inventory.label",{hero:e[3]((c=e[1].currentActor)==null?void 0:c.name)})+"",t,s,i,r=e[2],l,a=co(e);return{c(){n=H("h4"),t=R(o),s=Z(),i=H("div"),a.c(),this.h()},l(u){n=w(u,"H4",{class:!0});var g=N(n);t=M(g,o),g.forEach(f),s=j(u),i=w(u,"DIV",{class:!0});var E=N(i);a.l(E),E.forEach(f),this.h()},h(){C(n,"class","svelte-1sdwrze"),C(i,"class","inventory svelte-1sdwrze")},m(u,g){I(u,n,g),p(n,t),I(u,s,g),I(u,i,g),a.m(i,null),l=!0},p(u,[g]){var E;(!l||g&10)&&o!==(o=u[3]("content.inventory.label",{hero:u[3]((E=u[1].currentActor)==null?void 0:E.name)})+"")&&x(t,o),g&4&&pe(r,r=u[2])?(Pe(),$(a,1,1,be),Be(),a=co(u),a.c(),S(a,1),a.m(i,null)):a.p(u,g)},i(u){l||(S(a),l=!0)},o(u){$(a),l=!1},d(u){u&&(f(n),f(s),f(i)),a.d(u)}}}function Ai(e,n,o){let t;Se(e,Ve,c=>o(3,t=c));let{inventory:s}=n,{state:i}=n,r=!1;un(()=>{l(),setInterval(l,100)});const l=()=>{o(2,r=!r)};function a(c,u,g,E){g[E]=c,o(0,s)}return e.$$set=c=>{"inventory"in c&&o(0,s=c.inventory),"state"in c&&o(1,i=c.state)},[s,i,r,t,a]}class ki extends we{constructor(n){super(),Ne(this,n,Ai,yi,pe,{inventory:0,state:1})}}function uo(e){let n;return{c(){n=R("*")},l(o){n=M(o,"*")},m(o,t){I(o,n,t)},d(o){o&&f(n)}}}function bi(e){let n;return{c(){n=R("☑")},l(o){n=M(o,"☑")},m(o,t){I(o,n,t)},d(o){o&&f(n)}}}function Ei(e){let n;return{c(){n=R("⛶")},l(o){n=M(o,"⛶")},m(o,t){I(o,n,t)},d(o){o&&f(n)}}}function fo(e){let n,o,t,s,i;function r(a){e[8](a)}let l={state:e[1]};return e[0].inventory!==void 0&&(l.inventory=e[0].inventory),o=new ki({props:l}),he.push(()=>ve(o,"inventory",r)),{c(){n=H("div"),Oe(o.$$.fragment),this.h()},l(a){n=w(a,"DIV",{class:!0,id:!0,style:!0});var c=N(n);Re(o.$$.fragment,c),c.forEach(f),this.h()},h(){C(n,"class","hero-inventory svelte-11gs3s7"),C(n,"id",s=e[0].name+"s-inventory"),ln(n,"display",e[2])},m(a,c){I(a,n,c),Me(o,n,null),i=!0},p(a,c){const u={};c&2&&(u.state=a[1]),!t&&c&1&&(t=!0,u.inventory=a[0].inventory,_e(()=>t=!1)),o.$set(u),(!i||c&1&&s!==(s=a[0].name+"s-inventory"))&&C(n,"id",s),(!i||c&4)&&ln(n,"display",a[2])},i(a){i||(S(o.$$.fragment,a),i=!0)},o(a){$(o.$$.fragment,a),i=!1},d(a){a&&f(n),Ce(o)}}}function mo(e){let n,o=e[3]("content.hero.actions")+"",t,s,i=e[0].actions+"",r,l,a,c=e[3]("content.hero.moves")+"",u,g,E=e[0].movement+"",_,T,O,k=e[3]("content.hero.equipment")+"",y,m,d,b,L,B,se=e[3](e[0].weapon.name)+"",le,P,z=e[0].weapon.dice+"",ce,ue,ge,re,V,Te,te,Ye;function Ee(Y,Q){return Y[0].armour?Ii:Di}let ee=Ee(e),D=ee(e);function U(Y,Q){return Y[0].shield?Ri:Oi}let K=U(e),W=K(e);return{c(){n=H("span"),t=R(o),s=R(": "),r=R(i),l=Z(),a=H("span"),u=R(c),g=R(": "),_=R(E),T=Z(),O=H("span"),y=R(k),m=R(":"),d=Z(),b=H("div"),L=H("span"),B=R("🗡️ "),le=R(se),P=R(" ("),ce=R(z),ue=R(")"),ge=Z(),re=H("span"),V=R(`🧱
        `),D.c(),Te=Z(),te=H("span"),Ye=R(`🛡️
        `),W.c(),this.h()},l(Y){n=w(Y,"SPAN",{class:!0});var Q=N(n);t=M(Q,o),s=M(Q,": "),r=M(Q,i),Q.forEach(f),l=j(Y),a=w(Y,"SPAN",{class:!0});var Ue=N(a);u=M(Ue,c),g=M(Ue,": "),_=M(Ue,E),Ue.forEach(f),T=j(Y),O=w(Y,"SPAN",{class:!0});var Ze=N(O);y=M(Ze,k),m=M(Ze,":"),Ze.forEach(f),d=j(Y),b=w(Y,"DIV",{class:!0});var Ke=N(b);L=w(Ke,"SPAN",{class:!0});var Le=N(L);B=M(Le,"🗡️ "),le=M(Le,se),P=M(Le," ("),ce=M(Le,z),ue=M(Le,")"),Le.forEach(f),ge=j(Ke),re=w(Ke,"SPAN",{class:!0});var qe=N(re);V=M(qe,`🧱
        `),D.l(qe),qe.forEach(f),Te=j(Ke),te=w(Ke,"SPAN",{class:!0});var In=N(te);Ye=M(In,`🛡️
        `),W.l(In),In.forEach(f),Ke.forEach(f),this.h()},h(){C(n,"class","svelte-11gs3s7"),C(a,"class","svelte-11gs3s7"),C(O,"class","svelte-11gs3s7"),C(L,"class","svelte-11gs3s7"),C(re,"class","svelte-11gs3s7"),C(te,"class","svelte-11gs3s7"),C(b,"class","equipment svelte-11gs3s7")},m(Y,Q){I(Y,n,Q),p(n,t),p(n,s),p(n,r),I(Y,l,Q),I(Y,a,Q),p(a,u),p(a,g),p(a,_),I(Y,T,Q),I(Y,O,Q),p(O,y),p(O,m),I(Y,d,Q),I(Y,b,Q),p(b,L),p(L,B),p(L,le),p(L,P),p(L,ce),p(L,ue),p(b,ge),p(b,re),p(re,V),D.m(re,null),p(b,Te),p(b,te),p(te,Ye),W.m(te,null)},p(Y,Q){Q&8&&o!==(o=Y[3]("content.hero.actions")+"")&&x(t,o),Q&1&&i!==(i=Y[0].actions+"")&&x(r,i),Q&8&&c!==(c=Y[3]("content.hero.moves")+"")&&x(u,c),Q&1&&E!==(E=Y[0].movement+"")&&x(_,E),Q&8&&k!==(k=Y[3]("content.hero.equipment")+"")&&x(y,k),Q&9&&se!==(se=Y[3](Y[0].weapon.name)+"")&&x(le,se),Q&1&&z!==(z=Y[0].weapon.dice+"")&&x(ce,z),ee===(ee=Ee(Y))&&D?D.p(Y,Q):(D.d(1),D=ee(Y),D&&(D.c(),D.m(re,null))),K===(K=U(Y))&&W?W.p(Y,Q):(W.d(1),W=K(Y),W&&(W.c(),W.m(te,null)))},d(Y){Y&&(f(n),f(l),f(a),f(T),f(O),f(d),f(b)),D.d(),W.d()}}}function Di(e){let n=e[3]("content.hero.none")+"",o,t;return{c(){o=R(n),t=R(" (0)")},l(s){o=M(s,n),t=M(s," (0)")},m(s,i){I(s,o,i),I(s,t,i)},p(s,i){i&8&&n!==(n=s[3]("content.hero.none")+"")&&x(o,n)},d(s){s&&(f(o),f(t))}}}function Ii(e){let n=e[3](e[0].armour.name)+"",o,t,s=e[0].armour.defense+"",i,r;return{c(){o=R(n),t=R(" ("),i=R(s),r=R(")")},l(l){o=M(l,n),t=M(l," ("),i=M(l,s),r=M(l,")")},m(l,a){I(l,o,a),I(l,t,a),I(l,i,a),I(l,r,a)},p(l,a){a&9&&n!==(n=l[3](l[0].armour.name)+"")&&x(o,n),a&1&&s!==(s=l[0].armour.defense+"")&&x(i,s)},d(l){l&&(f(o),f(t),f(i),f(r))}}}function Oi(e){let n=e[3]("content.hero.none")+"",o,t;return{c(){o=R(n),t=R(" (0)")},l(s){o=M(s,n),t=M(s," (0)")},m(s,i){I(s,o,i),I(s,t,i)},p(s,i){i&8&&n!==(n=s[3]("content.hero.none")+"")&&x(o,n)},d(s){s&&(f(o),f(t))}}}function Ri(e){let n=e[3](e[0].shield.name)+"",o,t,s=e[0].shield.dice+"",i,r;return{c(){o=R(n),t=R(" ("),i=R(s),r=R(")")},l(l){o=M(l,n),t=M(l," ("),i=M(l,s),r=M(l,")")},m(l,a){I(l,o,a),I(l,t,a),I(l,i,a),I(l,r,a)},p(l,a){a&9&&n!==(n=l[3](l[0].shield.name)+"")&&x(o,n),a&1&&s!==(s=l[0].shield.dice+"")&&x(i,s)},d(l){l&&(f(o),f(t),f(i),f(r))}}}function po(e){let n,o,t,s=e[3](e[0].name)+"",i,r,l=e[3]("content.level."+e[0].level)+"",a,c,u=e[0].experience+"",g,E,_,T,O,k,y,m="🎒",d,b,L,B,se,le=e[3]("content.hero.hp")+"",P,z,ce=e[0].health+"",ue,ge,re,V,Te,te=e[1].targetActor===e[0]&&uo();function Ye(K,W){return K[1].targetActor!==K[0]?Ei:bi}let Ee=Ye(e),ee=Ee(e),D=e[1].currentActor===e[0]&&fo(e),U=e[1].currentActor===e[0]&&mo(e);return{c(){n=H("div"),o=H("div"),t=H("b"),te&&te.c(),i=R(s),r=R(` -
    `),a=R(l),c=R(" ("),g=R(u),E=R(")"),_=Z(),T=H("div"),O=H("button"),ee.c(),k=Z(),y=H("button"),y.textContent=m,d=Z(),b=H("div"),D&&D.c(),L=Z(),B=H("div"),se=H("span"),P=R(le),z=R(": "),ue=R(ce),ge=Z(),U&&U.c(),this.h()},l(K){n=w(K,"DIV",{class:!0,style:!0});var W=N(n);o=w(W,"DIV",{class:!0});var Y=N(o);t=w(Y,"B",{class:!0});var Q=N(t);te&&te.l(Q),i=M(Q,s),r=M(Q,` -
    `),a=M(Q,l),c=M(Q," ("),g=M(Q,u),E=M(Q,")"),Q.forEach(f),Y.forEach(f),_=j(W),T=w(W,"DIV",{});var Ue=N(T);O=w(Ue,"BUTTON",{title:!0});var Ze=N(O);ee.l(Ze),Ze.forEach(f),k=j(Ue),y=w(Ue,"BUTTON",{title:!0,"data-svelte-h":!0}),Oo(y)!=="svelte-qrm7uk"&&(y.textContent=m),Ue.forEach(f),d=j(W),b=w(W,"DIV",{class:!0});var Ke=N(b);D&&D.l(Ke),Ke.forEach(f),L=j(W),B=w(W,"DIV",{});var Le=N(B);se=w(Le,"SPAN",{class:!0});var qe=N(se);P=M(qe,le),z=M(qe,": "),ue=M(qe,ce),qe.forEach(f),ge=j(Le),U&&U.l(Le),Le.forEach(f),W.forEach(f),this.h()},h(){C(t,"class","svelte-11gs3s7"),C(o,"class","hero-title svelte-11gs3s7"),C(O,"title","select target hero"),C(y,"title","Open inventory"),C(b,"class","hero-information svelte-11gs3s7"),C(se,"class","svelte-11gs3s7"),C(n,"class","hero-card svelte-11gs3s7"),ln(n,"background-color",e[0].colour)},m(K,W){I(K,n,W),p(n,o),p(o,t),te&&te.m(t,null),p(t,i),p(t,r),p(t,a),p(t,c),p(t,g),p(t,E),p(n,_),p(n,T),p(T,O),ee.m(O,null),p(T,k),p(T,y),p(n,d),p(n,b),D&&D.m(b,null),p(n,L),p(n,B),p(B,se),p(se,P),p(se,z),p(se,ue),p(B,ge),U&&U.m(B,null),re=!0,V||(Te=[Ie(O,"click",e[6]),Ie(y,"click",e[7])],V=!0)},p(K,W){K[1].targetActor===K[0]?te||(te=uo(),te.c(),te.m(t,i)):te&&(te.d(1),te=null),(!re||W&9)&&s!==(s=K[3](K[0].name)+"")&&x(i,s),(!re||W&9)&&l!==(l=K[3]("content.level."+K[0].level)+"")&&x(a,l),(!re||W&1)&&u!==(u=K[0].experience+"")&&x(g,u),Ee!==(Ee=Ye(K))&&(ee.d(1),ee=Ee(K),ee&&(ee.c(),ee.m(O,null))),K[1].currentActor===K[0]?D?(D.p(K,W),W&3&&S(D,1)):(D=fo(K),D.c(),S(D,1),D.m(b,null)):D&&(Pe(),$(D,1,1,()=>{D=null}),Be()),(!re||W&8)&&le!==(le=K[3]("content.hero.hp")+"")&&x(P,le),(!re||W&1)&&ce!==(ce=K[0].health+"")&&x(ue,ce),K[1].currentActor===K[0]?U?U.p(K,W):(U=mo(K),U.c(),U.m(B,null)):U&&(U.d(1),U=null),(!re||W&1)&&ln(n,"background-color",K[0].colour)},i(K){re||(S(D),re=!0)},o(K){$(D),re=!1},d(K){K&&f(n),te&&te.d(),ee.d(),D&&D.d(),U&&U.d(),V=!1,Nn(Te)}}}function Mi(e){let n=e[1].targetActor,o,t,s=po(e);return{c(){s.c(),o=me()},l(i){s.l(i),o=me()},m(i,r){s.m(i,r),I(i,o,r),t=!0},p(i,[r]){r&2&&pe(n,n=i[1].targetActor)?(Pe(),$(s,1,1,be),Be(),s=po(i),s.c(),S(s,1),s.m(o.parentNode,o)):s.p(i,r)},i(i){t||(S(s),t=!0)},o(i){$(s),t=!1},d(i){i&&f(o),s.d(i)}}}function Ci(e,n,o){let t;Se(e,Ve,_=>o(3,t=_));let{hero:s}=n,{state:i}=n,r="none";const l=_=>{i.targetActor&&_===i.targetActor?o(1,i.targetActor=void 0,i):o(1,i.targetActor=_,i)},a=_=>{const T=document.getElementById(_.name+"s-inventory");T&&(_.isInventoryOpen=!_.isInventoryOpen,c(),T.style.display=r)},c=()=>{s.isInventoryOpen?o(2,r="inline-block"):o(2,r="none")};c();const u=()=>l(s),g=()=>a(s);function E(_){e.$$.not_equal(s.inventory,_)&&(s.inventory=_,o(0,s))}return e.$$set=_=>{"hero"in _&&o(0,s=_.hero),"state"in _&&o(1,i=_.state)},[s,i,r,t,l,a,u,g,E]}class ft extends we{constructor(n){super(),Ne(this,n,Ci,Mi,pe,{hero:0,state:1})}}function go(e,n,o){const t=e.slice();return t[3]=n[o],t[5]=o,t}function Ti(e){let n,o,t,s;return o=new ft({props:{hero:e[3],state:e[0]}}),{c(){n=H("div"),Oe(o.$$.fragment),t=Z(),this.h()},l(i){n=w(i,"DIV",{class:!0});var r=N(n);Re(o.$$.fragment,r),t=j(r),r.forEach(f),this.h()},h(){C(n,"class","not-current-actor svelte-gyascg")},m(i,r){I(i,n,r),Me(o,n,null),p(n,t),s=!0},p(i,r){const l={};r&1&&(l.hero=i[3]),r&1&&(l.state=i[0]),o.$set(l)},i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){$(o.$$.fragment,i),s=!1},d(i){i&&f(n),Ce(o)}}}function Li(e){let n,o,t,s;return o=new ft({props:{hero:e[3],state:e[0]}}),{c(){n=H("div"),Oe(o.$$.fragment),t=Z(),this.h()},l(i){n=w(i,"DIV",{class:!0});var r=N(n);Re(o.$$.fragment,r),t=j(r),r.forEach(f),this.h()},h(){C(n,"class","is-current-actor svelte-gyascg")},m(i,r){I(i,n,r),Me(o,n,null),p(n,t),s=!0},p(i,r){const l={};r&1&&(l.hero=i[3]),r&1&&(l.state=i[0]),o.$set(l)},i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){$(o.$$.fragment,i),s=!1},d(i){i&&f(n),Ce(o)}}}function ho(e){let n,o,t,s;const i=[Li,Ti],r=[];function l(a,c){return a[3]===a[0].currentActor?0:1}return n=l(e),o=r[n]=i[n](e),{c(){o.c(),t=me()},l(a){o.l(a),t=me()},m(a,c){r[n].m(a,c),I(a,t,c),s=!0},p(a,c){let u=n;n=l(a),n===u?r[n].p(a,c):(Pe(),$(r[u],1,1,()=>{r[u]=null}),Be(),o=r[n],o?o.p(a,c):(o=r[n]=i[n](a),o.c()),S(o,1),o.m(t.parentNode,t))},i(a){s||(S(o),s=!0)},o(a){$(o),s=!1},d(a){a&&f(t),r[n].d(a)}}}function _o(e){let n=e[1],o,t,s=ho(e);return{c(){s.c(),o=me()},l(i){s.l(i),o=me()},m(i,r){s.m(i,r),I(i,o,r),t=!0},p(i,r){r&2&&pe(n,n=i[1])?(Pe(),$(s,1,1,be),Be(),s=ho(i),s.c(),S(s,1),s.m(o.parentNode,o)):s.p(i,r)},i(i){t||(S(s),t=!0)},o(i){$(s),t=!1},d(i){i&&f(o),s.d(i)}}}function Hi(e){let n,o,t=Ge(J(e[0])),s=[];for(let r=0;r<t.length;r+=1)s[r]=_o(go(e,t,r));const i=r=>$(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();n=me()},l(r){for(let l=0;l<s.length;l+=1)s[l].l(r);n=me()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);I(r,n,l),o=!0},p(r,[l]){if(l&3){t=Ge(J(r[0]));let a;for(a=0;a<t.length;a+=1){const c=go(r,t,a);s[a]?(s[a].p(c,l),S(s[a],1)):(s[a]=_o(c),s[a].c(),S(s[a],1),s[a].m(n.parentNode,n))}for(Pe(),a=t.length;a<s.length;a+=1)i(a);Be()}},i(r){if(!o){for(let l=0;l<t.length;l+=1)S(s[l]);o=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)$(s[l]);o=!1},d(r){r&&f(n),fn(s,r)}}}function wi(e,n,o){let{state:t}=n,s=!1;un(()=>{i(),setInterval(i,100)});const i=()=>{t.reRender&&o(1,s=!s)};return e.$$set=r=>{"state"in r&&o(0,t=r.state)},[t,s]}class Ni extends we{constructor(n){super(),Ne(this,n,wi,Hi,pe,{state:0})}}function vo(e,n,o){const t=e.slice();return t[5]=n[o],t[7]=o,t}function Pi(e){let n,o,t=e[2](e[5])+"",s;return{c(){n=H("p"),o=R(">"),s=R(t),this.h()},l(i){n=w(i,"P",{class:!0});var r=N(n);o=M(r,">"),s=M(r,t),r.forEach(f),this.h()},h(){C(n,"class","svelte-grgnnk")},m(i,r){I(i,n,r),p(n,o),p(n,s)},p(i,r){r&1&&t!==(t=i[2](i[5])+"")&&x(s,t)},d(i){i&&f(n)}}}function yo(e){let n,o=e[7]<25&&Pi(e);return{c(){o&&o.c(),n=me()},l(t){o&&o.l(t),n=me()},m(t,s){o&&o.m(t,s),I(t,n,s)},p(t,s){t[7]<25&&o.p(t,s)},d(t){t&&f(n),o&&o.d(t)}}}function Ao(e){let n,o=Ge(e[0].actionLog),t=[];for(let s=0;s<o.length;s+=1)t[s]=yo(vo(e,o,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();n=me()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);n=me()},m(s,i){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,i);I(s,n,i)},p(s,i){if(i&5){o=Ge(s[0].actionLog);let r;for(r=0;r<o.length;r+=1){const l=vo(s,o,r);t[r]?t[r].p(l,i):(t[r]=yo(l),t[r].c(),t[r].m(n.parentNode,n))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(s){s&&f(n),fn(t,s)}}}function Bi(e){let n,o=e[1],t=Ao(e);return{c(){n=H("div"),t.c(),this.h()},l(s){n=w(s,"DIV",{class:!0});var i=N(n);t.l(i),i.forEach(f),this.h()},h(){C(n,"class","log svelte-grgnnk")},m(s,i){I(s,n,i),t.m(n,null)},p(s,[i]){i&2&&pe(o,o=s[1])?(t.d(1),t=Ao(s),t.c(),t.m(n,null)):t.p(s,i)},i:be,o:be,d(s){s&&f(n),t.d(s)}}}function Gi(e,n,o){let t;Se(e,Ve,a=>o(3,t=a));let{state:s}=n,i=!1;un(()=>{r(),setInterval(r,500)});const r=()=>{s.reRender&&o(1,i=!i)},l=a=>t(a.key,a.properties);return e.$$set=a=>{"state"in a&&o(0,s=a.state)},[s,i,l]}class Ui extends we{constructor(n){super(),Ne(this,n,Gi,Bi,pe,{state:0})}}const Ki={name:"campaign.iceDragon.testingGrounds.name",beaten:!0,winConditions:[{type:ie.KILL_ALL,fulfilled:!0},{type:ie.OPEN_DOOR,targetCell:{x:2,y:10},fulfilled:!1},{type:ie.KILL_ALL_OF_TYPE,targetMonsterType:G.ORCH,fulfilled:!1},{type:ie.REACH_CELL,targetCell:{x:2,y:10},fulfilled:!1},{type:ie.KILL_AT_LEAST,killMinCount:5,fulfilled:!1}],nextDungeon:zo,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A","D"],layout:{grid:["###########","#CCCCCCCCC#","#CCCCCCCCC#","#CCCCCCCCC#","#######E###","  #####E#  ","  #FFFFE## ","###F###AA# ","#AAAAAAAA#D","#AAAAAAAA#D","#AAAAAAAA#D","##G####### "," #G#       "," #G#       "," ###       "],pillars:[{x:8,y:3},{x:7,y:9}],pits:[{x:6,y:3},{x:6,y:2}],corridors:["G","E","F"],doors:[Ln(A.UP,3,8,1),$e(A.LEFT,7,6),Jo(A.UP,7,7,1),q(A.UP,7,4),He(A.DOWN,2,10)],monsters:[oe(G.ORCH,F.Green,1,1),oe(G.ORCH,F.Red,4,9),oe(G.TROLL,F.Green,5,1)],secrets:[fe(ne.TRAP_DOOR,"campaign.iceDragon.testingGrounds.secrets.trapDoor",3,9),fe(ne.EQUIPMENT,"campaign.iceDragon.randomEquipment",1,10),cn(ne.EQUIPMENT,5,10,an[2])],notes:[{position:{x:2,y:10},message:`Some note
to test rendering
 on game board. 
The note is pretty long, so we g
et several lines of text. I wonder how it handles a linebreak?
Like this apparently.`}],items:[{item:ke[0],position:{x:3,y:10}},{item:ke[1],position:{x:4,y:10}},{item:ke[6],position:{x:5,y:10}},{item:ke[2],position:{x:6,y:10}},{item:ke[3],position:{x:7,y:10}},{item:ke[4],position:{x:8,y:10}}]},killCount:0};function ko(e,n,o){const t=e.slice();return t[5]=n[o],t}function bo(e){let n,o=e[5].label+"",t,s,i;return{c(){n=H("button"),t=R(o),this.h()},l(r){n=w(r,"BUTTON",{class:!0});var l=N(n);t=M(l,o),l.forEach(f),this.h()},h(){C(n,"class","menuButton svelte-12a9xod")},m(r,l){I(r,n,l),p(n,t),s||(i=Ie(n,"click",function(){dt(e[5].onClick)&&e[5].onClick.apply(this,arguments)}),s=!0)},p(r,l){e=r,l&4&&o!==(o=e[5].label+"")&&x(t,o)},d(r){r&&f(n),s=!1,i()}}}function Eo(e){let n,o=(e[5].debugModeOnly&&e[1]||!e[5].debugModeOnly)&&bo(e);return{c(){o&&o.c(),n=me()},l(t){o&&o.l(t),n=me()},m(t,s){o&&o.m(t,s),I(t,n,s)},p(t,s){t[5].debugModeOnly&&t[1]||!t[5].debugModeOnly?o?o.p(t,s):(o=bo(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(t){t&&f(n),o&&o.d(t)}}}function Fi(e){let n,o,t,s,i,r,l,a,c=Ge(e[2]),u=[];for(let g=0;g<c.length;g+=1)u[g]=Eo(ko(e,c,g));return{c(){n=H("div"),o=H("span"),t=R(e[0]),s=Z();for(let g=0;g<u.length;g+=1)u[g].c();i=Z(),r=H("span"),l=R(e[3]),this.h()},l(g){n=w(g,"DIV",{class:!0});var E=N(n);o=w(E,"SPAN",{class:!0});var _=N(o);t=M(_,e[0]),_.forEach(f),s=j(E);for(let O=0;O<u.length;O+=1)u[O].l(E);i=j(E),r=w(E,"SPAN",{class:!0});var T=N(r);l=M(T,e[3]),T.forEach(f),E.forEach(f),this.h()},h(){C(o,"class","header svelte-12a9xod"),C(r,"class","footer svelte-12a9xod"),C(n,"class",a=yn(e[4]?"menuOpen":"menuClosed")+" svelte-12a9xod")},m(g,E){I(g,n,E),p(n,o),p(o,t),p(n,s);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(n,null);p(n,i),p(n,r),p(r,l)},p(g,[E]){if(E&1&&x(t,g[0]),E&6){c=Ge(g[2]);let _;for(_=0;_<c.length;_+=1){const T=ko(g,c,_);u[_]?u[_].p(T,E):(u[_]=Eo(T),u[_].c(),u[_].m(n,i))}for(;_<u.length;_+=1)u[_].d(1);u.length=c.length}E&8&&x(l,g[3]),E&16&&a!==(a=yn(g[4]?"menuOpen":"menuClosed")+" svelte-12a9xod")&&C(n,"class",a)},i:be,o:be,d(g){g&&f(n),fn(u,g)}}}function Wi(e,n,o){let{header:t}=n,{debugMode:s}=n,{buttons:i}=n,{footer:r}=n,{showMenu:l}=n;return e.$$set=a=>{"header"in a&&o(0,t=a.header),"debugMode"in a&&o(1,s=a.debugMode),"buttons"in a&&o(2,i=a.buttons),"footer"in a&&o(3,r=a.footer),"showMenu"in a&&o(4,l=a.showMenu)},[t,s,i,r,l]}class Do extends we{constructor(n){super(),Ne(this,n,Wi,Fi,pe,{header:0,debugMode:1,buttons:2,footer:3,showMenu:4})}}function Io(e){let n,o=e[7]("content.actions.nextLevel")+"",t,s,i;return{c(){n=H("button"),t=R(o),this.h()},l(r){n=w(r,"BUTTON",{class:!0});var l=N(n);t=M(l,o),l.forEach(f),this.h()},h(){C(n,"class","menuButton svelte-1v33x5s")},m(r,l){I(r,n,l),p(n,t),s||(i=Ie(n,"click",e[18]),s=!0)},p(r,l){l&128&&o!==(o=r[7]("content.actions.nextLevel")+"")&&x(t,o)},d(r){r&&f(n),s=!1,i()}}}function Vi(e){let n,o,t,s,i,r,l,a,c,u,g,E,_=e[7]("content.menu.menuButton")+"",T,O,k,y,m=e[7]("content.actions.next")+"",d,b,L,B=e[7]("content.actions.action")+"",se,le,P,z,ce;function ue(D){e[10](D)}function ge(D){e[11](D)}function re(D){e[12](D)}let V={header:e[7]("content.menu.mainMenu.header"),footer:`${e[2].date} - ${e[2].hash}`};e[1]!==void 0&&(V.debugMode=e[1]),e[3]!==void 0&&(V.showMenu=e[3]),e[6]!==void 0&&(V.buttons=e[6]),o=new Do({props:V}),he.push(()=>ve(o,"debugMode",ue)),he.push(()=>ve(o,"showMenu",ge)),he.push(()=>ve(o,"buttons",re));function Te(D){e[13](D)}function te(D){e[14](D)}function Ye(D){e[15](D)}let Ee={header:e[7]("content.menu.loadGame.header"),footer:""};e[1]!==void 0&&(Ee.debugMode=e[1]),e[4]!==void 0&&(Ee.showMenu=e[4]),e[5]!==void 0&&(Ee.buttons=e[5]),l=new Do({props:Ee}),he.push(()=>ve(l,"debugMode",Te)),he.push(()=>ve(l,"showMenu",te)),he.push(()=>ve(l,"buttons",Ye));let ee=e[0].dungeon.beaten&&Io(e);return{c(){n=H("div"),Oe(o.$$.fragment),r=Z(),Oe(l.$$.fragment),g=Z(),E=H("button"),T=R(_),O=Z(),k=H("div"),y=H("button"),d=R(m),b=Z(),L=H("button"),se=R(B),le=Z(),ee&&ee.c(),this.h()},l(D){n=w(D,"DIV",{class:!0});var U=N(n);Re(o.$$.fragment,U),r=j(U),Re(l.$$.fragment,U),g=j(U),E=w(U,"BUTTON",{class:!0});var K=N(E);T=M(K,_),K.forEach(f),O=j(U),k=w(U,"DIV",{});var W=N(k);y=w(W,"BUTTON",{class:!0});var Y=N(y);d=M(Y,m),Y.forEach(f),b=j(W),L=w(W,"BUTTON",{class:!0,style:!0});var Q=N(L);se=M(Q,B),Q.forEach(f),W.forEach(f),le=j(U),ee&&ee.l(U),U.forEach(f),this.h()},h(){C(E,"class","menuButton svelte-1v33x5s"),C(y,"class","menuButton twoColButton svelte-1v33x5s"),C(L,"class","menuButton twoColButton svelte-1v33x5s"),ln(L,"float","right"),C(n,"class","commands svelte-1v33x5s")},m(D,U){I(D,n,U),Me(o,n,null),p(n,r),Me(l,n,null),p(n,g),p(n,E),p(E,T),p(n,O),p(n,k),p(k,y),p(y,d),p(k,b),p(k,L),p(L,se),p(n,le),ee&&ee.m(n,null),P=!0,z||(ce=[Ie(window,"keydown",mt(e[8])),Ie(E,"click",e[9]),Ie(y,"click",e[16]),Ie(L,"click",e[17])],z=!0)},p(D,[U]){const K={};U&128&&(K.header=D[7]("content.menu.mainMenu.header")),U&4&&(K.footer=`${D[2].date} - ${D[2].hash}`),!t&&U&2&&(t=!0,K.debugMode=D[1],_e(()=>t=!1)),!s&&U&8&&(s=!0,K.showMenu=D[3],_e(()=>s=!1)),!i&&U&64&&(i=!0,K.buttons=D[6],_e(()=>i=!1)),o.$set(K);const W={};U&128&&(W.header=D[7]("content.menu.loadGame.header")),!a&&U&2&&(a=!0,W.debugMode=D[1],_e(()=>a=!1)),!c&&U&16&&(c=!0,W.showMenu=D[4],_e(()=>c=!1)),!u&&U&32&&(u=!0,W.buttons=D[5],_e(()=>u=!1)),l.$set(W),(!P||U&128)&&_!==(_=D[7]("content.menu.menuButton")+"")&&x(T,_),(!P||U&128)&&m!==(m=D[7]("content.actions.next")+"")&&x(d,m),(!P||U&128)&&B!==(B=D[7]("content.actions.action")+"")&&x(se,B),D[0].dungeon.beaten?ee?ee.p(D,U):(ee=Io(D),ee.c(),ee.m(n,null)):ee&&(ee.d(1),ee=null)},i(D){P||(S(o.$$.fragment,D),S(l.$$.fragment,D),P=!0)},o(D){$(o.$$.fragment,D),$(l.$$.fragment,D),P=!1},d(D){D&&f(n),Ce(o),Ce(l),ee&&ee.d(),z=!1,Nn(ce)}}}function Yi(e,n,o){let t;Se(e,Ve,V=>o(7,t=V));let{state:s}=n,{debugMode:i}=n,{buildInfo:r}=n,l=!1,a=!1,c=[],u=[];const g=()=>{o(1,i=!i),o(0,s.settings.debug=i,s),ae(s)},E=V=>{switch(V.key){case"6":case"d":xe("R",s);break;case"9":case"e":xe("UR",s);break;case"8":case"w":xe("U",s);break;case"7":case"q":xe("UL",s);break;case"4":case"a":xe("L",s);break;case"1":case"z":xe("DL",s);break;case"2":case"x":xe("D",s);break;case"3":case"c":xe("DR",s);break;case"0":case" ":o(0,s=wn(s));break;case"-":case"r":Uo(s);break;case"+":case"f":Fo(s);break}},_=()=>{o(0,s=it()),ae(s),o(3,l=!1)},T=()=>{_s(s),o(3,l=!1)},O=()=>{o(0,s.dungeon=Ki,s),En(s),ae(s),o(3,l=!1)},k=()=>{o(3,l=!1),o(4,a=!0),o(5,c=y())},y=()=>{const V=[],Te=localStorage.getItem("autosave");Te&&V.push({debugModeOnly:!1,label:t("content.menu.loadGame.buttons.autoSave"),onClick:()=>d(Te)});const te=localStorage.getItem("state");return te&&V.push({debugModeOnly:!1,label:t("content.menu.loadGame.buttons.manualSave"),onClick:()=>d(te)}),V.push({debugModeOnly:!1,label:t("content.menu.loadGame.buttons.back"),onClick:()=>{o(3,l=!0),o(4,a=!1)}}),V},m=()=>[{debugModeOnly:!1,label:t("content.menu.mainMenu.buttons.newGame"),onClick:_},{debugModeOnly:!1,label:t("content.menu.mainMenu.buttons.saveGame"),onClick:T},{debugModeOnly:!1,label:t("content.menu.mainMenu.buttons.loadGame"),onClick:k},{debugModeOnly:!1,label:t("content.menu.mainMenu.buttons.debug"),onClick:g},{debugModeOnly:!0,label:t("content.menu.mainMenu.buttons.testingGrounds"),onClick:O},{debugModeOnly:!1,label:t("content.menu.mainMenu.buttons.language"),onClick:L}],d=V=>{o(0,s=st(JSON.parse(V))),o(3,l=!1),o(4,a=!1)},b=()=>{o(6,u=m()),a?o(3,l=!1):o(3,l=!l),o(4,a=!1)},L=()=>{pt.get()==="en"?(Tn("sv"),o(0,s.settings.locale="sv",s)):(Tn("en"),o(0,s.settings.locale="en",s)),o(6,u=m()),ae(s)};u=m();function B(V){i=V,o(1,i)}function se(V){l=V,o(3,l)}function le(V){u=V,o(6,u)}function P(V){i=V,o(1,i)}function z(V){a=V,o(4,a)}function ce(V){c=V,o(5,c)}const ue=()=>o(0,s=wn(s)),ge=()=>Pt(s),re=()=>bs(s);return e.$$set=V=>{"state"in V&&o(0,s=V.state),"debugMode"in V&&o(1,i=V.debugMode),"buildInfo"in V&&o(2,r=V.buildInfo)},[s,i,r,l,a,c,u,t,E,b,B,se,le,P,z,ce,ue,ge,re]}class qi extends we{constructor(n){super(),Ne(this,n,Yi,Vi,pe,{state:0,debugMode:1,buildInfo:2})}}const xi="2023-10-10",Xi="270d946",Ji={date:xi,hash:Xi};function Si(e){let n,o,t,s,i,r,l,a,c,u,g,E,_,T,O,k;t=new Ni({props:{state:e[0]}});function y(P){e[2](P)}function m(P){e[3](P)}let d={};e[0]!==void 0&&(d.state=e[0]),e[1]!==void 0&&(d.debugMode=e[1]),i=new mi({props:d}),he.push(()=>ve(i,"state",y)),he.push(()=>ve(i,"debugMode",m));function b(P){e[4](P)}function L(P){e[5](P)}let B={buildInfo:Ji};e[0]!==void 0&&(B.state=e[0]),e[1]!==void 0&&(B.debugMode=e[1]),u=new qi({props:B}),he.push(()=>ve(u,"state",b)),he.push(()=>ve(u,"debugMode",L));function se(P){e[6](P)}let le={};return e[0]!==void 0&&(le.state=e[0]),T=new Ui({props:le}),he.push(()=>ve(T,"state",se)),{c(){n=H("div"),o=H("div"),Oe(t.$$.fragment),s=Z(),Oe(i.$$.fragment),a=Z(),c=H("div"),Oe(u.$$.fragment),_=Z(),Oe(T.$$.fragment),this.h()},l(P){n=w(P,"DIV",{class:!0});var z=N(n);o=w(z,"DIV",{class:!0});var ce=N(o);Re(t.$$.fragment,ce),ce.forEach(f),s=j(z),Re(i.$$.fragment,z),z.forEach(f),a=j(P),c=w(P,"DIV",{class:!0,id:!0});var ue=N(c);Re(u.$$.fragment,ue),_=j(ue),Re(T.$$.fragment,ue),ue.forEach(f),this.h()},h(){C(o,"class","characterSide svelte-3spdd7"),C(n,"class","container svelte-3spdd7"),C(c,"class","container svelte-3spdd7"),C(c,"id","footer")},m(P,z){I(P,n,z),p(n,o),Me(t,o,null),p(n,s),Me(i,n,null),I(P,a,z),I(P,c,z),Me(u,c,null),p(c,_),Me(T,c,null),k=!0},p(P,[z]){const ce={};z&1&&(ce.state=P[0]),t.$set(ce);const ue={};!r&&z&1&&(r=!0,ue.state=P[0],_e(()=>r=!1)),!l&&z&2&&(l=!0,ue.debugMode=P[1],_e(()=>l=!1)),i.$set(ue);const ge={};!g&&z&1&&(g=!0,ge.state=P[0],_e(()=>g=!1)),!E&&z&2&&(E=!0,ge.debugMode=P[1],_e(()=>E=!1)),u.$set(ge);const re={};!O&&z&1&&(O=!0,re.state=P[0],_e(()=>O=!1)),T.$set(re)},i(P){k||(S(t.$$.fragment,P),S(i.$$.fragment,P),S(u.$$.fragment,P),S(T.$$.fragment,P),k=!0)},o(P){$(t.$$.fragment,P),$(i.$$.fragment,P),$(u.$$.fragment,P),$(T.$$.fragment,P),k=!1},d(P){P&&(f(n),f(a),f(c)),Ce(t),Ce(i),Ce(u),Ce(T)}}}function Qi(e,n,o){let t,s=null;s=localStorage.getItem("reloadGuard"),s?(t=st(JSON.parse(s)),ae(t)):(t=it(),ae(t)),Tn(t.settings.locale);let i=t.settings.debug;function r(g){t=g,o(0,t)}function l(g){i=g,o(1,i)}function a(g){t=g,o(0,t)}function c(g){i=g,o(1,i)}function u(g){t=g,o(0,t)}return[t,i,r,l,a,c,u]}class zi extends we{constructor(n){super(),Ne(this,n,Qi,Si,pe,{})}}export{zi as component};
