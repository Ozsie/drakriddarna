import{s as ze,n as me,o as Rt,b as xt,f as Ut,r as Fn,i as S}from"../chunks/scheduler.ba2ce6c0.js";import{S as pt,i as ht,g as d,h as c,j as m,f as A,k as b,a as R,x as u,y as P,m as I,s as y,n as E,c as Q,z as U,l as vn,o as z,e as pe,d as oe,p as Ft,b as Wt,t as de,A as On,r as ct,u as ft,v as gt,w as mt,B as Gt,C as Wn}from"../chunks/index.6f434070.js";function kt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var w=(e=>(e.Red="#CD5C5C",e.Blue="#1E90FF",e.Green="#90EE90",e.Yellow="#FCFF4F",e))(w||{}),W=(e=>(e.ORCH="Orch",e.TROLL="Troll",e.GREEN_DARK_LORD="Green Dark Lord",e.BLUE_DARK_LORD="Blue Dark Lord",e.RED_DARK_LORD="Red Dark Lord",e.YELLOW_DARK_LORD="Yellow Dark Lord",e))(W||{}),M=(e=>(e.APPRENTICE="Apprentice",e.KNIGHT="Knight",e.HERO="Hero",e.LORD="Lord",e.MASTER="Master",e))(M||{}),De=(e=>(e[e.KILL_ALL=0]="KILL_ALL",e[e.KILL_ALL_OF_TYPE=1]="KILL_ALL_OF_TYPE",e[e.REACH_CELL=2]="REACH_CELL",e[e.OPEN_DOOR=3]="OPEN_DOOR",e[e.KILL_AT_LEAST=4]="KILL_AT_LEAST",e))(De||{}),ge=(e=>(e.EQUIPMENT="Equipment",e.MAGIC_ITEM="Magic Item",e.TRAP_DOOR="Trap Door",e.NOTE="Note",e))(ge||{}),B=(e=>(e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.DOWN="Down",e))(B||{}),O=(e=>(e[e.WEAPON=0]="WEAPON",e[e.ARMOUR=1]="ARMOUR",e[e.SHIELD=2]="SHIELD",e))(O||{});const $t=[{name:"Sword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:0,type:O.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"Two-handed Sword",range:1,dice:4,twoHanded:!0,useHearHeroes:!1,amountInDeck:1,type:O.WEAPON,value:3,ignoresShield:!1,ignoresArmour:!1},{name:"Halberd",range:2,dice:3,twoHanded:!0,useHearHeroes:!0,amountInDeck:1,type:O.WEAPON,value:2,ignoresShield:!1,ignoresArmour:!1},{name:"Flail",range:1,dice:4,twoHanded:!1,useHearHeroes:!0,amountInDeck:1,type:O.WEAPON,value:4,ignoresShield:!1,ignoresArmour:!1},{name:"Double Headed Axe",range:1,dice:4,twoHanded:!0,useHearHeroes:!0,amountInDeck:1,type:O.WEAPON,value:3,ignoresShield:!1,ignoresArmour:!1}],In=[{name:"Orch Sword",range:99,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4,type:O.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1},{name:"Troll Club",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4,type:O.WEAPON,value:0,ignoresShield:!1,ignoresArmour:!1}],qn=[{name:"Chain mail",type:O.ARMOUR,amountInDeck:2,defense:1,magicProtection:!1,movementReduction:0,value:2},{name:"Plate mail",type:O.ARMOUR,amountInDeck:1,defense:2,magicProtection:!1,movementReduction:1,value:3},{name:"Dragon Skin mail",type:O.ARMOUR,amountInDeck:1,defense:2,magicProtection:!0,movementReduction:0,value:4}],En=[{name:"Orch Mail",defense:0,magicProtection:!1,amountInDeck:4,type:O.ARMOUR,movementReduction:0,value:0},{name:"Troll Skin",defense:1,magicProtection:!1,amountInDeck:4,type:O.ARMOUR,movementReduction:0,value:0}],Kn="0",Xn="@",qt=" ",Kt="#",Vn=(e,n,t,o)=>({type:e,name:n,position:{x:t,y:o},found:!1}),ne=(e,n,t)=>({side:e,x:n,y:t,locked:!1,trapped:!1,open:!1,hidden:!1,trapAttacks:0}),kn=(e,n,t)=>({...ne(e,n,t),hidden:!0}),Re=(e,n,t,o)=>{const s=Object.values(w).indexOf(n),r=Object.keys(w)[s];let a=M.LORD,i=2,l=2,f=4,p=4,h=4,C=In[0],T=En[0];switch(e){case W.ORCH:{a=M.APPRENTICE,l=0,f=2,p=2,h=1;break}case W.TROLL:{a=M.KNIGHT,l=1,f=3,p=3,h=2,C=In[1],T=En[1];break}}return e===W.YELLOW_DARK_LORD&&(i=3),{type:e,level:a,colour:n,actions:i,defense:l,health:f,maxHealth:p,experience:h,name:e+" ("+r+")",movement:3,maxMovement:3,position:{x:t,y:o},weapon:C,armour:T,incapacitated:!1,inventory:[]}},jn=e=>{const n=e.currentActor,t=Qt(n.level,1);let o,s,r,a;t>=1?(o=ao(e,n,t),o||(s=to(e,n,t)),!o&&!s&&(r=no(e,n,t)),!o&&!s&&!r&&(a=oo(e,n,t)),!o&&!s&&!r&&!a&&g(e,`${n.name} searched but found nothing`)):g(e,`${n.name} searched but found nothing`)},Ln=e=>{const n=e.currentActor;if(!n)return!1;const t=e.dungeon.layout.secrets.filter(o=>o.type===ge.TRAP_DOOR).filter(o=>!o.found).find(o=>Yt(o.position,n.position));return t?(vt(e,Zn(t),n),g(e,`${n.name} fell into a pit and is incapacitated for one turn.`),n.movement=0,n.actions=0,n.incapacitated=!0,t.found=!0,!0):!1},Zn=e=>({health:0,position:e.position,defense:0,experience:0,actions:0,movement:0,maxMovement:0,colour:w.Red,maxHealth:0,name:"Trap Door",level:M.APPRENTICE,incapacitated:!1,weapon:{name:"Falling",amountInDeck:0,dice:3,useHearHeroes:!0,twoHanded:!1,range:1,type:O.WEAPON,value:0,ignoresShield:!0,ignoresArmour:!0},inventory:[]}),Jn=(e,n)=>e.dungeon.layout.doors.filter(t=>t.hidden).find(t=>st({x:t.x,y:t.y},n.x,n.y)),Sn=(e,n)=>e.dungeon.layout.doors.filter(t=>t.trapped).find(t=>t.x===n.x&&t.y===n.y),zn=(e,n)=>e.dungeon.layout.secrets.filter(t=>!t.found).find(t=>st(t.position,n.x,n.y)),eo=(e,n)=>e.dungeon.layout.secrets.filter(t=>!t.found).filter(t=>t.type===ge.TRAP_DOOR).find(t=>st(t.position,n.x,n.y)),to=(e,n,t)=>Jn(e,n.position)?(g(e,`${n.name} searched (${t}) and found a hidden door`),!0):!1,no=(e,n,t)=>{const o=Sn(e,n.position);return o?(g(e,`${n.name} searched (${t}) and found a trap in a door`),o.trapped=!1,!0):!1},oo=(e,n,t)=>{const o=zn(e,n.position);if(o){switch(g(e,`${n.name} searched (${t}) and found ${o.name}`),o.found=!0,o.type){case ge.EQUIPMENT:{let s=o.item??so(e);switch(ro(e,s),g(e,`${n.name} equipped (${s.name})`),s.type){case O.ARMOUR:n.armour&&n.inventory.push(n.armour),n.armour=s;break;case O.SHIELD:n.shield&&n.inventory.push(n.shield),n.shield=s;break;case O.WEAPON:n.weapon&&n.inventory.push(n.weapon),n.weapon=s;break}}}return!0}return!1},so=e=>{const n=e.itemDeck.length,t=Math.floor(Math.random()*n);return e.itemDeck[t]},ro=(e,n)=>{const t=e.itemDeck.findIndex(o=>o.type===n.type&&o.name===n.name);e.itemDeck.splice(t,1)},ao=(e,n,t)=>{const o=eo(e,n.position);return o?(g(e,`${n.name} searched (${t}) and found ${o.name}`),o.found=!0,!0):!1},wn={name:"The Three Gates of Power",beaten:!1,winConditions:[{type:De.KILL_ALL,fulfilled:!1},{type:De.OPEN_DOOR,targetCell:{x:15,y:1},fulfilled:!1}],startingPositions:[{x:1,y:4},{x:0,y:3},{x:0,y:4},{x:0,y:5}],discoveredRooms:["A"],layout:{grid:["            EEEE","            EEEE","         DDDEEEE","AAA   CCCC","AAABBBCCCC   GGG","AAA   CCCCFFFGGG","      CCCC   GGG","      CCCC","      CCCCHHHIII","             III","             III"],doors:[ne(B.RIGHT,2,4),ne(B.RIGHT,5,4),ne(B.RIGHT,9,5),ne(B.RIGHT,12,5),ne(B.RIGHT,9,8),ne(B.RIGHT,12,8),ne(B.RIGHT,11,2),kn(B.UP,9,3),kn(B.RIGHT,15,1)],monsters:[Re(W.ORCH,w.Blue,9,7),Re(W.ORCH,w.Red,12,8),Re(W.TROLL,w.Red,15,1),Re(W.TROLL,w.Yellow,13,6)],secrets:[{type:ge.EQUIPMENT,position:{x:9,y:4},found:!1,name:"Random Equipment"},{type:ge.EQUIPMENT,position:{x:12,y:0},found:!1,name:"Random Equipment"},{type:ge.MAGIC_ITEM,position:{x:15,y:5},found:!1,name:"Random Magic Item"},{type:ge.EQUIPMENT,position:{x:15,y:9},found:!1,name:"Random Equipment"}],notes:[{message:"Beyond stone and fire you shall find the Dread tunnel, the road to the Ice Dragons treasure.",position:{x:2,y:4}},{message:"The Gate of Water. <There is an image of a sea dragon under the text>",position:{x:9,y:8}},{message:"The Gate of Air. <There is an image of a pegasus under the text>",position:{x:9,y:5}},{message:"The Gate of Fire. <There is an image of a hippogriph under the text>",position:{x:9,y:3}}]},killCount:0},io={name:"Troll cave",beaten:!1,winConditions:[{type:De.KILL_ALL,fulfilled:!1}],nextDungeon:wn,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A"],layout:{grid:["     ######","     #CCCC#","     #CCCC#","     #CCCC#","     ##E###","      #E#  ","      #E## ","##### #BB# ","#AAA###BB# ","#AAADDDBB# ","#AAA###BB# ","##### #### "],doors:[ne(B.RIGHT,3,9),ne(B.RIGHT,6,9),ne(B.UP,7,7),ne(B.UP,7,4)],monsters:[Re(W.ORCH,w.Green,6,9),Re(W.ORCH,w.Yellow,8,10),Re(W.ORCH,w.Red,7,5),Re(W.ORCH,w.Red,9,3),Re(W.TROLL,w.Green,6,1)],secrets:[Vn(ge.NOTE,"Welcome to Drakriddarna",3,9)],notes:[]},killCount:0},lo=[{name:"Large shield",type:O.SHIELD,amountInDeck:2,dice:2,value:2},{name:"Small shield",type:O.SHIELD,amountInDeck:2,dice:1,value:1}],Et=(e,n)=>($t[0].amountInDeck--,{name:e,actions:2,movement:3,maxMovement:3,defense:0,level:M.APPRENTICE,health:7,maxHealth:7,colour:n,experience:0,position:{x:-1,y:-1},weapon:$t[0],incapacitated:!1,inventory:[]}),uo=()=>{const e=[];return $t.forEach(n=>{for(let t=0;t<n.amountInDeck;t++)e.push(n)}),qn.forEach(n=>{for(let t=0;t<n.amountInDeck;t++)e.push(n)}),lo.forEach(n=>{for(let t=0;t<n.amountInDeck;t++)e.push(n)}),e},At={name:"Treasure of the Ice Dragon",dungeons:[io,wn],itemDeck:uo(),heroes:[Et("Fearik",w.Yellow),Et("Helbran",w.Red),Et("Siedel",w.Green),Et("Wulf",w.Blue)]},yn=e=>{g(e,"Game saved."),localStorage.setItem("state",JSON.stringify(e))},Ao=()=>{const e=localStorage.getItem("state");if(e){const n=JSON.parse(e);return n.currentActor=n.heroes.find(t=>{var o;return t.name===((o=n.currentActor)==null?void 0:o.name)}),g(n,"Game loaded."),n}},co=()=>{const e={heroes:At.heroes,dungeon:At.dungeons[0],currentActor:At.heroes[0],actionLog:[`Playing '${At.name}'`,"Game Initialised","Each character has 2 actions. Move, Attack, Search or Pick Lock.","Each character can move 3 steps per action.","If another action is performed before moving 3 steps, the move is finished and both actions are consumed.","The rules of this game are harsh and unfair."],itemDeck:fo(At.itemDeck)};return Pn(e),e},fo=e=>{let n=e.length,t;for(;n>0;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e},Pn=e=>{e.heroes.forEach((n,t)=>{n.position=e.dungeon.startingPositions[t],n.movement=Te(n),n.actions=2,n.health=n.maxHealth})},Xt=e=>{let n=[];for(let t=0;t<e.length;t++)n.push(e[t]);return n},Vt=(e,n,t)=>e.dungeon.layout.monsters.some(o=>o.position.x===n&&o.position.y===t&&o.health>0),jt=(e,n,t)=>N(e).some(o=>o.position.x===n&&o.position.y===t),yt=e=>{e.movement===0&&(e.actions--,e.actions!==0&&(e.movement=Te(e))),e.actions==0&&(e.movement=0)},D=(e,n)=>{const t=n.currentActor;if(!t||t.actions===0)return;let o=t.position.x,s=t.position.y;switch(e){case"UL":o=t.position.x-1,s=t.position.y-1;break;case"U":s=t.position.y-1;break;case"UR":o=t.position.x+1,s=t.position.y-1;break;case"L":o=t.position.x-1;break;case"R":o=t.position.x+1;break;case"DL":o=t.position.x-1,s=t.position.y+1;break;case"D":s=t.position.y+1;break;case"DR":o=t.position.x+1,s=t.position.y+1;break}const r=jt(n,o,s),a=!Tt(n.dungeon.layout,o,s),i=Vt(n,o,s);if(!r&&!a){const l=Zt(n.dungeon,o,s);l?l&&(i?Mn(t,n,o,s):Nn(t,n,o,s,1)):mo(n,t,o,s)&&dt(t,n,o,s)}else g(n,`${t.name} could not make that move`);Ln(n)||yt(t)},Nn=(e,n,t,o,s)=>{e.position.x=t,e.position.y=o;const r=n.dungeon.layout.notes.find(i=>Yt(i.position,e.position));r&&(n.dungeon.layout.doors.some(l=>l.hidden&&Yt(r.position,{x:l.x,y:l.y}))||g(n,`${e.name} reads: ${r.message}`)),n.dungeon.layout.monsters.some(i=>st(e.position,i.position.x,i.position.y))?(g(n,`${e.name} walked by a monster and lost the momentum`),e.movement=0):e.movement-=s},dt=(e,n,t,o)=>{const s=Ht(n.dungeon.layout.grid,t,o);s&&n.dungeon.discoveredRooms.push(s),Nn(e,n,e.position.x,e.position.y,1),g(n,`${e.name} opened a door`)},Mn=(e,n,t,o)=>{if(e.actions===1&&e.movement!==3){g(n,`${e.name} has no actions left to attack`);return}if(!e.weapon.useHearHeroes&&N(n).filter(a=>a!==e).filter(a=>st(e.position,a.position.x,a.position.y)).length>0){g(n,`${e.name} could not use ${e.weapon.name} near a friend.`);return}const s=n.dungeon.layout.monsters.find(r=>r.position.x===t&&r.position.y===o);s&&(vt(n,e,s),s.health<=0&&(n.dungeon.layout.monsters=n.dungeon.layout.monsters.filter(r=>r!=s),g(n,`${e.name} killed ${s.name}`),n.dungeon.killCount++,e.experience+=s.experience),e.actions>1&&e.movement<3?e.actions-=2:e.actions--)},Qt=(e,n)=>{let t=[];for(let o=0;o<n;o++)t.push(Math.floor(Math.random()*6)+1);switch(e){case M.APPRENTICE:t=t.filter(o=>o===5);break;case M.KNIGHT:case M.HERO:t=t.filter(o=>o>=4);break;case M.LORD:case M.MASTER:t=t.filter(o=>o>=3);break}return t.length},Qn=e=>{const n=e.currentActor;n&&(n.actions--,n.movement=Te(n),n.actions===0&&Bt(e))},Ct=e=>{const n=e.currentActor;if(!n)return;if(!_t(n)){g(e,`${n.name} has no actions left to pick lock`);return}const t=e.dungeon.layout.doors.find(o=>o.x===n.position.x&&o.y===n.position.y);t&&t.locked&&(Qt(n.level,1)>=1?(t.locked=!1,g(e,`${n.name} managed to pick the lock`)):g(e,`${n.name} failed to pick the lock`),n.actions>1&&n.movement<3?n.actions-=2:n.actions--,n.movement=Te(n),n.actions==0&&(n.movement=0))},Te=e=>{var n;return e.maxMovement-(((n=e.armour)==null?void 0:n.movementReduction)??0)},bt=e=>{const n=e.currentActor;if(n){if(!_t(n)){g(e,`${n.name} has no actions left to search`);return}jn(e),n.actions>1&&n.movement<Te(n)?n.actions-=2:n.actions--,n.actions==0&&(n.movement=0)}},Bt=e=>{if(go(e),e.currentActor!==void 0){g(e,`${e.currentActor.name} ended their turn`);let t=N(e).indexOf(e.currentActor)+1;t===N(e).length&&(ho(e),t=0),N(e)[t].incapacitated&&(g(e,`${N(e)[t].name} is no longer incapacitated.`),N(e)[t].incapacitated=!1,t++),e.currentActor.actions=2,e.currentActor.movement=Te(e.currentActor),e.currentActor=N(e)[t],g(e,`${e.currentActor.name} started their turn`)}},go=e=>{var n;e.dungeon.winConditions.forEach(t=>{var o;switch(t.type){case De.KILL_ALL:{const s=e.dungeon.layout.monsters.map(r=>r.health).reduce((r,a)=>r+a,0);t.fulfilled=s<=0;break}case De.REACH_CELL:{t.fulfilled=N(e).some(s=>{var r;return s.position.x===((r=t.targetCell)==null?void 0:r.x)&&s.position.y===t.targetCell.y});break}case De.KILL_ALL_OF_TYPE:{t.fulfilled=e.dungeon.layout.monsters.filter(s=>s.type===t.targetMonsterType).some(s=>s.health>0);break}case De.OPEN_DOOR:{t.fulfilled=((o=e.dungeon.layout.doors.find(s=>{var r,a;return s.x===((r=t.targetCell)==null?void 0:r.x)&&s.y===((a=t.targetCell)==null?void 0:a.y)}))==null?void 0:o.open)??!1;break}case De.KILL_AT_LEAST:{t.fulfilled=(t.killMinCount?t.killMinCount:0)<=e.dungeon.killCount;break}}}),e.dungeon.beaten=e.dungeon.winConditions.map(t=>t.fulfilled).reduce((t,o)=>t&&o,!0),e.dungeon.beaten&&(g(e,"All win conditions have been fulfilled"),g(e,`You have cleared ${e.dungeon.name}`),g(e,`Press 'Next' to move on to the next level: ${(n=e.dungeon.nextDungeon)==null?void 0:n.name}`))},xn=e=>({health:0,position:{x:e.x,y:e.y},defense:0,experience:0,actions:0,movement:0,maxMovement:0,colour:w.Red,maxHealth:0,name:"Door",level:M.APPRENTICE,incapacitated:!1,weapon:{name:"Trap",amountInDeck:0,dice:e.trapAttacks,useHearHeroes:!0,twoHanded:!1,range:1,type:O.WEAPON,value:0,ignoresShield:!0,ignoresArmour:!1},inventory:[]}),mo=(e,n,t,o)=>{const s=e.dungeon.layout.doors.find(r=>r.x===n.position.x&&r.y===n.position.y);if(s&&!s.locked){const r=po(n.position.x,n.position.y,t,o);if(s.side===r)return s.open=!0,s.trapped&&vt(e,xn(s),n),!0}return s&&s.locked&&g(e,"Door is locked"),!1},po=(e,n,t,o)=>{if(e===t){if(n>o)return B.UP;if(n<o)return B.DOWN}if(n===o){if(e>t)return B.LEFT;if(e<t)return B.RIGHT}},Tt=(e,n,t)=>{let o=!0;if(n<0||n>=e.grid[0].length||t<0||t>=e.grid.length)o=!1;else{const s=Ht(e.grid,n,t);(s===Kn||s===Xn||s===qt||s===Kt)&&(o=!1)}return o},Zt=(e,n,t)=>{const o=Ht(e.layout.grid,n,t);return o?e.discoveredRooms.includes(o):!1},Ht=(e,n,t)=>{let o;return e.forEach((s,r)=>{Xt(s).forEach((a,i)=>{r===t&&i===n&&(o=a)})}),o},st=(e,n,t)=>e.x===n&&e.y===t||e.x===n-1&&e.y===t||e.x===n-1&&e.y===t-1||e.x===n&&e.y===t-1||e.x===n+1&&e.y===t-1||e.x===n+1&&e.y===t||e.x===n+1&&e.y===t+1||e.x===n&&e.y===t+1||e.x===n-1&&e.y===t+1,ho=e=>{const n=e.dungeon.layout.monsters.filter(t=>{const o=Ht(e.dungeon.layout.grid,t.position.x,t.position.y);return o&&e.dungeon.discoveredRooms.includes(o)&&t.health>0});n.length===0&&g(e,"No monsters can act"),n.forEach(t=>{const o=t.actions;for(g(e,`${t.name} acted `);t.actions>0;){const s=N(e).filter(r=>st(t.position,r.position.x,r.position.y));if(s.length>0){const r=Math.floor(Math.random()*s.length);ko(e,t,s[r])}else{for(;t.movement>0;)vo(e,t);t.actions--,t.movement=Te(t)}}t.actions=o,t.movement=Te(t)})},Cn=(e,n)=>Math.sqrt(Math.pow(e.x-(n==null?void 0:n.x),2)+Math.pow(e.y-(n==null?void 0:n.y),2)),vo=(e,n)=>{const t=N(e).map(o=>({hero:o,dist:Cn(o.position,n.position)})).sort((o,s)=>o.dist-s.dist)[0];if(t.dist>1){const o=Io(e,n.position);if(o.length>0){const s=o.map(r=>({pos:r,dist:Cn(r,t.hero.position)})).sort((r,a)=>r.dist-a.dist)[0].pos;n.position=s,g(e,`${n.name} moved towards ${t.hero.name} (${s.x},${s.y})`)}else g(e,`${n.name} could not move`)}n.movement--};let Io=(e,n)=>{const t=n.x,o=n.y,s=[];for(let r=t-1;r<=t+1;r++)for(let a=o-1;a<=o+1;a++)r===t&&a===o||Tt(e.dungeon.layout,r,a)&&Zt(e.dungeon,r,a)&&s.push({x:r,y:a});return s.filter(r=>!N(e).find(a=>a.position.x===r.x&&a.position.y===r.y)).filter(r=>!e.dungeon.layout.monsters.find(i=>i.position.x===r.x&&i.position.y===r.y))};const Eo=(e,n,t,o)=>{var r;const s=((r=o.armour)==null?void 0:r.defense)??o.defense;return`${e} damage (${n}-(${s}+${t})=${e})`},ko=(e,n,t)=>{if(n.actions===1&&n.movement!==3){g(e,`${t.name} has no actions left to attack`);return}t&&(vt(e,n,t),(n==null?void 0:n.actions)>1&&(n==null?void 0:n.movement)<3?n.actions-=2:n.actions--)},_t=e=>e.movement<Te(e)?e.actions>1:e.actions>0,Yt=(e,n)=>e.x===n.x&&e.y===n.y,g=(e,n)=>{e.actionLog=[n,...e.actionLog]},N=e=>e.heroes.filter(n=>n.health>0),yo=e=>e.heroes.filter(n=>n.health<=0),vt=(e,n,t)=>{var i,l;let o=0,s=0;n.weapon.ignoresArmour?t.armour&&g(e,`${t.name}'s armour was useless against ${n.weapon.name} `):o=((i=t.armour)==null?void 0:i.defense)??t.defense,n.weapon.ignoresShield?t.shield&&g(e,`${t.name}'s shield was useless against ${n.weapon.name} `):s=Qt(t.level,((l=t.shield)==null?void 0:l.dice)??0);const r=Qt(n.level,n.weapon.dice),a=Math.max(r-(o+s),0);t.health-=a,g(e,`${n.name} attacked ${t.name} with ${n.weapon.name} for ${Eo(a,r,s,t)}`),t.health<=0&&(g(e,`${n.name} killed ${t.name}`),t.health=0,t.level=M.APPRENTICE)},Qo=e=>{N(e).forEach(n=>{const t=n.level;n.experience>=28?n.level=M.MASTER:n.experience>=18?n.level=M.LORD:n.experience>=10?n.level=M.HERO:n.experience>=4&&(n.level=M.KNIGHT),t!==n.level&&g(e,`${n.name} leveled up to ${n.level}`)})},Co=e=>{N(e).forEach(n=>n.experience+=4)},bo=e=>{yo(e).forEach(n=>{n.experience=0,n.health=n.maxHealth,n.movement=n.maxMovement,n.actions=2})},Bo=e=>{e.dungeon.beaten&&e.dungeon.nextDungeon&&(e.dungeon=e.dungeon.nextDungeon,e.actionLog=["You have reached "+e.dungeon.name],Co(e),Qo(e),bo(e),Pn(e))},_o="data:image/png;base64,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av8Y5Sy9/WMYKIMAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgZsC/wFnqYWZIdKtqQAAAABJRU5ErkJggg==",Do="data:image/png;base64,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",Ro=(e,n)=>{const t=Math.abs(n.x-e.x),o=Math.abs(n.y-e.y),s=Math.min(t,o),r=Math.max(t,o),a=s,i=r-s;let l=Math.sqrt(2);return i===0&&(l=1),Math.floor(l*a+i)},To=(e,n,t)=>{const o=e.currentActor,s=e.dungeon.layout.doors.find(r=>r.x===o.position.x&&r.y===o.position.y);if(s){if(!s.open&&!s.hidden&&!s.locked&&o.movement>0){switch(s.open=!0,s.trapped&&vt(e,xn(s),o),s.side){case B.RIGHT:dt(o,e,n+1,t);break;case B.LEFT:dt(o,e,n-1,t);break;case B.DOWN:dt(o,e,n,t+1);break;case B.UP:dt(o,e,n,t-1);break}yt(o)}else if(s.locked&&!s.hidden){if(!_t(o)){g(e,`${o.name} has no actions left`);return}g(e,"Door is locked"),Ct(e),yt(o)}}else{if(!_t(o)){g(e,`${o.name} has no actions left`);return}bt(e)}},Ho=(e,n,t)=>{const o=e.currentActor;if(o.actions===0){g(e,`${o.name} has no actions left`);return}const s=Tt(e.dungeon.layout,n,t),r=Ro(o.position,{x:n,y:t});if(console.log("distance: "+r),s){const a=jt(e,n,t),i=Vt(e,n,t);if(!a&&!i&&r<=o.movement){if(o.position={x:n,y:t},o.movement-=r,Ln(e))return}else i&&(r<=o.weapon.range?Mn(o,e,n,t):g(e,"Monster is out of range"))}yt(o)},Oo=(e,n,t)=>{const o=t.currentActor,s=document.getElementById("gameBoard");if(!s)return;const r=s.getBoundingClientRect(),a=Math.min(Math.floor((e.clientX-r.left)/n),t.dungeon.layout.grid[0].length-1),i=Math.min(Math.floor((e.clientY-r.top)/n),t.dungeon.layout.grid.length-1),l=t.dungeon.layout.grid[i][a];a===o.position.x&&i===o.position.y?To(t,a,i):t.dungeon.discoveredRooms.includes(l)&&Ho(t,a,i)},Lo=(e,n,t,o,s)=>{N(o).forEach(a=>{wo(e,a,n,t)}),xo(e,o,t),Uo(e,o,t)},wo=(e,n,t,o)=>{const s=n.position.x,r=n.position.y;e.drawImage(t,4*16,0,16,16,s*o,r*o,o,o),Po(e,n,s,r,o),Mo(e,n,s,r,o),No(e,n,s,r,o)},Po=(e,n,t,o,s)=>{const r=e.fillStyle,a=e.strokeStyle;e.strokeStyle="#080808",e.fillStyle="darkred";for(let i=0;i<n.actions;i++)e.fillRect(t*s+4+6*i,o*s+s-12,5,5),e.rect(t*s+4+6*i,o*s+s-12,5,5),e.stroke();e.fillStyle="blue";for(let i=0;i<n.movement;i++)e.fillRect(t*s+s-22+6*i,o*s+s-12,5,5),e.rect(t*s+s-22+6*i,o*s+s-12,5,5),e.stroke();e.fillStyle=r,e.strokeStyle=a},No=(e,n,t,o,s)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="red",e.fillRect(t*s+4,o*s,s-8,4),e.fillStyle="green",e.fillRect(t*s+4,o*s,(s-8)*(n.health/n.maxHealth),4),e.rect(t*s+4,o*s,s-8,4),e.stroke()},Mo=(e,n,t,o,s)=>{e.beginPath(),e.strokeStyle=n.colour,e.fillStyle=n.colour,e.fillRect(t*s+4,o*s+(s-6),s-8,4),e.stroke()},xo=(e,n,t)=>{const o=n.currentActor;if(o){for(let s=o.position.x-o.movement;s<=o.position.x+o.movement;s++)for(let r=o.position.y-o.movement;r<=o.position.y+o.movement;r++)if(Zt(n.dungeon,s,r)){const i=Vt(n,s,r),l=jt(n,s,r),f=Tt(n.dungeon.layout,s,r);!l&&!i&&f&&(e.fillStyle="rgba(50, 50, 255, 0.08)",e.fillRect(s*t,r*t,t,t),e.stroke())}}},Uo=(e,n,t)=>{const o=n.currentActor;o&&(e.beginPath(),e.strokeStyle="lightblue",e.lineWidth=2,e.moveTo(o.position.x*t,o.position.y*t),e.lineTo(o.position.x*t+t/3,o.position.y*t),e.moveTo(o.position.x*t,o.position.y*t),e.lineTo(o.position.x*t,o.position.y*t+t/3),e.moveTo(o.position.x*t+t,o.position.y*t),e.lineTo(o.position.x*t+t/3*2,o.position.y*t),e.moveTo(o.position.x*t+t,o.position.y*t),e.lineTo(o.position.x*t+t,o.position.y*t+t/3),e.moveTo(o.position.x*t,o.position.y*t+t),e.lineTo(o.position.x*t,o.position.y*t+t/3*2),e.moveTo(o.position.x*t,o.position.y*t+t),e.lineTo(o.position.x*t+t/3,o.position.y*t+t),e.moveTo(o.position.x*t+t,o.position.y*t+t),e.lineTo(o.position.x*t+t,o.position.y*t+t/3*2),e.moveTo(o.position.x*t+t,o.position.y*t+t),e.lineTo(o.position.x*t+t/3*2,o.position.y*t+t),e.stroke(),e.lineWidth=1)},Go=(e,n,t,o,s)=>{o.dungeon.layout.monsters.forEach(r=>{$o(e,n,o,r,t,s)})},$o=(e,n,t,o,s,r)=>{const a=t.dungeon.layout.grid[o.position.y][o.position.x];if(o&&o.health>0&&Vo(a,t)){switch(o.type){case W.ORCH:Yo(e,n,s,o);break;case W.TROLL:Fo(e,n,s,o);break;default:Wo(e,n,s,o);break}qo(e,o,s),Ko(e,o,s),Xo(e,o,t.heroes,t,s,r)}},Yo=(e,n,t,o)=>{e.drawImage(n,t,16,16,16,o.position.x*t,o.position.y*t,t,t)},Fo=(e,n,t,o)=>{e.drawImage(n,t,16,16,16,o.position.x*t,o.position.y*t,t,t)},Wo=(e,n,t,o)=>{e.drawImage(n,16,16,16,16,o.position.x*t,o.position.y*t,t,t)},qo=(e,n,t)=>{e.beginPath(),e.strokeStyle=n.colour,e.fillStyle=n.colour,e.fillRect(n.position.x*t+4,n.position.y*t+(t-6),t-8,4),e.stroke()},Ko=(e,n,t)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="red",e.fillRect(n.position.x*t+4,n.position.y*t,t-8,4),e.fillStyle="green",e.fillRect(n.position.x*t+4,n.position.y*t,(t-8)*(n.health/n.maxHealth),4),e.rect(n.position.x*t+4,n.position.y*t,t-8,4),e.stroke()},Xo=(e,n,t,o,s,r)=>{r&&t.forEach(a=>{const i=n.position.x,l=n.position.y,f=a.position.x,p=a.position.y;e.strokeStyle=n.colour,e.beginPath(),e.moveTo(i*s+s/2,l*s+s/2),e.lineTo(f*s+s/2,p*s+s/2),e.stroke()})},Vo=(e,n)=>n.dungeon.discoveredRooms.includes(e),jo=(e,n,t,o,s)=>{o.dungeon.layout.doors.forEach(r=>{ns(e,n,t,o,r,s)})},Zo=(e,n,t,o,s)=>{o.dungeon.layout.grid.forEach((r,a)=>{Xt(r).forEach((i,l)=>{So(e,n,o,i,l,a,t),ts(e,i,o,l,a,t,s)})})},Jo=(e,n,t,o)=>{o.dungeon.layout.secrets.filter(s=>s.found).forEach(s=>{switch(s.type){case ge.TRAP_DOOR:zo(e,n,t,s);break;default:es(e,n,t,s);break}})},So=(e,n,t,o,s,r,a)=>{os(o)||!t.dungeon.discoveredRooms.includes(o)&&o!==qt?t.dungeon.discoveredRooms.some(i=>ss(s,r,i,t))?e.drawImage(n,48,0,48,48,s*a,r*a,a,a):bn(e,s,r,a):Dt(o,t)?bn(e,s,r,a):e.drawImage(n,0,0,48,48,s*a,r*a,a,a)},bn=(e,n,t,o)=>{e.beginPath(),e.strokeStyle="black",e.fillStyle="black",e.fillRect(n*o,t*o,o,o),e.stroke()},zo=(e,n,t,o)=>{const s=o.position.x,r=o.position.y;e.drawImage(n,3*48,0,48,48,s*t,r*t,t,t)},es=(e,n,t,o)=>{const s=o.position.x,r=o.position.y;e.drawImage(n,4*48,0,48,48,s*t,r*t,t,t)},ts=(e,n,t,o,s,r,a)=>{!a&&(Dt(n,t)||n===Kt)||(e.beginPath(),e.strokeStyle="black",e.rect(o*r,s*r,r,r),a&&(e.font="7px Arial",e.fillText(o+","+s,o*r+3,s*r+(r-3))),e.stroke())},ns=(e,n,t,o,s,r)=>{const a=o.dungeon.layout.grid[s.y][s.x];if(s&&!s.hidden&&!s.open&&!Dt(a,o))switch(e.fillStyle="brown",s.side){case B.RIGHT:{e.fillRect(s.x*t+(t-2),s.y*t,4,t),s.locked&&r&&(e.fillStyle="grey",e.fillRect(s.x*t+(t-4),s.y*t+(t/2-4),8,8));break}case B.LEFT:{e.fillRect(s.x*t-2,s.y*t,4,t),s.locked&&r&&(e.fillStyle="grey",e.fillRect(s.x*t-4,s.y*t+(t/2-4),8,8));break}case B.UP:{e.fillRect(s.x*t,s.y*t-2,t,4),s.locked&&r&&(e.fillStyle="grey",e.fillRect(s.x*t+(t/2-4),s.y*t-4,8,8));break}case B.DOWN:{e.fillRect(s.x*t,s.y*t+(t-2),t,4),s.locked&&r&&(e.fillStyle="grey",e.fillRect(s.x*t+(t/2-4),s.y*t+(t-4),8,8));break}}r&&!Dt(a,o)&&(e.fillStyle="black",e.font="12px Arial",e.fillText(`[${s.hidden?"H":"-"}/${s.trapped?"T"+s.trapAttacks:"-"}/${s.locked?"L":"-"}]`,s.x*t,s.y*t+10),e.fillStyle="rgba(50, 255, 255, 0.28)",e.fillRect(s.x*t,s.y*t,t,t))},os=e=>e===Kt,Dt=(e,n)=>e===qt||!n.dungeon.discoveredRooms.includes(e),ss=(e,n,t,o)=>{if(!o)return;const s=Math.max(e-1,0),r=Math.max(n-1,0),a=Math.min(e+1,o.dungeon.layout.grid.length),i=Math.min(n+1,o.dungeon.layout.grid[0].length);for(let l=s;l<=a;l++)for(let f=r;f<=i;f++){const p=o.dungeon.layout.grid[f];if(Xt(p)[l]===t)return!0}return!1};function rs(e){let n,t,o,s;return{c(){n=d("div"),t=d("canvas"),this.h()},l(r){n=c(r,"DIV",{style:!0,class:!0});var a=m(n);t=c(a,"CANVAS",{width:!0,height:!0,id:!0}),m(t).forEach(A),a.forEach(A),this.h()},h(){b(t,"width",_e*40),b(t,"height",_e*30),b(t,"id","gameBoard"),b(n,"style",e[1]()),b(n,"class","dungeon svelte-a4uhtl")},m(r,a){R(r,n,a),u(n,t),o||(s=P(t,"click",e[0]),o=!0)},p:me,i:me,o:me,d(r){r&&A(n),o=!1,s()}}}const _e=48;function as(e,n,t){let{state:o}=n,{debugMode:s}=n,r,a;a=window.innerHeight,r=document.getElementById("footer").offsetHeight,Rt(()=>{const p=new Image;p.src=_o;const h=new Image;h.src=Do,setInterval(()=>i(p,h),10)});const i=(p,h)=>{if(!o||!document)return;const C=document.getElementById("gameBoard"),T=C.getContext("2d");T.clearRect(0,0,C.width,C.height),T.fillStyle="black",T.fillRect(0,0,C.width,C.height),Zo(T,p,_e,o,s),Jo(T,p,_e,o),jo(T,p,_e,o,s),Go(T,h,_e,o,s),Lo(T,h,_e,o)},l=p=>{Oo(p,_e,o)},f=()=>`max-height: ${a-r-20}px; max-width: ${_e*40}`;return e.$$set=p=>{"state"in p&&t(2,o=p.state),"debugMode"in p&&t(3,s=p.debugMode)},[l,f,o,s]}class is extends pt{constructor(n){super(),ht(this,n,as,rs,ze,{state:2,debugMode:3})}}function ls(e){let n;return{c(){n=I("None (0)")},l(t){n=E(t,"None (0)")},m(t,o){R(t,n,o)},p:me,d(t){t&&A(n)}}}function us(e){let n=e[0].armour.name+"",t,o,s=e[0].armour.defense+"",r,a;return{c(){t=I(n),o=I(" ("),r=I(s),a=I(")")},l(i){t=E(i,n),o=E(i," ("),r=E(i,s),a=E(i,")")},m(i,l){R(i,t,l),R(i,o,l),R(i,r,l),R(i,a,l)},p(i,l){l&1&&n!==(n=i[0].armour.name+"")&&z(t,n),l&1&&s!==(s=i[0].armour.defense+"")&&z(r,s)},d(i){i&&(A(t),A(o),A(r),A(a))}}}function As(e){let n;return{c(){n=I("None (0)")},l(t){n=E(t,"None (0)")},m(t,o){R(t,n,o)},p:me,d(t){t&&A(n)}}}function ds(e){let n=e[0].shield.name+"",t,o,s=e[0].shield.dice+"",r,a;return{c(){t=I(n),o=I(" ("),r=I(s),a=I(")")},l(i){t=E(i,n),o=E(i," ("),r=E(i,s),a=E(i,")")},m(i,l){R(i,t,l),R(i,o,l),R(i,r,l),R(i,a,l)},p(i,l){l&1&&n!==(n=i[0].shield.name+"")&&z(t,n),l&1&&s!==(s=i[0].shield.dice+"")&&z(r,s)},d(i){i&&(A(t),A(o),A(r),A(a))}}}function cs(e){let n,t,o,s=e[0].name+"",r,a,i,l,f=e[0].level+"",p,h,C=e[0].experience+"",T,se,et,re,he,V=e[0].health+"",$e,Ye,j,ae,He=e[0].actions+"",Oe,ve,G,tt,Ie=e[0].movement+"",x,Ee,$,rt="Equipment:",Fe,Y,q,ke,Z=e[0].weapon.name+"",We,qe,ie=e[0].weapon.dice+"",ee,nt,Ke,H,ye,le,ue,Xe;function Le(k,v){return k[0].armour!=null?us:ls}let te=Le(e),K=te(e);function ot(k,v){return k[0].shield!=null?ds:As}let ce=ot(e),L=ce(e);return{c(){n=d("div"),t=d("div"),o=d("b"),r=I(s),a=I(" -"),i=y(),l=d("b"),p=I(f),h=I(" ("),T=I(C),se=I(")"),et=y(),re=d("span"),he=I("HP: "),$e=I(V),Ye=y(),j=d("span"),ae=I("Actions: "),Oe=I(He),ve=y(),G=d("span"),tt=I("Moves: "),x=I(Ie),Ee=y(),$=d("span"),$.textContent=rt,Fe=y(),Y=d("div"),q=d("span"),ke=I("🗡️  "),We=I(Z),qe=I(" ("),ee=I(ie),nt=I(")"),Ke=y(),H=d("span"),ye=I(`🧱
        `),K.c(),le=y(),ue=d("span"),Xe=I(`🛡️
            `),L.c(),this.h()},l(k){n=c(k,"DIV",{class:!0,style:!0});var v=m(n);t=c(v,"DIV",{class:!0});var fe=m(t);o=c(fe,"B",{class:!0});var Ae=m(o);r=E(Ae,s),a=E(Ae," -"),Ae.forEach(A),i=Q(fe),l=c(fe,"B",{class:!0});var we=m(l);p=E(we,f),h=E(we," ("),T=E(we,C),se=E(we,")"),we.forEach(A),fe.forEach(A),et=Q(v),re=c(v,"SPAN",{class:!0});var Ve=m(re);he=E(Ve,"HP: "),$e=E(Ve,V),Ve.forEach(A),Ye=Q(v),j=c(v,"SPAN",{class:!0});var F=m(j);ae=E(F,"Actions: "),Oe=E(F,He),F.forEach(A),ve=Q(v),G=c(v,"SPAN",{class:!0});var Qe=m(G);tt=E(Qe,"Moves: "),x=E(Qe,Ie),Qe.forEach(A),Ee=Q(v),$=c(v,"SPAN",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-1ue18fw"&&($.textContent=rt),Fe=Q(v),Y=c(v,"DIV",{class:!0});var X=m(Y);q=c(X,"SPAN",{class:!0});var Ce=m(q);ke=E(Ce,"🗡️  "),We=E(Ce,Z),qe=E(Ce," ("),ee=E(Ce,ie),nt=E(Ce,")"),Ce.forEach(A),Ke=Q(X),H=c(X,"SPAN",{class:!0});var je=m(H);ye=E(je,`🧱
        `),K.l(je),je.forEach(A),le=Q(X),ue=c(X,"SPAN",{class:!0});var be=m(ue);Xe=E(be,`🛡️
            `),L.l(be),be.forEach(A),X.forEach(A),v.forEach(A),this.h()},h(){b(o,"class","svelte-1jzprgd"),b(l,"class","svelte-1jzprgd"),b(t,"class","hero-title svelte-1jzprgd"),b(re,"class","svelte-1jzprgd"),b(j,"class","svelte-1jzprgd"),b(G,"class","svelte-1jzprgd"),b($,"class","svelte-1jzprgd"),b(q,"class","svelte-1jzprgd"),b(H,"class","svelte-1jzprgd"),b(ue,"class","svelte-1jzprgd"),b(Y,"class","equipment"),b(n,"class","hero-card svelte-1jzprgd"),vn(n,"background-color",e[0].colour)},m(k,v){R(k,n,v),u(n,t),u(t,o),u(o,r),u(o,a),u(t,i),u(t,l),u(l,p),u(l,h),u(l,T),u(l,se),u(n,et),u(n,re),u(re,he),u(re,$e),u(n,Ye),u(n,j),u(j,ae),u(j,Oe),u(n,ve),u(n,G),u(G,tt),u(G,x),u(n,Ee),u(n,$),u(n,Fe),u(n,Y),u(Y,q),u(q,ke),u(q,We),u(q,qe),u(q,ee),u(q,nt),u(Y,Ke),u(Y,H),u(H,ye),K.m(H,null),u(Y,le),u(Y,ue),u(ue,Xe),L.m(ue,null)},p(k,[v]){v&1&&s!==(s=k[0].name+"")&&z(r,s),v&1&&f!==(f=k[0].level+"")&&z(p,f),v&1&&C!==(C=k[0].experience+"")&&z(T,C),v&1&&V!==(V=k[0].health+"")&&z($e,V),v&1&&He!==(He=k[0].actions+"")&&z(Oe,He),v&1&&Ie!==(Ie=k[0].movement+"")&&z(x,Ie),v&1&&Z!==(Z=k[0].weapon.name+"")&&z(We,Z),v&1&&ie!==(ie=k[0].weapon.dice+"")&&z(ee,ie),te===(te=Le(k))&&K?K.p(k,v):(K.d(1),K=te(k),K&&(K.c(),K.m(H,null))),ce===(ce=ot(k))&&L?L.p(k,v):(L.d(1),L=ce(k),L&&(L.c(),L.m(ue,null))),v&1&&vn(n,"background-color",k[0].colour)},i:me,o:me,d(k){k&&A(n),K.d(),L.d()}}}function fs(e,n,t){let{hero:o}=n;return e.$$set=s=>{"hero"in s&&t(0,o=s.hero)},[o]}class Un extends pt{constructor(n){super(),ht(this,n,fs,cs,ze,{hero:0})}}function Bn(e,n,t){const o=e.slice();return o[3]=n[t],o[5]=t,o}function gs(e){let n,t,o,s;return t=new Un({props:{hero:e[3]}}),{c(){n=d("div"),ct(t.$$.fragment),o=y(),this.h()},l(r){n=c(r,"DIV",{class:!0});var a=m(n);ft(t.$$.fragment,a),o=Q(a),a.forEach(A),this.h()},h(){b(n,"class","not-current-actor svelte-izfxty")},m(r,a){R(r,n,a),gt(t,n,null),u(n,o),s=!0},p(r,a){const i={};a&1&&(i.hero=r[3]),t.$set(i)},i(r){s||(oe(t.$$.fragment,r),s=!0)},o(r){de(t.$$.fragment,r),s=!1},d(r){r&&A(n),mt(t)}}}function ms(e){let n,t,o,s;return t=new Un({props:{hero:e[3]}}),{c(){n=d("div"),ct(t.$$.fragment),o=y(),this.h()},l(r){n=c(r,"DIV",{class:!0});var a=m(n);ft(t.$$.fragment,a),o=Q(a),a.forEach(A),this.h()},h(){b(n,"class","is-current-actor svelte-izfxty")},m(r,a){R(r,n,a),gt(t,n,null),u(n,o),s=!0},p(r,a){const i={};a&1&&(i.hero=r[3]),t.$set(i)},i(r){s||(oe(t.$$.fragment,r),s=!0)},o(r){de(t.$$.fragment,r),s=!1},d(r){r&&A(n),mt(t)}}}function _n(e){let n,t,o,s;const r=[ms,gs],a=[];function i(l,f){return l[3]===l[0].currentActor?0:1}return n=i(e),t=a[n]=r[n](e),{c(){t.c(),o=pe()},l(l){t.l(l),o=pe()},m(l,f){a[n].m(l,f),R(l,o,f),s=!0},p(l,f){let p=n;n=i(l),n===p?a[n].p(l,f):(Ft(),de(a[p],1,1,()=>{a[p]=null}),Wt(),t=a[n],t?t.p(l,f):(t=a[n]=r[n](l),t.c()),oe(t,1),t.m(o.parentNode,o))},i(l){s||(oe(t),s=!0)},o(l){de(t),s=!1},d(l){l&&A(o),a[n].d(l)}}}function Dn(e){let n=e[1],t,o,s=_n(e);return{c(){s.c(),t=pe()},l(r){s.l(r),t=pe()},m(r,a){s.m(r,a),R(r,t,a),o=!0},p(r,a){a&2&&ze(n,n=r[1])?(Ft(),de(s,1,1,me),Wt(),s=_n(r),s.c(),oe(s,1),s.m(t.parentNode,t)):s.p(r,a)},i(r){o||(oe(s),o=!0)},o(r){de(s),o=!1},d(r){r&&A(t),s.d(r)}}}function ps(e){let n,t,o=kt(N(e[0])),s=[];for(let a=0;a<o.length;a+=1)s[a]=Dn(Bn(e,o,a));const r=a=>de(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();n=pe()},l(a){for(let i=0;i<s.length;i+=1)s[i].l(a);n=pe()},m(a,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(a,i);R(a,n,i),t=!0},p(a,[i]){if(i&3){o=kt(N(a[0]));let l;for(l=0;l<o.length;l+=1){const f=Bn(a,o,l);s[l]?(s[l].p(f,i),oe(s[l],1)):(s[l]=Dn(f),s[l].c(),oe(s[l],1),s[l].m(n.parentNode,n))}for(Ft(),l=o.length;l<s.length;l+=1)r(l);Wt()}},i(a){if(!t){for(let i=0;i<o.length;i+=1)oe(s[i]);t=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)de(s[i]);t=!1},d(a){a&&A(n),On(s,a)}}}function hs(e,n,t){let{state:o}=n,s=!1;Rt(()=>{r(),setInterval(r,100)});const r=()=>{t(1,s=!s)};return e.$$set=a=>{"state"in a&&t(0,o=a.state)},[o,s]}class vs extends pt{constructor(n){super(),ht(this,n,hs,ps,ze,{state:0})}}function Rn(e,n,t){const o=e.slice();return o[2]=n[t],o[4]=t,o}function Is(e){let n,t,o=e[2]+"",s;return{c(){n=d("p"),t=I(">"),s=I(o),this.h()},l(r){n=c(r,"P",{class:!0});var a=m(n);t=E(a,">"),s=E(a,o),a.forEach(A),this.h()},h(){b(n,"class","svelte-1xp6uq")},m(r,a){R(r,n,a),u(n,t),u(n,s)},p(r,a){a&1&&o!==(o=r[2]+"")&&z(s,o)},d(r){r&&A(n)}}}function Tn(e){let n,t=e[4]<25&&Is(e);return{c(){t&&t.c(),n=pe()},l(o){t&&t.l(o),n=pe()},m(o,s){t&&t.m(o,s),R(o,n,s)},p(o,s){o[4]<25&&t.p(o,s)},d(o){o&&A(n),t&&t.d(o)}}}function Hn(e){let n,t=kt(e[0]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Tn(Rn(e,t,s));return{c(){for(let s=0;s<o.length;s+=1)o[s].c();n=pe()},l(s){for(let r=0;r<o.length;r+=1)o[r].l(s);n=pe()},m(s,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,r);R(s,n,r)},p(s,r){if(r&1){t=kt(s[0]);let a;for(a=0;a<t.length;a+=1){const i=Rn(s,t,a);o[a]?o[a].p(i,r):(o[a]=Tn(i),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].d(1);o.length=t.length}},d(s){s&&A(n),On(o,s)}}}function Es(e){let n,t=e[0],o=Hn(e);return{c(){n=d("div"),o.c(),this.h()},l(s){n=c(s,"DIV",{class:!0});var r=m(n);o.l(r),r.forEach(A),this.h()},h(){b(n,"class","log svelte-1xp6uq")},m(s,r){R(s,n,r),o.m(n,null)},p(s,[r]){r&1&&ze(t,t=s[0])?(o.d(1),o=Hn(s),o.c(),o.m(n,null)):o.p(s,r)},i:me,o:me,d(s){s&&A(n),o.d(s)}}}function ks(e,n,t){let o=[],{state:s}=n;return Rt(()=>{setInterval(()=>{t(0,o=s.actionLog)},1e3)}),e.$$set=r=>{"state"in r&&t(1,s=r.state)},[o,s]}class ys extends pt{constructor(n){super(),ht(this,n,ks,Es,ze,{state:1})}}function Qs(e){let n,t,o,s,r,a,i,l,f,p,h,C,T,se,et="UL",re,he,V,$e="U",Ye,j,ae,He="UR",Oe,ve,G,tt="Next",Ie,x,Ee,$,rt="L",Fe,Y,q,ke,Z,We="R",qe,ie,ee,nt="Search",Ke,H,ye,le,ue="DL",Xe,Le,te,K="D",ot,ce,L,k="DR",v,fe,Ae,we="Pick lock",Ve,F,Qe,X,Ce="Save",je,be,Ze,Jt="Load",Ot,at,Je,St="Debug",Lt,it,Se,zt="End action",wt,Be,Pt,It,Nt,en;o=new vs({props:{state:e[0]}});function Gn(_){e[3](_)}function $n(_){e[4](_)}let Mt={};e[0]!==void 0&&(Mt.state=e[0]),e[1]!==void 0&&(Mt.debugMode=e[1]),r=new is({props:Mt}),xt.push(()=>Gt(r,"state",Gn)),xt.push(()=>Gt(r,"debugMode",$n));function Yn(_){e[7](_)}let tn={};return e[0]!==void 0&&(tn.state=e[0]),Be=new ys({props:tn}),xt.push(()=>Gt(Be,"state",Yn)),{c(){n=d("div"),t=d("div"),ct(o.$$.fragment),s=y(),ct(r.$$.fragment),l=y(),f=d("div"),p=d("div"),h=d("table"),C=d("tr"),T=d("td"),se=d("button"),se.textContent=et,re=y(),he=d("td"),V=d("button"),V.textContent=$e,Ye=y(),j=d("td"),ae=d("button"),ae.textContent=He,Oe=y(),ve=d("td"),G=d("button"),G.textContent=tt,Ie=y(),x=d("tr"),Ee=d("td"),$=d("button"),$.textContent=rt,Fe=y(),Y=d("td"),q=y(),ke=d("td"),Z=d("button"),Z.textContent=We,qe=y(),ie=d("td"),ee=d("button"),ee.textContent=nt,Ke=y(),H=d("tr"),ye=d("td"),le=d("button"),le.textContent=ue,Xe=y(),Le=d("td"),te=d("button"),te.textContent=K,ot=y(),ce=d("td"),L=d("button"),L.textContent=k,v=y(),fe=d("td"),Ae=d("button"),Ae.textContent=we,Ve=y(),F=d("tr"),Qe=d("td"),X=d("button"),X.textContent=Ce,je=y(),be=d("td"),Ze=d("button"),Ze.textContent=Jt,Ot=y(),at=d("td"),Je=d("button"),Je.textContent=St,Lt=y(),it=d("td"),Se=d("button"),Se.textContent=zt,wt=y(),ct(Be.$$.fragment),this.h()},l(_){n=c(_,"DIV",{class:!0});var J=m(n);t=c(J,"DIV",{class:!0});var lt=m(t);ft(o.$$.fragment,lt),lt.forEach(A),s=Q(J),ft(r.$$.fragment,J),J.forEach(A),l=Q(_),f=c(_,"DIV",{class:!0,id:!0});var Pe=m(f);p=c(Pe,"DIV",{class:!0});var ut=m(p);h=c(ut,"TABLE",{});var Ne=m(h);C=c(Ne,"TR",{});var Me=m(C);T=c(Me,"TD",{});var nn=m(T);se=c(nn,"BUTTON",{"data-svelte-h":!0}),U(se)!=="svelte-fw3uxo"&&(se.textContent=et),nn.forEach(A),re=Q(Me),he=c(Me,"TD",{});var on=m(he);V=c(on,"BUTTON",{"data-svelte-h":!0}),U(V)!=="svelte-1jeoia6"&&(V.textContent=$e),on.forEach(A),Ye=Q(Me),j=c(Me,"TD",{});var sn=m(j);ae=c(sn,"BUTTON",{"data-svelte-h":!0}),U(ae)!=="svelte-1p8c8vc"&&(ae.textContent=He),sn.forEach(A),Oe=Q(Me),ve=c(Me,"TD",{});var rn=m(ve);G=c(rn,"BUTTON",{"data-svelte-h":!0}),U(G)!=="svelte-1rtxc14"&&(G.textContent=tt),rn.forEach(A),Me.forEach(A),Ie=Q(Ne),x=c(Ne,"TR",{});var xe=m(x);Ee=c(xe,"TD",{});var an=m(Ee);$=c(an,"BUTTON",{"data-svelte-h":!0}),U($)!=="svelte-10dnpu6"&&($.textContent=rt),an.forEach(A),Fe=Q(xe),Y=c(xe,"TD",{}),m(Y).forEach(A),q=Q(xe),ke=c(xe,"TD",{});var ln=m(ke);Z=c(ln,"BUTTON",{"data-svelte-h":!0}),U(Z)!=="svelte-12287ni"&&(Z.textContent=We),ln.forEach(A),qe=Q(xe),ie=c(xe,"TD",{});var un=m(ie);ee=c(un,"BUTTON",{"data-svelte-h":!0}),U(ee)!=="svelte-cps1bu"&&(ee.textContent=nt),un.forEach(A),xe.forEach(A),Ke=Q(Ne),H=c(Ne,"TR",{});var Ue=m(H);ye=c(Ue,"TD",{});var An=m(ye);le=c(An,"BUTTON",{"data-svelte-h":!0}),U(le)!=="svelte-1ji074i"&&(le.textContent=ue),An.forEach(A),Xe=Q(Ue),Le=c(Ue,"TD",{});var dn=m(Le);te=c(dn,"BUTTON",{"data-svelte-h":!0}),U(te)!=="svelte-li5tq6"&&(te.textContent=K),dn.forEach(A),ot=Q(Ue),ce=c(Ue,"TD",{});var cn=m(ce);L=c(cn,"BUTTON",{"data-svelte-h":!0}),U(L)!=="svelte-3esmwe"&&(L.textContent=k),cn.forEach(A),v=Q(Ue),fe=c(Ue,"TD",{});var fn=m(fe);Ae=c(fn,"BUTTON",{"data-svelte-h":!0}),U(Ae)!=="svelte-sacog4"&&(Ae.textContent=we),fn.forEach(A),Ue.forEach(A),Ve=Q(Ne),F=c(Ne,"TR",{});var Ge=m(F);Qe=c(Ge,"TD",{});var gn=m(Qe);X=c(gn,"BUTTON",{"data-svelte-h":!0}),U(X)!=="svelte-1vr5zyk"&&(X.textContent=Ce),gn.forEach(A),je=Q(Ge),be=c(Ge,"TD",{});var mn=m(be);Ze=c(mn,"BUTTON",{"data-svelte-h":!0}),U(Ze)!=="svelte-1m2jkw7"&&(Ze.textContent=Jt),mn.forEach(A),Ot=Q(Ge),at=c(Ge,"TD",{});var pn=m(at);Je=c(pn,"BUTTON",{"data-svelte-h":!0}),U(Je)!=="svelte-1vbubr3"&&(Je.textContent=St),pn.forEach(A),Lt=Q(Ge),it=c(Ge,"TD",{});var hn=m(it);Se=c(hn,"BUTTON",{"data-svelte-h":!0}),U(Se)!=="svelte-1ied6ec"&&(Se.textContent=zt),hn.forEach(A),Ge.forEach(A),Ne.forEach(A),ut.forEach(A),wt=Q(Pe),ft(Be.$$.fragment,Pe),Pe.forEach(A),this.h()},h(){b(t,"class","characterSide svelte-aelzqd"),b(n,"class","container svelte-aelzqd"),b(p,"class","commands svelte-aelzqd"),b(f,"class","container svelte-aelzqd"),b(f,"id","footer")},m(_,J){R(_,n,J),u(n,t),gt(o,t,null),u(n,s),gt(r,n,null),R(_,l,J),R(_,f,J),u(f,p),u(p,h),u(h,C),u(C,T),u(T,se),u(C,re),u(C,he),u(he,V),u(C,Ye),u(C,j),u(j,ae),u(C,Oe),u(C,ve),u(ve,G),u(h,Ie),u(h,x),u(x,Ee),u(Ee,$),u(x,Fe),u(x,Y),u(x,q),u(x,ke),u(ke,Z),u(x,qe),u(x,ie),u(ie,ee),u(h,Ke),u(h,H),u(H,ye),u(ye,le),u(H,Xe),u(H,Le),u(Le,te),u(H,ot),u(H,ce),u(ce,L),u(H,v),u(H,fe),u(fe,Ae),u(h,Ve),u(h,F),u(F,Qe),u(Qe,X),u(F,je),u(F,be),u(be,Ze),u(F,Ot),u(F,at),u(at,Je),u(F,Lt),u(F,it),u(it,Se),u(f,wt),gt(Be,f,null),It=!0,Nt||(en=[P(window,"keydown",Wn(e[2])),P(se,"click",function(){S(D("UL",e[0]))&&D("UL",e[0]).apply(this,arguments)}),P(V,"click",function(){S(D("U",e[0]))&&D("U",e[0]).apply(this,arguments)}),P(ae,"click",function(){S(D("UR",e[0]))&&D("UR",e[0]).apply(this,arguments)}),P(G,"click",function(){S(Bt(e[0]))&&Bt(e[0]).apply(this,arguments)}),P($,"click",function(){S(D("L",e[0]))&&D("L",e[0]).apply(this,arguments)}),P(Z,"click",function(){S(D("R",e[0]))&&D("R",e[0]).apply(this,arguments)}),P(ee,"click",function(){S(bt(e[0]))&&bt(e[0]).apply(this,arguments)}),P(le,"click",function(){S(D("DL",e[0]))&&D("DL",e[0]).apply(this,arguments)}),P(te,"click",function(){S(D("D",e[0]))&&D("D",e[0]).apply(this,arguments)}),P(L,"click",function(){S(D("DR",e[0]))&&D("DR",e[0]).apply(this,arguments)}),P(Ae,"click",function(){S(Ct(e[0]))&&Ct(e[0]).apply(this,arguments)}),P(X,"click",function(){S(yn(e[0]))&&yn(e[0]).apply(this,arguments)}),P(Ze,"click",e[5]),P(Je,"click",e[6]),P(Se,"click",function(){S(Qn(e[0]))&&Qn(e[0]).apply(this,arguments)})],Nt=!0)},p(_,[J]){e=_;const lt={};J&1&&(lt.state=e[0]),o.$set(lt);const Pe={};!a&&J&1&&(a=!0,Pe.state=e[0],Ut(()=>a=!1)),!i&&J&2&&(i=!0,Pe.debugMode=e[1],Ut(()=>i=!1)),r.$set(Pe);const ut={};!Pt&&J&1&&(Pt=!0,ut.state=e[0],Ut(()=>Pt=!1)),Be.$set(ut)},i(_){It||(oe(o.$$.fragment,_),oe(r.$$.fragment,_),oe(Be.$$.fragment,_),It=!0)},o(_){de(o.$$.fragment,_),de(r.$$.fragment,_),de(Be.$$.fragment,_),It=!1},d(_){_&&(A(n),A(l),A(f)),mt(o),mt(r),mt(Be),Nt=!1,Fn(en)}}}function Cs(e,n,t){let o=co(),s=!1;Rt(()=>{setInterval(()=>Bo(o),1e3)});function r(h){switch(h.key){case"6":case"d":D("R",o);break;case"9":case"e":D("UR",o);break;case"8":case"w":D("U",o);break;case"7":case"q":D("UL",o);break;case"4":case"a":D("L",o);break;case"1":case"z":D("DL",o);break;case"2":case"x":D("D",o);break;case"3":case"c":D("DR",o);break;case"0":case" ":Bt(o);break;case"-":case"r":Ct(o);break;case"+":case"f":bt(o);break}}function a(h){o=h,t(0,o)}function i(h){s=h,t(1,s)}const l=()=>t(0,o=Ao()),f=()=>t(1,s=!s);function p(h){o=h,t(0,o)}return[o,s,r,a,i,l,f,p]}class _s extends pt{constructor(n){super(),ht(this,n,Cs,Qs,ze,{})}}export{_s as component};
