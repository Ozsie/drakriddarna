import{s as Oe,n as ne,o as xe,b as Wt,f as $t,r as Bn,i as G}from"../chunks/scheduler.ba2ce6c0.js";import{S as ze,i as Xe,g as p,h,j as T,f as E,k as S,a as V,x as u,y as O,e as Ke,z as pn,m as xt,n as zt,o as hn,A as Xt,r as rt,s as w,u as At,c as H,B as P,v as ct,C as En,d as dt,t as gt,w as ut}from"../chunks/index.92acf144.js";function Jt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var _=(e=>(e.Red="#CD5C5C",e.Blue="#1E90FF",e.Green="#90EE90",e.Yellow="#FCFF4F",e))(_||{}),M=(e=>(e.ORCH="Orch",e.TROLL="Troll",e.GREEN_DARK_LORD="Green Dark Lord",e.BLUE_DARK_LORD="Blue Dark Lord",e.RED_DARK_LORD="Red Dark Lord",e.YELLOW_DARK_LORD="Yellow Dark Lord",e))(M||{}),F=(e=>(e.APPRENTICE="Apprentice",e.KNIGHT="Knight",e.HERO="Hero",e.LORD="Lord",e.MASTER="Master",e))(F||{}),X=(e=>(e[e.KILL_ALL=0]="KILL_ALL",e[e.KILL_ALL_OF_TYPE=1]="KILL_ALL_OF_TYPE",e[e.REACH_CELL=2]="REACH_CELL",e[e.OPEN_DOOR=3]="OPEN_DOOR",e[e.KILL_AT_LEAST=4]="KILL_AT_LEAST",e))(X||{}),Ee=(e=>(e.EQUIPMENT="Equipment",e.MAGIC_ITEM="Magic Item",e.DOOR="Door",e.NOTE="Note",e))(Ee||{}),b=(e=>(e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.DOWN="Down",e))(b||{});const Vt=[{name:"Sword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Two-handed Sword",range:1,dice:4,twoHanded:!0,useHearHeroes:!1,amountInDeck:1},{name:"Halberd",range:2,dice:3,twoHanded:!0,useHearHeroes:!0,amountInDeck:1}],Zt=[{name:"Orch Sword/Bow",range:99,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Troll Club",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4}],jt=[{name:"Orch Mail",defense:0,magicProtection:!1,amountInDeck:4},{name:"Troll Skin",defense:1,magicProtection:!1,amountInDeck:4}],Cn="0",vn="@",Ye=" ",ft="#",In=(e,t,o,n)=>({type:e,name:t,position:{x:o,y:n},found:!1}),Y=(e,t,o)=>({side:e,x:t,y:o,locked:!1,trapped:!1,open:!1,hidden:!1,trapAttacks:0}),en=(e,t,o)=>({...Y(e,t,o),hidden:!0}),J=(e,t,o,n)=>{const s=Object.values(_).indexOf(t),l=Object.keys(_)[s];let r=F.LORD,m=2,g=2,f=4,I=4,k=4,L=Zt[0],N=jt[0];switch(e){case M.ORCH:{r=F.APPRENTICE,g=0,f=2,I=2,k=1;break}case M.TROLL:{r=F.KNIGHT,g=1,f=3,I=3,k=2,L=Zt[1],N=jt[1];break}}return e===M.YELLOW_DARK_LORD&&(m=3),{type:e,level:r,colour:t,actions:m,defense:g,health:f,maxHealth:I,experience:k,name:e+" ("+l+")",movement:3,position:{x:o,y:n},weapon:L,armour:N}},yn={name:"The Three Gates of Power",beaten:!1,winConditions:[{type:X.KILL_ALL,fulfilled:!1},{type:X.OPEN_DOOR,targetCell:{x:15,y:1},fulfilled:!1}],startingPositions:[{x:1,y:4},{x:0,y:3},{x:0,y:4},{x:0,y:5}],discoveredRooms:["A"],layout:{grid:["            EEEE","            EEEE","         DDDEEEE","AAA   CCCC","AAABBBCCCC   GGG","AAA   CCCCFFFGGG","      CCCC   GGG","      CCCC","      CCCCHHHIII","             III","             III"],doors:[Y(b.RIGHT,2,4),Y(b.RIGHT,5,4),Y(b.RIGHT,9,5),Y(b.RIGHT,12,5),Y(b.RIGHT,9,8),Y(b.RIGHT,12,8),Y(b.RIGHT,11,2),en(b.UP,9,3),en(b.RIGHT,15,1)],monsters:[J(M.ORCH,_.Blue,9,7),J(M.ORCH,_.Red,12,8),J(M.TROLL,_.Red,15,1),J(M.TROLL,_.Yellow,13,6)],secrets:[{type:Ee.EQUIPMENT,position:{x:9,y:4},found:!1,name:"Random Equipment"},{type:Ee.EQUIPMENT,position:{x:12,y:0},found:!1,name:"Random Equipment"},{type:Ee.MAGIC_ITEM,position:{x:15,y:5},found:!1,name:"Random Magic Item",item:{name:"Healing Herbs"}},{type:Ee.EQUIPMENT,position:{x:15,y:9},found:!1,name:"Random Equipment"}],notes:[{message:"Beyond stone and fire you shall find the Dread tunnel, the road to the Ice Dragons treasure.",position:{x:2,y:4}},{message:"The Gate of Water. <There is an image of a sea dragon under the text>",position:{x:9,y:8}},{message:"The Gate of Air. <There is an image of a pegasus under the text>",position:{x:9,y:5}},{message:"The Gate of Fire. <There is an image of a hippogriph under the text>",position:{x:9,y:3}}]},killCount:0},tn={name:"Troll cave",beaten:!1,winConditions:[{type:X.KILL_ALL,fulfilled:!1}],nextDungeon:yn,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A"],layout:{grid:["     ######","     #CCCC#","     #CCCC#","     #CCCC#","     ##E###","      #E#  ","      #E## ","##### #BB# ","#AAA###BB# ","#AAADDDBB# ","#AAA###BB# ","##### #### "],doors:[Y(b.RIGHT,3,9),Y(b.RIGHT,6,9),Y(b.UP,7,7),Y(b.UP,7,4)],monsters:[J(M.ORCH,_.Green,6,9),J(M.ORCH,_.Yellow,8,10),J(M.ORCH,_.Red,7,5),J(M.ORCH,_.Red,9,3),J(M.TROLL,_.Green,6,1)],secrets:[In(Ee.NOTE,"Welcome to Drakriddarna",2,9)],notes:[]},killCount:0},nn=e=>{v(e,"Game saved."),localStorage.setItem("state",JSON.stringify(e))},kn=()=>{const e=localStorage.getItem("state");if(e){const t=JSON.parse(e);return t.currentActor=t.heroes.find(o=>{var n;return o.name===((n=t.currentActor)==null?void 0:n.name)}),v(t,"Game loaded."),t}},Tn=()=>{const e=An;return cn(e,tn),{heroes:e,dungeon:tn,currentActor:e[0],actionLog:["Game Initialised","Each character has 2 actions. Move, Attack, Search or Pick Lock.","Each character can move 3 steps per action.","If another action is performed before moving 3 steps, the move is finished and both actions are consumed.","The rules of this game are harsh and unfair."]}},Ge=(e,t)=>(Vt[0].amountInDeck--,{name:e,actions:2,movement:3,defense:0,level:F.APPRENTICE,health:7,maxHealth:7,colour:t,experience:0,position:{x:-1,y:-1},weapon:Vt[0]}),An=[Ge("Fearik",_.Yellow),Ge("Helbran",_.Red),Ge("Siedel",_.Green),Ge("Wulf",_.Blue)],cn=(e,t)=>{e.forEach((o,n)=>o.position=t.startingPositions[n])},he=e=>{let t=[];for(let o=0;o<e.length;o++)t.push(e[o]);return t},Bt=(e,t,o)=>e.dungeon.layout.monsters.some(n=>n.position.x===t&&n.position.y===o&&n.health>0),pt=(e,t,o)=>e.heroes.some(n=>n.position.x===t&&n.position.y===o),Fe=e=>{e.movement===0&&(e.actions--,e.actions!==0&&(e.movement=3)),e.actions==0&&(e.movement=0)},Q=(e,t)=>{const o=t.currentActor;if(!o||o.actions===0)return;let n=o.position.x,s=o.position.y;switch(e){case"UL":n=o.position.x-1,s=o.position.y-1;break;case"U":s=o.position.y-1;break;case"UR":n=o.position.x+1,s=o.position.y-1;break;case"L":n=o.position.x-1;break;case"R":n=o.position.x+1;break;case"DL":n=o.position.x-1,s=o.position.y+1;break;case"D":s=o.position.y+1;break;case"DR":n=o.position.x+1,s=o.position.y+1;break}const l=pt(t,n,s),r=!Je(t.dungeon.layout,n,s),m=Bt(t,n,s);if(!l&&!r){const g=ht(t.dungeon,n,s);g?g&&(m?gn(o,t,n,s):dn(o,t,n,s,1)):Qn(t,o,n,s)&&_e(o,t,n,s)}else v(t,`${o.name} could not make that move`);Fe(o)},dn=(e,t,o,n,s)=>{e.position.x=o,e.position.y=n;const l=t.dungeon.layout.notes.find(m=>sn(m.position,e.position));l&&(t.dungeon.layout.doors.some(g=>g.hidden&&sn(l.position,{x:g.x,y:g.y}))||v(t,`${e.name} reads: ${l.message}`)),t.dungeon.layout.monsters.some(m=>Et(e.position,m.position.x,m.position.y))?(v(t,`${e.name} walked by a monster and lost the momentum`),e.movement=0):e.movement-=s},_e=(e,t,o,n)=>{const s=Ve(t.dungeon.layout.grid,o,n);s&&t.dungeon.discoveredRooms.push(s),dn(e,t,e.position.x,e.position.y,1),v(t,`${e.name} opened a door`)},gn=(e,t,o,n)=>{var l;if(e.actions===1&&e.movement!==3){v(t,`${e.name} has no actions left to attack`);return}const s=t.dungeon.layout.monsters.find(r=>r.position.x===o&&r.position.y===n);if(s){const r=((l=s.armour)==null?void 0:l.defense)??s.defense,m=Se(e.level,e.weapon.dice),g=Math.max(m-r,0);v(t,`${e.name} attacked ${s.name} with ${e.weapon.name} for ${Ct(g,m,s)}`),s.health-=g,s.health<=0&&(t.dungeon.layout.monsters=t.dungeon.layout.monsters.filter(f=>f!=s),v(t,`${e.name} killed ${s.name}`),t.dungeon.killCount++,e.experience+=s.experience),e.actions>1&&e.movement<3?e.actions-=2:e.actions--}},Se=(e,t)=>{let o=[];for(let n=0;n<t;n++)o.push(Math.floor(Math.random()*6)+1);switch(e){case F.APPRENTICE:o=o.filter(n=>n===5);break;case F.KNIGHT:case F.HERO:o=o.filter(n=>n>=4);break;case F.LORD:case F.MASTER:o=o.filter(n=>n>=3);break}return o.length},qe=e=>{const t=e.currentActor;if(!t)return;if(!$e(t)){v(e,`${t.name} has no actions left to pick lock`);return}const o=e.dungeon.layout.doors.find(n=>n.x===t.position.x&&n.y===t.position.y);o&&o.locked&&(Se(t.level,1)>=1?(o.locked=!1,v(e,`${t.name} managed to pick the lock`)):v(e,`${t.name} failed to pick the lock`),t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.movement=3,t.actions==0&&(t.movement=0))},We=e=>{const t=e.currentActor;if(!t)return;if(!$e(t)){v(e,`${t.name} has no actions left to search`);return}const o=Se(t.level,1);if(o>=1){const n=e.dungeon.layout.doors.find(r=>r.hidden&&r.x===t.position.x&&r.y===t.position.y);n&&(v(e,`${t.name} searched (${o}) and found a hidden door`),n.hidden=!1);const s=e.dungeon.layout.doors.find(r=>r.trapped&&r.x===t.position.x&&t.position.y);s&&!n&&(v(e,`${t.name} searched (${o}) and found a trap in a door`),s.trapped=!1);const l=e.dungeon.layout.secrets.find(r=>Et(r.position,t.position.x,t.position.y));l&&!s&&!n&&v(e,`${t.name} searched (${o}) and found ${l.name}`),!n&&!s&&!l&&v(e,`${t.name} searched but found nothing`)}else v(e,`${t.name} searched but found nothing`);t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.actions==0&&(t.movement=0)},mt=e=>{if(bn(e),e.currentActor!==void 0){v(e,`${e.currentActor.name} ended their turn`);let o=e.heroes.indexOf(e.currentActor)+1;o===e.heroes.length&&(Dn(e),o=0),e.currentActor.actions=2,e.currentActor.movement=3,e.currentActor=e.heroes[o],v(e,`${e.currentActor.name} started their turn`)}},bn=e=>{e.dungeon.winConditions.forEach(t=>{var o;switch(t.type){case X.KILL_ALL:{const n=e.dungeon.layout.monsters.map(s=>s.health).reduce((s,l)=>s+l,0);t.fulfilled=n<=0;break}case X.REACH_CELL:{t.fulfilled=e.heroes.some(n=>{var s;return n.position.x===((s=t.targetCell)==null?void 0:s.x)&&n.position.y===t.targetCell.y});break}case X.KILL_ALL_OF_TYPE:{t.fulfilled=e.dungeon.layout.monsters.filter(n=>n.type===t.targetMonsterType).some(n=>n.health>0);break}case X.OPEN_DOOR:{t.fulfilled=((o=e.dungeon.layout.doors.find(n=>{var s,l;return n.x===((s=t.targetCell)==null?void 0:s.x)&&n.y===((l=t.targetCell)==null?void 0:l.y)}))==null?void 0:o.open)??!1;break}case X.KILL_AT_LEAST:{t.fulfilled=(t.killMinCount?t.killMinCount:0)<=e.dungeon.killCount;break}}}),e.dungeon.beaten=e.dungeon.winConditions.map(t=>t.fulfilled).reduce((t,o)=>t&&o,!0),e.dungeon.beaten&&(v(e,"All win conditions have been fulfilled"),v(e,`You have cleared ${e.dungeon.name}`))},un=(e,t,o)=>{const n=Se(F.APPRENTICE,e.trapAttacks),s=Math.max(n-t.defense,0);v(o,`Door was trapped. ${t.name} took ${Ct(s,n,t)}`),t.health-=s},Qn=(e,t,o,n)=>{const s=e.dungeon.layout.doors.find(l=>l.x===t.position.x&&l.y===t.position.y);if(s&&!s.locked){const l=Rn(t.position.x,t.position.y,o,n);if(s.side===l)return s.open=!0,s.trapped&&un(s,t,e),!0}return s&&s.locked&&v(e,"Door is locked"),!1},Rn=(e,t,o,n)=>{if(e===o){if(t>n)return b.UP;if(t<n)return b.DOWN}if(t===n){if(e>o)return b.LEFT;if(e<o)return b.RIGHT}},Je=(e,t,o)=>{let n=!0;if(t<0||t>=e.grid[0].length||o<0||o>=e.grid.length)n=!1;else{const s=Ve(e.grid,t,o);(s===Cn||s===vn||s===Ye||s===ft)&&(n=!1)}return n},ht=(e,t,o)=>{const n=Ve(e.layout.grid,t,o);return n?e.discoveredRooms.includes(n):!1},Ve=(e,t,o)=>{let n;return e.forEach((s,l)=>{he(s).forEach((r,m)=>{l===o&&m===t&&(n=r)})}),n},Et=(e,t,o)=>e.x===t&&e.y===o||e.x===t-1&&e.y===o||e.x===t-1&&e.y===o-1||e.x===t&&e.y===o-1||e.x===t+1&&e.y===o-1||e.x===t+1&&e.y===o||e.x===t+1&&e.y===o+1||e.x===t&&e.y===o+1||e.x===t-1&&e.y===o+1,Dn=e=>{const t=e.dungeon.layout.monsters.filter(o=>{const n=Ve(e.dungeon.layout.grid,o.position.x,o.position.y);return n&&e.dungeon.discoveredRooms.includes(n)&&o.health>0});t.length===0&&v(e,"No monsters can act"),t.forEach(o=>{const n=o.actions;for(;o.actions>0;){v(e,`${o.name} acted `);const s=e.heroes.filter(l=>Et(o.position,l.position.x,l.position.y));if(s.length>0){const l=Math.floor(Math.random()*s.length);Hn(e,o,s[l])}else Ln(e,o)}o.actions=n})},on=(e,t)=>Math.sqrt(Math.pow(e.x-(t==null?void 0:t.x),2)+Math.pow(e.y-(t==null?void 0:t.y),2)),Ln=(e,t)=>{const o=e.heroes.map(s=>({hero:s,dist:on(s.position,t.position)})).sort((s,l)=>s.dist-l.dist)[0],n=wn(e,t.position);if(n.length>0){const s=n.map(l=>({pos:l,dist:on(l,o.hero.position)})).sort((l,r)=>l.dist-r.dist)[0].pos;t.position=s,v(e,`${t.name} moved towards ${o.hero.name} (${s.x},${s.y})`)}else v(e,`${t.name} could not move`);t.actions--};let wn=(e,t)=>{const o=t.x,n=t.y,s=[];for(let l=o-1;l<=o+1;l++)for(let r=n-1;r<=n+1;r++)l===o&&r===n||Je(e.dungeon.layout,l,r)&&ht(e.dungeon,l,r)&&s.push({x:l,y:r});return s.filter(l=>!e.heroes.find(r=>r.position.x===l.x&&r.position.y===l.y)).filter(l=>!e.dungeon.layout.monsters.find(m=>m.position.x===l.x&&m.position.y===l.y))};const Ct=(e,t,o)=>{var s;const n=((s=o.armour)==null?void 0:s.defense)??o.defense;return`${e} damage (${t}-${n}=${e})`},Hn=(e,t,o)=>{if(t.actions===1&&t.movement!==3){v(e,`${o.name} has no actions left to attack`);return}if(o){const n=Se(t.level,t.weapon.dice),s=Math.max(n-o.defense,0);v(e,`${t.name} attacked ${o.name} with ${t.weapon.name} for ${Ct(s,n,o)}`),o.health-=s,o.health<=0&&(v(e,`${t.name} killed ${o.name}`),e.heroes=e.heroes.filter(l=>l!==o)),(t==null?void 0:t.actions)>1&&(t==null?void 0:t.movement)<3?t.actions-=2:t.actions--}},$e=e=>e.movement<3?e.actions>1:e.actions>0,sn=(e,t)=>e.x===t.x&&e.y===t.y,v=(e,t)=>{e.actionLog=[t,...e.actionLog]},_n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAGiklEQVR4Ae3dS47iMBAA0DDiDogT9g6JY7ELJ2IJnKKnMxpLSQRRHJzxRPWyCQZ/n1ulFiqT3eVy+W5mXs/nszkcDjNrN01u/dkd/63Y9Z973e/35ng85jb7qP7UmKfTafdR5xoT+EBg37V9PB6zurher83X19dq9WdNolepm0/udbvdmvP53LRtm9t0cf0aYy6erIahBH6FWq3FEiAwEBAABhwKBGIJCACx9ttqCQwEBIABhwKBWAICQKz9tloCAwEBYMChQCCWgAAQa7+tlsBAQAAYcCgQiCUgAMTab6slMBD4kwk4eKdwoUvXXZKxN3caXZZd7tWl5i5plztOv36NMfvje03glcDqAaA7O9ClD69xvTsLMJV7n+bRpQOXvJaO+XMWoOQ09EUgS2D1ANDNZu5Zg6yZ/1R+959Fjdz7GmPmeqlPYCzgO4CxiDKBQAICQKDNtlQCYwEBYCyiTCCQgAAQaLMtlcBYQAAYiygTCCQgAATabEslMBYQAMYiygQCCQgAgTbbUgmMBQSAsYgygUAC+9xc/bXr59q/y+mvkXtfY8xcL/UJ9AV2Oc8F6Dec87oLFms+R+DdWYCpuc3J2Z9qv+SzqTE9F2CJqDalBLKeC5A76NrPEXh3FmBqnjVy9muMOWXgMwJJwHcAScKdQEABASDgplsygSQgACQJdwIBBQSAgJtuyQSSgACQJNwJBBQQAAJuuiUTSAICQJJwJxBQQAAIuOmWTCAJCABJwp1AQIHsswD/m9G7swBT86yRs19jzCkDnxHoBPY1fre/JP3S3/df2q4/96kc/3699PrVmJ4LkHTcawj8k7MAay+sbdu1h3jZvxz/lyze3JCA7wA2tFmmSqC0gABQWlR/BDYkIABsaLNMlUBpAQGgtKj+CGxIQADY0GaZKoHSAgJAaVH9EdiQgACwoc0yVQKlBQSA0qL6I7AhAQFgQ5tlqgRKC6x+FmDt5wjUzrGvPX7pPwj9ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAoJTAbwUM8lhPvL+bAAAAAElFTkSuQmCC",On="data:image/png;base64,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",Sn=(e,t)=>{const o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),s=Math.min(o,n),l=Math.max(o,n),r=s,m=l-s;let g=Math.sqrt(2);return m===0&&(g=1),Math.floor(g*r+m)},Mn=(e,t,o)=>{const n=e.currentActor,s=e.dungeon.layout.doors.find(l=>l.x===n.position.x&&l.y===n.position.y);if(s){if(!s.open&&!s.hidden&&!s.locked){switch(s.open=!0,s.trapped&&un(s,n,e),s.side){case b.RIGHT:_e(n,e,t+1,o);break;case b.LEFT:_e(n,e,t-1,o);break;case b.DOWN:_e(n,e,t,o+1);break;case b.UP:_e(n,e,t,o-1);break}Fe(n)}else if(s.locked&&!s.hidden){if(!$e(n)){v(e,`${n.name} has no actions left`);return}v(e,"Door is locked"),qe(e),Fe(n)}}else{if(!$e(n)){v(e,`${n.name} has no actions left`);return}We(e)}},Pn=(e,t,o)=>{const n=e.currentActor;if(n.actions===0){v(e,`${n.name} has no actions left`);return}const s=Je(e.dungeon.layout,t,o),l=Sn(n.position,{x:t,y:o});if(console.log("distance: "+l),s){const r=pt(e,t,o),m=Bt(e,t,o);!r&&!m&&l<=n.movement?(n.position={x:t,y:o},n.movement-=l):m&&(l<=n.weapon.range?gn(n,e,t,o):v(e,"Monster is out of range"))}Fe(n)},Nn=(e,t,o)=>{const n=o.currentActor,s=document.getElementById("gameBoard");if(!s)return;const l=s.getBoundingClientRect(),r=Math.min(Math.floor((e.clientX-l.left)/t),o.dungeon.layout.grid[0].length-1),m=Math.min(Math.floor((e.clientY-l.top)/t),o.dungeon.layout.grid.length-1),g=o.dungeon.layout.grid[m][r];r===n.position.x&&m===n.position.y?Mn(o,r,m):o.dungeon.discoveredRooms.includes(g)&&Pn(o,r,m)};function Un(e){let t,o,n,s;return{c(){t=p("div"),o=p("canvas"),this.h()},l(l){t=h(l,"DIV",{style:!0,class:!0});var r=T(t);o=h(r,"CANVAS",{width:!0,height:!0,id:!0}),T(o).forEach(E),r.forEach(E),this.h()},h(){S(o,"width",i*40),S(o,"height",i*30),S(o,"id","gameBoard"),S(t,"style",e[1]()),S(t,"class","dungeon svelte-a4uhtl")},m(l,r){V(l,t,r),u(t,o),n||(s=O(o,"click",e[0]),n=!0)},p:ne,i:ne,o:ne,d(l){l&&E(t),n=!1,s()}}}const i=48;function Gn(e,t,o){let{state:n}=t,{debugMode:s=!0}=t,l,r;r=window.innerHeight,l=document.getElementById("footer").offsetHeight,xe(()=>{const a=new Image;a.src=_n;const A=new Image;A.src=On,m(a,A),setInterval(()=>m(a,A),10)});const m=(a,A)=>{if(!n||!document)return;const d=document.getElementById("gameBoard"),c=d.getContext("2d");c.clearRect(0,0,d.width,d.height),c.fillStyle="black",c.fillRect(0,0,d.width,d.height),n.dungeon.layout.grid.forEach((B,y)=>{he(B).forEach((C,D)=>f(c,C,D,y,a))}),n.dungeon.layout.grid.forEach((B,y)=>{he(B).forEach((C,D)=>I(c,C,D,y))}),n.dungeon.layout.grid.forEach((B,y)=>{he(B).forEach((C,D)=>k(c,C,D,y))}),n.dungeon.layout.grid.forEach((B,y)=>{he(B).forEach((C,D)=>Me(c,C,D,y,A))}),$(c,n.currentActor),oe(c,n.currentActor)},g=(a,A,d)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="black",a.fillRect(A*i,d*i,i,i),a.stroke()},f=(a,A,d,c,B)=>{ie(A)||!n.dungeon.discoveredRooms.includes(A)&&A!==Ye?n.dungeon.discoveredRooms.some(y=>Pe(d,c,y))?a.drawImage(B,48,0,48,48,d*i,c*i,i,i):g(a,d,c):se(A)?g(a,d,c):a.drawImage(B,0,0,48,48,d*i,c*i,i,i)},I=(a,A,d,c)=>{A===Ye||A===ft||(a.beginPath(),a.strokeStyle="black",a.rect(d*i,c*i,i,i),s&&(a.font="7px Arial",a.fillText(d+","+c,d*i+3,c*i+(i-3))),a.stroke())},k=(a,A,d,c)=>{const B=x(d,c);if(B&&!B.hidden&&!B.open&&!se(A))switch(a.fillStyle="brown",B.side){case b.RIGHT:{a.fillRect(d*i+(i-2),c*i,4,i),B.locked&&s&&(a.fillStyle="grey",a.fillRect(d*i+(i-4),c*i+(i/2-4),8,8)),B.trapped&&s&&(a.fillStyle="red",a.fillRect(d*i+(i-4),c*i+(i/2-4),4,4));break}case b.LEFT:{a.fillRect(d*i-2,c*i,4,i),B.locked&&s&&(a.fillStyle="grey",a.fillRect(d*i-4,c*i+(i/2-4),8,8)),B.trapped&&s&&(a.fillStyle="red",a.fillRect(d*i-4,c*i+(i/2-4),4,4));break}case b.UP:{a.fillRect(d*i,c*i-2,i,4),B.locked&&s&&(a.fillStyle="grey",a.fillRect(d*i+(i/2-4),c*i-4,8,8)),B.trapped&&s&&(a.fillStyle="red",a.fillRect(d*i+(i/2-4),c*i-4,4,4));break}case b.DOWN:{a.fillRect(d*i,c*i+(i-2),i,4),B.locked&&s&&(a.fillStyle="grey",a.fillRect(d*i+(i/2-4),c*i+(i-4),8,8)),B.trapped&&s&&(a.fillStyle="red",a.fillRect(d*i+(i/2-4),c*i+(i-4),4,4));break}}},L=(a,A,d,c)=>{a.beginPath(),a.strokeStyle=A.colour,a.fillStyle=A.colour,a.fillRect(d*i+4,c*i+(i-6),i-8,4),a.stroke()},N=(a,A,d,c)=>{s&&d.forEach(B=>{const y=A.position.x,C=A.position.y,D=B.position.x,q=B.position.y;a.strokeStyle=A.colour,a.beginPath(),a.moveTo(y*i+i/2,C*i+i/2),a.lineTo(D*i+i/2,q*i+i/2),a.stroke()})},Ce=(a,A,d,c)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="red",a.fillRect(d*i+4,c*i,i-8,4),a.fillStyle="green",a.fillRect(d*i+4,c*i,(i-8)*(A.health/A.maxHealth),4),a.rect(d*i+4,c*i,i-8,4),a.stroke()},ve=(a,A,d,c)=>{var B=a.fillStyle,y=a.strokeStyle;a.strokeStyle="#080808",a.fillStyle="darkred";for(let C=0;C<A.actions;C++)a.fillRect(d*i+4+6*C,c*i+i-12,5,5),a.rect(d*i+4+6*C,c*i+i-12,5,5),a.stroke();a.fillStyle="blue";for(let C=0;C<A.movement;C++)a.fillRect(d*i+i-22+6*C,c*i+i-12,5,5),a.rect(d*i+i-22+6*C,c*i+i-12,5,5),a.stroke();a.fillStyle=B,a.strokeStyle=y},oe=(a,A)=>{A===n.currentActor&&(a.beginPath(),a.strokeStyle="lightblue",a.lineWidth=2,a.moveTo(A.position.x*i,A.position.y*i),a.lineTo(A.position.x*i+i/3,A.position.y*i),a.moveTo(A.position.x*i,A.position.y*i),a.lineTo(A.position.x*i,A.position.y*i+i/3),a.moveTo(A.position.x*i+i,A.position.y*i),a.lineTo(A.position.x*i+i/3*2,A.position.y*i),a.moveTo(A.position.x*i+i,A.position.y*i),a.lineTo(A.position.x*i+i,A.position.y*i+i/3),a.moveTo(A.position.x*i,A.position.y*i+i),a.lineTo(A.position.x*i,A.position.y*i+i/3*2),a.moveTo(A.position.x*i,A.position.y*i+i),a.lineTo(A.position.x*i+i/3,A.position.y*i+i),a.moveTo(A.position.x*i+i,A.position.y*i+i),a.lineTo(A.position.x*i+i,A.position.y*i+i/3*2),a.moveTo(A.position.x*i+i,A.position.y*i+i),a.lineTo(A.position.x*i+i/3*2,A.position.y*i+i),a.stroke(),a.lineWidth=1)},$=(a,A)=>{if(A===n.currentActor&&s){for(let d=A.position.x-A.movement;d<=A.position.x+A.movement;d++)for(let c=A.position.y-A.movement;c<=A.position.y+A.movement;c++)if(ht(n.dungeon,d,c)){const y=Bt(n,d,c),C=pt(n,d,c),D=Je(n.dungeon.layout,d,c);!C&&!y&&D&&(a.fillStyle="rgba(50, 50, 255, 0.08)",a.fillRect(d*i,c*i,i,i),a.stroke())}}},Me=(a,A,d,c,B)=>{a.beginPath();const y=n.heroes.find(C=>C.position.x===d&&C.position.y===c);if(y)a.drawImage(B,4*16,0,16,16,d*i,c*i,i,i),ve(a,y,d,c),L(a,y,d,c),Ce(a,y,d,c);else{const C=n.dungeon.layout.monsters.find(D=>D.position.x===d&&D.position.y===c);if(C&&C.health>0&&!se(A)){switch(C.type){case M.ORCH:a.drawImage(B,i,16,16,16,d*i,c*i,i,i);break;case M.TROLL:a.drawImage(B,i,16,16,16,d*i,c*i,i,i);break;default:a.drawImage(B,16,16,16,16,d*i,c*i,i,i);break}L(a,C,d,c),Ce(a,C,d,c),N(a,C,n.heroes)}}},se=a=>a===Ye||!n.dungeon.discoveredRooms.includes(a),ie=a=>a===ft,x=(a,A)=>n.dungeon.layout.doors.find(d=>d.x===a&&d.y===A),Pe=(a,A,d)=>{if(!n)return;const c=Math.max(a-1,0),B=Math.max(A-1,0),y=Math.min(a+1,n.dungeon.layout.grid.length),C=Math.min(A+1,n.dungeon.layout.grid[0].length);for(let D=c;D<=y;D++)for(let q=B;q<=C;q++){const ye=n.dungeon.layout.grid[q];if(he(ye)[D]===d)return!0}return!1},Ie=a=>{Nn(a,i,n)},ae=()=>`max-height: ${r-l-20}px; max-width: ${i*40}`;return e.$$set=a=>{"state"in a&&o(2,n=a.state),"debugMode"in a&&o(3,s=a.debugMode)},[Ie,ae,n,s]}class Yn extends ze{constructor(t){super(),Xe(this,t,Gn,Un,Oe,{state:2,debugMode:3})}}function Kn(e){let t;return{c(){t=p("canvas"),this.h()},l(o){t=h(o,"CANVAS",{id:!0,height:!0,width:!0}),T(t).forEach(E),this.h()},h(){S(t,"id","characterBoard"),S(t,"height","720"),S(t,"width","260")},m(o,n){V(o,t,n)},p:ne,i:ne,o:ne,d(o){o&&E(t)}}}const W=180;function Fn(e,t,o){let{state:n}=t;xe(()=>{s(),setInterval(s,100)});const s=()=>{if(!n||!document)return;const g=document.getElementById("characterBoard"),f=g.getContext("2d");f.clearRect(0,0,g.width,g.height),f.stroke(),n.heroes.forEach((I,k)=>{l(f,g,I,k),r(f,I,k),m(f,I,k)})},l=(g,f,I,k)=>{g.fillStyle=I.colour,g.fillRect(12,k*W+12,f.width,W-12),g.stroke(),g.fillStyle="black"},r=(g,f,I)=>{const L=(f===n.currentActor?"> "+f.name:f.name)+" - "+f.level+" ("+f.experience+")";g.strokeStyle="black",g.font="18px Arial",g.fillText(L,16,I*W+30),g.fillText("HP: "+f.health,16,I*W+50),g.fillText("Actions: "+f.actions,16,I*W+70),g.fillText("Moves: "+f.movement,16,I*W+90),g.stroke()},m=(g,f,I)=>{g.fillText("Equipment",16,I*W+110),g.font="12px Arial",g.fillText("ðŸ—¡ï¸ "+f.weapon.name+" ("+f.weapon.dice+")",16,I*W+125);let k="None (0)",L="None (0)";f.armour&&(k=f.armour.name+" ("+f.armour.defense+")"),f.shield&&(L=f.shield.name+" ("+f.armour.dice+")"),g.fillText("ðŸ§± "+k,16,I*W+142),g.fillText("ðŸ›¡ï¸ "+L,16,I*W+159)};return e.$$set=g=>{"state"in g&&o(0,n=g.state)},[n]}class qn extends ze{constructor(t){super(),Xe(this,t,Fn,Kn,Oe,{state:0})}}function an(e,t,o){const n=e.slice();return n[2]=t[o],n[4]=o,n}function Wn(e){let t,o,n=e[2]+"",s;return{c(){t=p("p"),o=xt(">"),s=xt(n),this.h()},l(l){t=h(l,"P",{class:!0});var r=T(t);o=zt(r,">"),s=zt(r,n),r.forEach(E),this.h()},h(){S(t,"class","svelte-1xp6uq")},m(l,r){V(l,t,r),u(t,o),u(t,s)},p(l,r){r&1&&n!==(n=l[2]+"")&&hn(s,n)},d(l){l&&E(t)}}}function ln(e){let t,o=e[4]<25&&Wn(e);return{c(){o&&o.c(),t=Ke()},l(n){o&&o.l(n),t=Ke()},m(n,s){o&&o.m(n,s),V(n,t,s)},p(n,s){n[4]<25&&o.p(n,s)},d(n){n&&E(t),o&&o.d(n)}}}function rn(e){let t,o=Jt(e[0]),n=[];for(let s=0;s<o.length;s+=1)n[s]=ln(an(e,o,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=Ke()},l(s){for(let l=0;l<n.length;l+=1)n[l].l(s);t=Ke()},m(s,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,l);V(s,t,l)},p(s,l){if(l&1){o=Jt(s[0]);let r;for(r=0;r<o.length;r+=1){const m=an(s,o,r);n[r]?n[r].p(m,l):(n[r]=ln(m),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=o.length}},d(s){s&&E(t),pn(n,s)}}}function $n(e){let t,o=e[0],n=rn(e);return{c(){t=p("div"),n.c(),this.h()},l(s){t=h(s,"DIV",{class:!0});var l=T(t);n.l(l),l.forEach(E),this.h()},h(){S(t,"class","log svelte-1xp6uq")},m(s,l){V(s,t,l),n.m(t,null)},p(s,[l]){l&1&&Oe(o,o=s[0])?(n.d(1),n=rn(s),n.c(),n.m(t,null)):n.p(s,l)},i:ne,o:ne,d(s){s&&E(t),n.d(s)}}}function xn(e,t,o){let n=[],{state:s}=t;return xe(()=>{setInterval(()=>{o(0,n=s.actionLog)},1e3)}),e.$$set=l=>{"state"in l&&o(1,s=l.state)},[n,s]}class zn extends ze{constructor(t){super(),Xe(this,t,xn,$n,Oe,{state:1})}}function Xn(e){let t,o,n,s,l,r,m,g,f,I,k,L,N,Ce="UL",ve,oe,$,Me="U",se,ie,x,Pe="UR",Ie,ae,a,A="Next",d,c,B,y,C="L",D,q,ye,pe,le,vt="R",Ze,ke,re,It="Search",je,K,Te,Ae,yt="DL",et,be,ce,kt="D",tt,Qe,de,Tt="DR",nt,Re,ge,bt="Pick lock",ot,ue,De,fe,Qt="Save",st,Le,me,Rt="Load",it,z,at,Ne,lt,Dt;n=new qn({props:{state:e[0]}});function fn(R){e[2](R)}let Lt={};e[0]!==void 0&&(Lt.state=e[0]),l=new Yn({props:Lt}),Wt.push(()=>Xt(l,"state",fn));function mn(R){e[4](R)}let wt={};return e[0]!==void 0&&(wt.state=e[0]),z=new zn({props:wt}),Wt.push(()=>Xt(z,"state",mn)),{c(){t=p("div"),o=p("div"),rt(n.$$.fragment),s=w(),rt(l.$$.fragment),m=w(),g=p("div"),f=p("div"),I=p("table"),k=p("tr"),L=p("td"),N=p("button"),N.textContent=Ce,ve=w(),oe=p("td"),$=p("button"),$.textContent=Me,se=w(),ie=p("td"),x=p("button"),x.textContent=Pe,Ie=w(),ae=p("td"),a=p("button"),a.textContent=A,d=w(),c=p("tr"),B=p("td"),y=p("button"),y.textContent=C,D=w(),q=p("td"),ye=w(),pe=p("td"),le=p("button"),le.textContent=vt,Ze=w(),ke=p("td"),re=p("button"),re.textContent=It,je=w(),K=p("tr"),Te=p("td"),Ae=p("button"),Ae.textContent=yt,et=w(),be=p("td"),ce=p("button"),ce.textContent=kt,tt=w(),Qe=p("td"),de=p("button"),de.textContent=Tt,nt=w(),Re=p("td"),ge=p("button"),ge.textContent=bt,ot=w(),ue=p("tr"),De=p("td"),fe=p("button"),fe.textContent=Qt,st=w(),Le=p("td"),me=p("button"),me.textContent=Rt,it=w(),rt(z.$$.fragment),this.h()},l(R){t=h(R,"DIV",{class:!0});var U=T(t);o=h(U,"DIV",{class:!0});var we=T(o);At(n.$$.fragment,we),we.forEach(E),s=H(U),At(l.$$.fragment,U),U.forEach(E),m=H(R),g=h(R,"DIV",{class:!0,id:!0});var Be=T(g);f=h(Be,"DIV",{class:!0});var He=T(f);I=h(He,"TABLE",{});var Z=T(I);k=h(Z,"TR",{});var j=T(k);L=h(j,"TD",{});var Ht=T(L);N=h(Ht,"BUTTON",{"data-svelte-h":!0}),P(N)!=="svelte-fw3uxo"&&(N.textContent=Ce),Ht.forEach(E),ve=H(j),oe=h(j,"TD",{});var _t=T(oe);$=h(_t,"BUTTON",{"data-svelte-h":!0}),P($)!=="svelte-1jeoia6"&&($.textContent=Me),_t.forEach(E),se=H(j),ie=h(j,"TD",{});var Ot=T(ie);x=h(Ot,"BUTTON",{"data-svelte-h":!0}),P(x)!=="svelte-1p8c8vc"&&(x.textContent=Pe),Ot.forEach(E),Ie=H(j),ae=h(j,"TD",{});var St=T(ae);a=h(St,"BUTTON",{"data-svelte-h":!0}),P(a)!=="svelte-1rtxc14"&&(a.textContent=A),St.forEach(E),j.forEach(E),d=H(Z),c=h(Z,"TR",{});var ee=T(c);B=h(ee,"TD",{});var Mt=T(B);y=h(Mt,"BUTTON",{"data-svelte-h":!0}),P(y)!=="svelte-10dnpu6"&&(y.textContent=C),Mt.forEach(E),D=H(ee),q=h(ee,"TD",{}),T(q).forEach(E),ye=H(ee),pe=h(ee,"TD",{});var Pt=T(pe);le=h(Pt,"BUTTON",{"data-svelte-h":!0}),P(le)!=="svelte-12287ni"&&(le.textContent=vt),Pt.forEach(E),Ze=H(ee),ke=h(ee,"TD",{});var Nt=T(ke);re=h(Nt,"BUTTON",{"data-svelte-h":!0}),P(re)!=="svelte-cps1bu"&&(re.textContent=It),Nt.forEach(E),ee.forEach(E),je=H(Z),K=h(Z,"TR",{});var te=T(K);Te=h(te,"TD",{});var Ut=T(Te);Ae=h(Ut,"BUTTON",{"data-svelte-h":!0}),P(Ae)!=="svelte-1ji074i"&&(Ae.textContent=yt),Ut.forEach(E),et=H(te),be=h(te,"TD",{});var Gt=T(be);ce=h(Gt,"BUTTON",{"data-svelte-h":!0}),P(ce)!=="svelte-li5tq6"&&(ce.textContent=kt),Gt.forEach(E),tt=H(te),Qe=h(te,"TD",{});var Yt=T(Qe);de=h(Yt,"BUTTON",{"data-svelte-h":!0}),P(de)!=="svelte-3esmwe"&&(de.textContent=Tt),Yt.forEach(E),nt=H(te),Re=h(te,"TD",{});var Kt=T(Re);ge=h(Kt,"BUTTON",{"data-svelte-h":!0}),P(ge)!=="svelte-sacog4"&&(ge.textContent=bt),Kt.forEach(E),te.forEach(E),ot=H(Z),ue=h(Z,"TR",{});var Ue=T(ue);De=h(Ue,"TD",{});var Ft=T(De);fe=h(Ft,"BUTTON",{"data-svelte-h":!0}),P(fe)!=="svelte-1vr5zyk"&&(fe.textContent=Qt),Ft.forEach(E),st=H(Ue),Le=h(Ue,"TD",{});var qt=T(Le);me=h(qt,"BUTTON",{"data-svelte-h":!0}),P(me)!=="svelte-1m2jkw7"&&(me.textContent=Rt),qt.forEach(E),Ue.forEach(E),Z.forEach(E),He.forEach(E),it=H(Be),At(z.$$.fragment,Be),Be.forEach(E),this.h()},h(){S(o,"class","characterSide svelte-13uybsp"),S(t,"class","container svelte-13uybsp"),S(f,"class","commands svelte-13uybsp"),S(g,"class","container svelte-13uybsp"),S(g,"id","footer")},m(R,U){V(R,t,U),u(t,o),ct(n,o,null),u(t,s),ct(l,t,null),V(R,m,U),V(R,g,U),u(g,f),u(f,I),u(I,k),u(k,L),u(L,N),u(k,ve),u(k,oe),u(oe,$),u(k,se),u(k,ie),u(ie,x),u(k,Ie),u(k,ae),u(ae,a),u(I,d),u(I,c),u(c,B),u(B,y),u(c,D),u(c,q),u(c,ye),u(c,pe),u(pe,le),u(c,Ze),u(c,ke),u(ke,re),u(I,je),u(I,K),u(K,Te),u(Te,Ae),u(K,et),u(K,be),u(be,ce),u(K,tt),u(K,Qe),u(Qe,de),u(K,nt),u(K,Re),u(Re,ge),u(I,ot),u(I,ue),u(ue,De),u(De,fe),u(ue,st),u(ue,Le),u(Le,me),u(g,it),ct(z,g,null),Ne=!0,lt||(Dt=[O(window,"keydown",En(e[1])),O(N,"click",function(){G(Q("UL",e[0]))&&Q("UL",e[0]).apply(this,arguments)}),O($,"click",function(){G(Q("U",e[0]))&&Q("U",e[0]).apply(this,arguments)}),O(x,"click",function(){G(Q("UR",e[0]))&&Q("UR",e[0]).apply(this,arguments)}),O(a,"click",function(){G(mt(e[0]))&&mt(e[0]).apply(this,arguments)}),O(y,"click",function(){G(Q("L",e[0]))&&Q("L",e[0]).apply(this,arguments)}),O(le,"click",function(){G(Q("R",e[0]))&&Q("R",e[0]).apply(this,arguments)}),O(re,"click",function(){G(We(e[0]))&&We(e[0]).apply(this,arguments)}),O(Ae,"click",function(){G(Q("DL",e[0]))&&Q("DL",e[0]).apply(this,arguments)}),O(ce,"click",function(){G(Q("D",e[0]))&&Q("D",e[0]).apply(this,arguments)}),O(de,"click",function(){G(Q("DR",e[0]))&&Q("DR",e[0]).apply(this,arguments)}),O(ge,"click",function(){G(qe(e[0]))&&qe(e[0]).apply(this,arguments)}),O(fe,"click",function(){G(nn(e[0]))&&nn(e[0]).apply(this,arguments)}),O(me,"click",e[3])],lt=!0)},p(R,[U]){e=R;const we={};U&1&&(we.state=e[0]),n.$set(we);const Be={};!r&&U&1&&(r=!0,Be.state=e[0],$t(()=>r=!1)),l.$set(Be);const He={};!at&&U&1&&(at=!0,He.state=e[0],$t(()=>at=!1)),z.$set(He)},i(R){Ne||(dt(n.$$.fragment,R),dt(l.$$.fragment,R),dt(z.$$.fragment,R),Ne=!0)},o(R){gt(n.$$.fragment,R),gt(l.$$.fragment,R),gt(z.$$.fragment,R),Ne=!1},d(R){R&&(E(t),E(m),E(g)),ut(n),ut(l),ut(z),lt=!1,Bn(Dt)}}}function Jn(e,t,o){let n=Tn();xe(()=>{setInterval(l,1e3)});function s(f){switch(f.key){case"6":case"d":Q("R",n);break;case"9":case"e":Q("UR",n);break;case"8":case"w":Q("U",n);break;case"7":case"q":Q("UL",n);break;case"4":case"a":Q("L",n);break;case"1":case"z":Q("DL",n);break;case"2":case"x":Q("D",n);break;case"3":case"c":Q("DR",n);break;case"0":case" ":mt(n);break;case"-":case"r":qe(n);break;case"+":case"f":We(n);break}}const l=()=>{if(n.dungeon.beaten&&n.dungeon.nextDungeon){o(0,n.dungeon=n.dungeon.nextDungeon,n);const f=An.filter(I=>!n.heroes.find(k=>I.name===k.name));n.heroes.push(...f),cn(n.heroes,n.dungeon),o(0,n.actionLog=["You have reached "+n.dungeon.name],n)}};function r(f){n=f,o(0,n)}const m=()=>o(0,n=kn());function g(f){n=f,o(0,n)}return[n,s,r,m,g]}class jn extends ze{constructor(t){super(),Xe(this,t,Jn,Xn,Oe,{})}}export{jn as component};
