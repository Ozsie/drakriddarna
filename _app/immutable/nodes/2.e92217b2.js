import{s as De,n as ne,o as Ue,b as Kt,f as Yt,r as dn,i as K}from"../chunks/scheduler.ba2ce6c0.js";import{S as Ke,i as Ye,g as B,h as p,j as Q,f as h,k as P,l as Gt,a as V,x as u,e as Ne,y as gn,m as un,n as fn,o as mn,z as Ft,r as nt,s as w,u as ot,c as _,A as M,v as st,B as S,C as Bn,d as it,t as at,w as lt}from"../chunks/index.e5e7b553.js";function qt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var O=(e=>(e.Red="#CD5C5C",e.Blue="#1E90FF",e.Green="#90EE90",e.Yellow="#FCFF4F",e))(O||{}),H=(e=>(e.ORCH="Orch",e.TROLL="Troll",e.GREEN_DARK_LORD="Green Dark Lord",e.BLUE_DARK_LORD="Blue Dark Lord",e.RED_DARK_LORD="Red Dark Lord",e.YELLOW_DARK_LORD="Yellow Dark Lord",e))(H||{}),W=(e=>(e.APPRENTICE="Apprentice",e.KNIGHT="Knight",e.HERO="Hero",e.LORD="Lord",e.MASTER="Master",e))(W||{}),J=(e=>(e[e.KILL_ALL=0]="KILL_ALL",e[e.KILL_ALL_OF_TYPE=1]="KILL_ALL_OF_TYPE",e[e.REACH_CELL=2]="REACH_CELL",e[e.OPEN_DOOR=3]="OPEN_DOOR",e[e.KILL_AT_LEAST=4]="KILL_AT_LEAST",e))(J||{}),Be=(e=>(e.EQUIPMENT="Equipment",e.MAGIC_ITEM="Magic Item",e.DOOR="Door",e.NOTE="Note",e))(Be||{}),D=(e=>(e.LEFT="Left",e.RIGHT="Right",e.UP="Up",e.DOWN="Down",e))(D||{});const Wt=[{name:"Sword",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Two-handed Sword",range:1,dice:4,twoHanded:!0,useHearHeroes:!1,amountInDeck:1},{name:"Halberd",range:2,dice:3,twoHanded:!0,useHearHeroes:!0,amountInDeck:1}],$t=[{name:"Orch Sword/Bow",range:99,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4},{name:"Troll Club",range:1,dice:3,twoHanded:!1,useHearHeroes:!0,amountInDeck:4}],xt=[{name:"Orch Mail",defense:0,magicProtection:!1,amountInDeck:4},{name:"Troll Skin",defense:1,magicProtection:!1,amountInDeck:4}],pn="0",En="@",Pe=" ",rt="#",hn=(e,t,o,n)=>({type:e,name:t,position:{x:o,y:n},found:!1}),Y=(e,t,o)=>({side:e,x:t,y:o,locked:!1,trapped:!1,open:!1,hidden:!1,trapAttacks:0}),zt=(e,t,o)=>({...Y(e,t,o),hidden:!0}),X=(e,t,o,n)=>{const i=Object.values(O).indexOf(t),l=Object.keys(O)[i];let d=W.LORD,v=2,g=2,f=4,C=4,y=4,L=$t[0],N=xt[0];switch(e){case H.ORCH:{d=W.APPRENTICE,g=0,f=2,C=2,y=1;break}case H.TROLL:{d=W.KNIGHT,g=1,f=3,C=3,y=2,L=$t[1],N=xt[1];break}}return e===H.YELLOW_DARK_LORD&&(v=3),{type:e,level:d,colour:t,actions:v,defense:g,health:f,maxHealth:C,experience:y,name:e+" ("+l+")",movement:3,position:{x:o,y:n},weapon:L,armour:N}},Cn={name:"The Three Gates of Power",beaten:!1,winConditions:[{type:J.KILL_ALL,fulfilled:!1},{type:J.OPEN_DOOR,targetCell:{x:15,y:1},fulfilled:!1}],startingPositions:[{x:1,y:4},{x:0,y:3},{x:0,y:4},{x:0,y:5}],discoveredRooms:["A"],layout:{grid:["            EEEE","            EEEE","         DDDEEEE","AAA   CCCC","AAABBBCCCC   GGG","AAA   CCCCFFFGGG","      CCCC   GGG","      CCCC","      CCCCHHHIII","             III","             III"],doors:[Y(D.RIGHT,2,4),Y(D.RIGHT,5,4),Y(D.RIGHT,9,5),Y(D.RIGHT,12,5),Y(D.RIGHT,9,8),Y(D.RIGHT,12,8),Y(D.RIGHT,11,2),zt(D.UP,9,3),zt(D.RIGHT,15,1)],monsters:[X(H.ORCH,O.Blue,9,7),X(H.ORCH,O.Red,12,8),X(H.TROLL,O.Red,15,1),X(H.TROLL,O.Yellow,13,6)],secrets:[{type:Be.EQUIPMENT,position:{x:9,y:4},found:!1,name:"Random Equipment"},{type:Be.EQUIPMENT,position:{x:12,y:0},found:!1,name:"Random Equipment"},{type:Be.MAGIC_ITEM,position:{x:15,y:5},found:!1,name:"Random Magic Item",item:{name:"Healing Herbs"}},{type:Be.EQUIPMENT,position:{x:15,y:9},found:!1,name:"Random Equipment"}],notes:[{message:"Beyond stone and fire you shall find the Dread tunnel, the road to the Ice Dragons treasure.",position:{x:2,y:4}},{message:"The Gate of Water. <There is an image of a sea dragon under the text>",position:{x:9,y:8}},{message:"The Gate of Air. <There is an image of a pegasus under the text>",position:{x:9,y:5}},{message:"The Gate of Fire. <There is an image of a hippogriph under the text>",position:{x:9,y:3}}]},killCount:0},Jt={name:"Troll cave",beaten:!1,winConditions:[{type:J.KILL_ALL,fulfilled:!1}],nextDungeon:Cn,startingPositions:[{x:2,y:9},{x:1,y:8},{x:1,y:9},{x:1,y:10}],discoveredRooms:["A"],layout:{grid:["     ######","     #CCCC#","     #CCCC#","     #CCCC#","     ##E###","      #E#  ","      #E## ","##### #BB# ","#AAA###BB# ","#AAADDDBB# ","#AAA###BB# ","##### #### "],doors:[Y(D.RIGHT,3,9),Y(D.RIGHT,6,9),Y(D.UP,7,7),Y(D.UP,7,4)],monsters:[X(H.ORCH,O.Green,6,9),X(H.ORCH,O.Yellow,8,10),X(H.ORCH,O.Red,7,5),X(H.ORCH,O.Red,9,3),X(H.TROLL,O.Green,6,1)],secrets:[hn(Be.NOTE,"Welcome to Drakriddarna",2,9)],notes:[]},killCount:0},Xt=e=>{I(e,"Game saved."),localStorage.setItem("state",JSON.stringify(e))},vn=()=>{const e=localStorage.getItem("state");if(e){const t=JSON.parse(e);return t.currentActor=t.heroes.find(o=>{var n;return o.name===((n=t.currentActor)==null?void 0:n.name)}),I(t,"Game loaded."),t}},In=()=>{const e=nn;return on(e,Jt),{heroes:e,dungeon:Jt,currentActor:e[0],actionLog:["Game Initialised","Each character has 2 actions. Move, Attack, Search or Pick Lock.","Each character can move 3 steps per action.","If another action is performed before moving 3 steps, the move is finished and both actions are consumed.","The rules of this game are harsh and unfair."]}},Me=(e,t)=>(Wt[0].amountInDeck--,{name:e,actions:2,movement:3,defense:0,level:W.APPRENTICE,health:7,maxHealth:7,colour:t,experience:0,position:{x:-1,y:-1},weapon:Wt[0]}),nn=[Me("Fearik",O.Yellow),Me("Helbran",O.Red),Me("Siedel",O.Green),Me("Wulf",O.Blue)],on=(e,t)=>{e.forEach((o,n)=>o.position=t.startingPositions[n])},me=e=>{let t=[];for(let o=0;o<e.length;o++)t.push(e[o]);return t},sn=(e,t,o)=>e.dungeon.layout.monsters.some(n=>n.position.x===t&&n.position.y===o&&n.health>0),an=(e,t,o)=>e.heroes.some(n=>n.position.x===t&&n.position.y===o),R=(e,t)=>{const o=t.currentActor;if(!o||o.actions===0)return;let n=o.position.x,i=o.position.y;switch(e){case"UL":n=o.position.x-1,i=o.position.y-1;break;case"U":i=o.position.y-1;break;case"UR":n=o.position.x+1,i=o.position.y-1;break;case"L":n=o.position.x-1;break;case"R":n=o.position.x+1;break;case"DL":n=o.position.x-1,i=o.position.y+1;break;case"D":i=o.position.y+1;break;case"DR":n=o.position.x+1,i=o.position.y+1;break}const l=an(t,n,i),d=!gt(t.dungeon.layout,n,i),v=sn(t,n,i);if(!l&&!d){const g=ut(t.dungeon,n,i);g?g&&(v?yn(o,t,n,i):ln(o,t,n,i,1)):Tn(t,o,n,i)&&kn(o,t,n,i)}else I(t,`${o.name} could not make that move`);o.movement===0&&(o.actions--,o.actions!==0&&(o.movement=3)),o.actions==0&&(o.movement=0)},ln=(e,t,o,n,i)=>{e.position.x=o,e.position.y=n;const l=t.dungeon.layout.notes.find(v=>Zt(v.position,e.position));l&&(t.dungeon.layout.doors.some(g=>g.hidden&&Zt(l.position,{x:g.x,y:g.y}))||I(t,`${e.name} reads: ${l.message}`)),t.dungeon.layout.monsters.some(v=>ft(e.position,v.position.x,v.position.y))?(I(t,`${e.name} walked by a monster and lost the momentum`),e.movement=0):e.movement-=i},kn=(e,t,o,n)=>{const i=Ge(t.dungeon.layout.grid,o,n);i&&t.dungeon.discoveredRooms.push(i),ln(e,t,e.position.x,e.position.y,1),I(t,`${e.name} opened a door`)},yn=(e,t,o,n)=>{var l;if(e.actions===1&&e.movement!==3){I(t,`${e.name} has no actions left to attack`);return}const i=t.dungeon.layout.monsters.find(d=>d.position.x===o&&d.position.y===n);if(i){const d=((l=i.armour)==null?void 0:l.defense)??i.defense,v=Le(e.level,e.weapon.dice),g=Math.max(v-d,0);I(t,`${e.name} attacked ${i.name} with ${e.weapon.name} for ${mt(g,v,i)}`),i.health-=g,i.health<=0&&(t.dungeon.layout.monsters=t.dungeon.layout.monsters.filter(f=>f!=i),I(t,`${e.name} killed ${i.name}`),t.dungeon.killCount++,e.experience+=i.experience),e.actions>1&&e.movement<3?e.actions-=2:e.actions--}},Le=(e,t)=>{let o=[];for(let n=0;n<t;n++)o.push(Math.floor(Math.random()*6)+1);switch(e){case W.APPRENTICE:o=o.filter(n=>n===5);break;case W.KNIGHT:case W.HERO:o=o.filter(n=>n>=4);break;case W.LORD:case W.MASTER:o=o.filter(n=>n>=3);break}return o.length},At=e=>{const t=e.currentActor;if(!t)return;if(!rn(t)){I(e,`${t.name} has no actions left to pick lock`);return}const o=e.dungeon.layout.doors.find(n=>n.x===t.position.x&&n.y===t.position.y);o&&o.locked&&(Le(t.level,1)>=1?(o.locked=!1,I(e,`${t.name} managed to pick the lock`)):I(e,`${t.name} failed to pick the lock`),t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.movement=3,t.actions==0&&(t.movement=0))},ct=e=>{const t=e.currentActor;if(!t)return;if(!rn(t)){I(e,`${t.name} has no actions left to search`);return}const o=Le(t.level,1);if(o>=1){const n=e.dungeon.layout.doors.find(d=>d.hidden&&d.x===t.position.x&&d.y===t.position.y);n&&(I(e,`${t.name} searched (${o}) and found a hidden door`),n.hidden=!1);const i=e.dungeon.layout.doors.find(d=>d.trapped&&d.x===t.position.x&&t.position.y);i&&!n&&(I(e,`${t.name} searched (${o}) and found a trap in a door`),i.trapped=!1);const l=e.dungeon.layout.secrets.find(d=>ft(d.position,t.position.x,t.position.y));l&&!i&&!n&&I(e,`${t.name} searched (${o}) and found ${l.name}`),!n&&!i&&!l&&I(e,`${t.name} searched (${o}) but found nothing`)}else I(e,`${t.name} searched (${o}) but found nothing`);t.actions>1&&t.movement<3?t.actions-=2:t.actions--,t.actions==0&&(t.movement=0)},dt=e=>{if(Qn(e),e.currentActor!==void 0){I(e,`${e.currentActor.name} ended their turn`);let o=e.heroes.indexOf(e.currentActor)+1;o===e.heroes.length&&(bn(e),o=0),e.currentActor.actions=2,e.currentActor.movement=3,e.currentActor=e.heroes[o],I(e,`${e.currentActor.name} started their turn`)}},Qn=e=>{e.dungeon.winConditions.forEach(t=>{var o;switch(t.type){case J.KILL_ALL:{const n=e.dungeon.layout.monsters.map(i=>i.health).reduce((i,l)=>i+l,0);t.fulfilled=n<=0;break}case J.REACH_CELL:{t.fulfilled=e.heroes.some(n=>{var i;return n.position.x===((i=t.targetCell)==null?void 0:i.x)&&n.position.y===t.targetCell.y});break}case J.KILL_ALL_OF_TYPE:{t.fulfilled=e.dungeon.layout.monsters.filter(n=>n.type===t.targetMonsterType).some(n=>n.health>0);break}case J.OPEN_DOOR:{t.fulfilled=((o=e.dungeon.layout.doors.find(n=>{var i,l;return n.x===((i=t.targetCell)==null?void 0:i.x)&&n.y===((l=t.targetCell)==null?void 0:l.y)}))==null?void 0:o.open)??!1;break}case J.KILL_AT_LEAST:{t.fulfilled=(t.killMinCount?t.killMinCount:0)<=e.dungeon.killCount;break}}}),e.dungeon.beaten=e.dungeon.winConditions.map(t=>t.fulfilled).reduce((t,o)=>t&&o,!0),e.dungeon.beaten&&(I(e,"All win conditions have been fulfilled"),I(e,`You have cleared ${e.dungeon.name}`))},Tn=(e,t,o,n)=>{const i=e.dungeon.layout.doors.find(l=>l.x===t.position.x&&l.y===t.position.y);if(i&&!i.locked){const l=Rn(t.position.x,t.position.y,o,n);if(i.side===l){if(i.open=!0,i.trapped){const d=Le(W.APPRENTICE,i.trapAttacks),v=Math.max(d-t.defense,0);I(e,`Door was trapped. ${t.name} took ${mt(v,d,t)}`),t.health-=v}return!0}}return i&&i.locked&&I(e,"Door is locked"),!1},Rn=(e,t,o,n)=>{if(e===o){if(t>n)return D.UP;if(t<n)return D.DOWN}if(t===n){if(e>o)return D.LEFT;if(e<o)return D.RIGHT}},gt=(e,t,o)=>{let n=!0;if(t<0||t>=e.grid[0].length||o<0||o>=e.grid.length)n=!1;else{const i=Ge(e.grid,t,o);(i===pn||i===En||i===Pe||i===rt)&&(n=!1)}return n},ut=(e,t,o)=>{const n=Ge(e.layout.grid,t,o);return n?e.discoveredRooms.includes(n):!1},Ge=(e,t,o)=>{let n;return e.forEach((i,l)=>{me(i).forEach((d,v)=>{l===o&&v===t&&(n=d)})}),n},ft=(e,t,o)=>e.x===t&&e.y===o||e.x===t-1&&e.y===o||e.x===t-1&&e.y===o-1||e.x===t&&e.y===o-1||e.x===t+1&&e.y===o-1||e.x===t+1&&e.y===o||e.x===t+1&&e.y===o+1||e.x===t&&e.y===o+1||e.x===t-1&&e.y===o+1,bn=e=>{const t=e.dungeon.layout.monsters.filter(o=>{const n=Ge(e.dungeon.layout.grid,o.position.x,o.position.y);return n&&e.dungeon.discoveredRooms.includes(n)&&o.health>0});t.length===0&&I(e,"No monsters can act"),t.forEach(o=>{const n=o.actions;for(;o.actions>0;){I(e,`${o.name} acted `);const i=e.heroes.filter(l=>ft(o.position,l.position.x,l.position.y));if(i.length>0){const l=Math.floor(Math.random()*i.length);wn(e,o,i[l])}else Dn(e,o)}o.actions=n})};function Vt(e,t){return Math.sqrt(Math.pow(e.x-(t==null?void 0:t.x),2)+Math.pow(e.y-(t==null?void 0:t.y),2))}const Dn=(e,t)=>{const o=e.heroes.map(i=>({hero:i,dist:Vt(i.position,t.position)})).sort((i,l)=>i.dist-l.dist)[0],n=Ln(e,t.position);if(n.length>0){const i=n.map(l=>({pos:l,dist:Vt(l,o.hero.position)})).sort((l,d)=>l.dist-d.dist)[0].pos;t.position=i,I(e,`${t.name} moved towards ${o.hero.name} (${i.x},${i.y})`)}else I(e,`${t.name} could not move`);t.actions--};let Ln=(e,t)=>{const o=t.x,n=t.y,i=[];for(let l=o-1;l<=o+1;l++)for(let d=n-1;d<=n+1;d++)l===o&&d===n||gt(e.dungeon.layout,l,d)&&ut(e.dungeon,l,d)&&i.push({x:l,y:d});return i.filter(l=>!e.heroes.find(d=>d.position.x===l.x&&d.position.y===l.y)).filter(l=>!e.dungeon.layout.monsters.find(v=>v.position.x===l.x&&v.position.y===l.y))};const mt=(e,t,o)=>{var i;const n=((i=o.armour)==null?void 0:i.defense)??o.defense;return`${e} damage (${t}-${n}=${e})`},wn=(e,t,o)=>{if(t.actions===1&&t.movement!==3){I(e,`${o.name} has no actions left to attack`);return}if(o){const n=Le(t.level,t.weapon.dice),i=Math.max(n-o.defense,0);I(e,`${t.name} attacked ${o.name} with ${t.weapon.name} for ${mt(i,n,o)}`),o.health-=i,o.health<=0&&(I(e,`${t.name} killed ${o.name}`),e.heroes=e.heroes.filter(l=>l!==o)),(t==null?void 0:t.actions)>1&&(t==null?void 0:t.movement)<3?t.actions-=2:t.actions--}},rn=e=>e.movement<3?e.actions>1:e.actions>0,Zt=(e,t)=>e.x===t.x&&e.y===t.y,I=(e,t)=>{e.actionLog=[t,...e.actionLog]},_n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAGiklEQVR4Ae3dS47iMBAA0DDiDogT9g6JY7ELJ2IJnKKnMxpLSQRRHJzxRPWyCQZ/n1ulFiqT3eVy+W5mXs/nszkcDjNrN01u/dkd/63Y9Z973e/35ng85jb7qP7UmKfTafdR5xoT+EBg37V9PB6zurher83X19dq9WdNolepm0/udbvdmvP53LRtm9t0cf0aYy6erIahBH6FWq3FEiAwEBAABhwKBGIJCACx9ttqCQwEBIABhwKBWAICQKz9tloCAwEBYMChQCCWgAAQa7+tlsBAQAAYcCgQiCUgAMTab6slMBD4kwk4eKdwoUvXXZKxN3caXZZd7tWl5i5plztOv36NMfvje03glcDqAaA7O9ClD69xvTsLMJV7n+bRpQOXvJaO+XMWoOQ09EUgS2D1ANDNZu5Zg6yZ/1R+959Fjdz7GmPmeqlPYCzgO4CxiDKBQAICQKDNtlQCYwEBYCyiTCCQgAAQaLMtlcBYQAAYiygTCCQgAATabEslMBYQAMYiygQCCQgAgTbbUgmMBQSAsYgygUAC+9xc/bXr59q/y+mvkXtfY8xcL/UJ9AV2Oc8F6Dec87oLFms+R+DdWYCpuc3J2Z9qv+SzqTE9F2CJqDalBLKeC5A76NrPEXh3FmBqnjVy9muMOWXgMwJJwHcAScKdQEABASDgplsygSQgACQJdwIBBQSAgJtuyQSSgACQJNwJBBQQAAJuuiUTSAICQJJwJxBQQAAIuOmWTCAJCABJwp1AQIHsswD/m9G7swBT86yRs19jzCkDnxHoBPY1fre/JP3S3/df2q4/96kc/3699PrVmJ4LkHTcawj8k7MAay+sbdu1h3jZvxz/lyze3JCA7wA2tFmmSqC0gABQWlR/BDYkIABsaLNMlUBpAQGgtKj+CGxIQADY0GaZKoHSAgJAaVH9EdiQgACwoc0yVQKlBQSA0qL6I7AhAQFgQ5tlqgRKC6x+FmDt5wjUzrGvPX7pPwj9ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAoJTAbwUM8lhPvL+bAAAAAElFTkSuQmCC",On="data:image/png;base64,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";function Hn(e){let t,o;return{c(){t=B("div"),o=B("canvas"),this.h()},l(n){t=p(n,"DIV",{style:!0,class:!0});var i=Q(t);o=p(i,"CANVAS",{width:!0,height:!0,id:!0}),Q(o).forEach(h),i.forEach(h),this.h()},h(){P(o,"width",s*20),P(o,"height",s*15),P(o,"id","gameBoard"),Gt(t,"max-height",s*20+"px"),Gt(t,"max-width",s*15+"px"),P(t,"class","dungeon svelte-wjhvco")},m(n,i){V(n,t,i),u(t,o)},p:ne,i:ne,o:ne,d(n){n&&h(t)}}}const s=48;function Sn(e,t,o){let{state:n}=t,{debugMode:i=!0}=t;Ue(()=>{const a=new Image;a.src=_n;const r=new Image;r.src=On,l(a,r),setInterval(()=>l(a,r),10)});const l=(a,r)=>{if(!n||!document)return;const A=document.getElementById("gameBoard"),c=A.getContext("2d");c.clearRect(0,0,A.width,A.height),c.fillStyle="black",c.fillRect(0,0,A.width,A.height),n.dungeon.layout.grid.forEach((m,T)=>{me(m).forEach((E,k)=>v(c,E,k,T,a))}),n.dungeon.layout.grid.forEach((m,T)=>{me(m).forEach((E,k)=>g(c,E,k,T))}),n.dungeon.layout.grid.forEach((m,T)=>{me(m).forEach((E,k)=>f(c,E,k,T))}),n.dungeon.layout.grid.forEach((m,T)=>{me(m).forEach((E,k)=>oe(c,E,k,T,r))}),pe(c,n.currentActor),we(c,n.currentActor)},d=(a,r,A)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="black",a.fillRect(r*s,A*s,s,s),a.stroke()},v=(a,r,A,c,m)=>{_e(r)||!n.dungeon.discoveredRooms.includes(r)&&r!==Pe?n.dungeon.discoveredRooms.some(T=>se(A,c,T))?a.drawImage(m,48,0,48,48,A*s,c*s,s,s):d(a,A,c):G(r)?d(a,A,c):a.drawImage(m,0,0,48,48,A*s,c*s,s,s)},g=(a,r,A,c)=>{r===Pe||r===rt||(a.beginPath(),a.strokeStyle="black",a.rect(A*s,c*s,s,s),i&&(a.font="7px Arial",a.fillText(A+","+c,A*s+3,c*s+(s-3))),a.stroke())},f=(a,r,A,c)=>{const m=Ee(A,c);if(m&&!m.hidden&&!m.open&&!G(r))switch(a.fillStyle="brown",m.side){case D.RIGHT:{a.fillRect(A*s+(s-2),c*s,4,s),m.locked&&i&&(a.fillStyle="grey",a.fillRect(A*s+(s-4),c*s+(s/2-4),8,8)),m.trapped&&i&&(a.fillStyle="red",a.fillRect(A*s+(s-4),c*s+(s/2-4),4,4));break}case D.LEFT:{a.fillRect(A*s-2,c*s,4,s),m.locked&&i&&(a.fillStyle="grey",a.fillRect(A*s-4,c*s+(s/2-4),8,8)),m.trapped&&i&&(a.fillStyle="red",a.fillRect(A*s-4,c*s+(s/2-4),4,4));break}case D.UP:{a.fillRect(A*s,c*s-2,s,4),m.locked&&i&&(a.fillStyle="grey",a.fillRect(A*s+(s/2-4),c*s-4,8,8)),m.trapped&&i&&(a.fillStyle="red",a.fillRect(A*s+(s/2-4),c*s-4,4,4));break}case D.DOWN:{a.fillRect(A*s,c*s+(s-2),s,4),m.locked&&i&&(a.fillStyle="grey",a.fillRect(A*s+(s/2-4),c*s+(s-4),8,8)),m.trapped&&i&&(a.fillStyle="red",a.fillRect(A*s+(s/2-4),c*s+(s-4),4,4));break}}},C=(a,r,A,c)=>{a.beginPath(),a.strokeStyle=r.colour,a.fillStyle=r.colour,a.fillRect(A*s+4,c*s+(s-6),s-8,4),a.stroke()},y=(a,r,A,c)=>{i&&A.forEach(m=>{const T=r.position.x,E=r.position.y,k=m.position.x,F=m.position.y;a.strokeStyle=r.colour,a.beginPath(),a.moveTo(T*s+s/2,E*s+s/2),a.lineTo(k*s+s/2,F*s+s/2),a.stroke()})},L=(a,r,A,c)=>{a.beginPath(),a.strokeStyle="black",a.fillStyle="red",a.fillRect(A*s+4,c*s,s-8,4),a.fillStyle="green",a.fillRect(A*s+4,c*s,(s-8)*(r.health/r.maxHealth),4),a.rect(A*s+4,c*s,s-8,4),a.stroke()},N=(a,r,A,c)=>{var m=a.fillStyle,T=a.strokeStyle;a.strokeStyle="#080808",a.fillStyle="darkred";for(let E=0;E<r.actions;E++)a.fillRect(A*s+4+6*E,c*s+s-12,5,5),a.rect(A*s+4+6*E,c*s+s-12,5,5),a.stroke();a.fillStyle="blue";for(let E=0;E<r.movement;E++)a.fillRect(A*s+s-22+6*E,c*s+s-12,5,5),a.rect(A*s+s-22+6*E,c*s+s-12,5,5),a.stroke();a.fillStyle=m,a.strokeStyle=T},we=(a,r)=>{r===n.currentActor&&(a.beginPath(),a.strokeStyle="lightblue",a.lineWidth=2,a.moveTo(r.position.x*s,r.position.y*s),a.lineTo(r.position.x*s+s/3,r.position.y*s),a.moveTo(r.position.x*s,r.position.y*s),a.lineTo(r.position.x*s,r.position.y*s+s/3),a.moveTo(r.position.x*s+s,r.position.y*s),a.lineTo(r.position.x*s+s/3*2,r.position.y*s),a.moveTo(r.position.x*s+s,r.position.y*s),a.lineTo(r.position.x*s+s,r.position.y*s+s/3),a.moveTo(r.position.x*s,r.position.y*s+s),a.lineTo(r.position.x*s,r.position.y*s+s/3*2),a.moveTo(r.position.x*s,r.position.y*s+s),a.lineTo(r.position.x*s+s/3,r.position.y*s+s),a.moveTo(r.position.x*s+s,r.position.y*s+s),a.lineTo(r.position.x*s+s,r.position.y*s+s/3*2),a.moveTo(r.position.x*s+s,r.position.y*s+s),a.lineTo(r.position.x*s+s/3*2,r.position.y*s+s),a.stroke(),a.lineWidth=1)},pe=(a,r)=>{if(r===n.currentActor&&i){for(let A=r.position.x-r.movement;A<=r.position.x+r.movement;A++)for(let c=r.position.y-r.movement;c<=r.position.y+r.movement;c++)if(ut(n.dungeon,A,c)){const T=sn(n,A,c),E=an(n,A,c),k=gt(n.dungeon.layout,A,c);!E&&!T&&k&&(a.fillStyle="rgba(50, 50, 255, 0.08)",a.fillRect(A*s,c*s,s,s),a.stroke())}}},oe=(a,r,A,c,m)=>{a.beginPath();const T=n.heroes.find(E=>E.position.x===A&&E.position.y===c);if(T)a.drawImage(m,4*16,0,16,16,A*s,c*s,s,s),N(a,T,A,c),C(a,T,A,c),L(a,T,A,c);else{const E=n.dungeon.layout.monsters.find(k=>k.position.x===A&&k.position.y===c);if(E&&E.health>0&&!G(r)){switch(E.type){case H.ORCH:a.drawImage(m,s,16,16,16,A*s,c*s,s,s);break;case H.TROLL:a.drawImage(m,s,16,16,16,A*s,c*s,s,s);break;default:a.drawImage(m,16,16,16,16,A*s,c*s,s,s);break}C(a,E,A,c),L(a,E,A,c),y(a,E,n.heroes)}}},G=a=>a===Pe||!n.dungeon.discoveredRooms.includes(a),_e=a=>a===rt,Ee=(a,r)=>n.dungeon.layout.doors.find(A=>A.x===a&&A.y===r),se=(a,r,A)=>{if(!n)return;const c=Math.max(a-1,0),m=Math.max(r-1,0),T=Math.min(a+1,n.dungeon.layout.grid.length),E=Math.min(r+1,n.dungeon.layout.grid[0].length);for(let k=c;k<=T;k++)for(let F=m;F<=E;F++){const x=n.dungeon.layout.grid[F];if(me(x)[k]===A)return!0}return!1};return e.$$set=a=>{"state"in a&&o(0,n=a.state),"debugMode"in a&&o(1,i=a.debugMode)},[n,i]}class Mn extends Ke{constructor(t){super(),Ye(this,t,Sn,Hn,De,{state:0,debugMode:1})}}function Pn(e){let t;return{c(){t=B("canvas"),this.h()},l(o){t=p(o,"CANVAS",{id:!0,height:!0,width:!0}),Q(t).forEach(h),this.h()},h(){P(t,"id","characterBoard"),P(t,"height","750"),P(t,"width","260")},m(o,n){V(o,t,n)},p:ne,i:ne,o:ne,d(o){o&&h(t)}}}const $=180;function Nn(e,t,o){let{state:n}=t;Ue(()=>{i(),setInterval(i,100)});const i=()=>{if(!n||!document)return;const g=document.getElementById("characterBoard"),f=g.getContext("2d");f.clearRect(0,0,g.width,g.height),f.stroke(),n.heroes.forEach((C,y)=>{l(f,g,C,y),d(f,C,y),v(f,C,y)})},l=(g,f,C,y)=>{g.fillStyle=C.colour,g.fillRect(12,y*$+12,f.width,$-12),g.stroke(),g.fillStyle="black"},d=(g,f,C)=>{const L=(f===n.currentActor?"> "+f.name:f.name)+" - "+f.level+" ("+f.experience+")";g.strokeStyle="black",g.font="18px Arial",g.fillText(L,16,C*$+30),g.fillText("HP: "+f.health,16,C*$+50),g.fillText("Actions: "+f.actions,16,C*$+70),g.fillText("Moves: "+f.movement,16,C*$+90),g.stroke()},v=(g,f,C)=>{g.fillText("Equipment",16,C*$+110),g.font="12px Arial",g.fillText("ðŸ—¡ï¸ "+f.weapon.name+" ("+f.weapon.dice+")",16,C*$+125);let y="None (0)",L="None (0)";f.armour&&(y=f.armour.name+" ("+f.armour.defense+")"),f.shield&&(L=f.shield.name+" ("+f.armour.dice+")"),g.fillText("ðŸ§± "+y,16,C*$+142),g.fillText("ðŸ›¡ï¸ "+L,16,C*$+159)};return e.$$set=g=>{"state"in g&&o(0,n=g.state)},[n]}class Un extends Ke{constructor(t){super(),Ye(this,t,Nn,Pn,De,{state:0})}}function jt(e,t,o){const n=e.slice();return n[2]=t[o],n[4]=o,n}function Kn(e){let t,o=e[2]+"",n;return{c(){t=B("p"),n=un(o),this.h()},l(i){t=p(i,"P",{class:!0});var l=Q(t);n=fn(l,o),l.forEach(h),this.h()},h(){P(t,"class","svelte-1xp6uq")},m(i,l){V(i,t,l),u(t,n)},p(i,l){l&1&&o!==(o=i[2]+"")&&mn(n,o)},d(i){i&&h(t)}}}function en(e){let t,o=e[4]<25&&Kn(e);return{c(){o&&o.c(),t=Ne()},l(n){o&&o.l(n),t=Ne()},m(n,i){o&&o.m(n,i),V(n,t,i)},p(n,i){n[4]<25&&o.p(n,i)},d(n){n&&h(t),o&&o.d(n)}}}function tn(e){let t,o=qt(e[0]),n=[];for(let i=0;i<o.length;i+=1)n[i]=en(jt(e,o,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Ne()},l(i){for(let l=0;l<n.length;l+=1)n[l].l(i);t=Ne()},m(i,l){for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(i,l);V(i,t,l)},p(i,l){if(l&1){o=qt(i[0]);let d;for(d=0;d<o.length;d+=1){const v=jt(i,o,d);n[d]?n[d].p(v,l):(n[d]=en(v),n[d].c(),n[d].m(t.parentNode,t))}for(;d<n.length;d+=1)n[d].d(1);n.length=o.length}},d(i){i&&h(t),gn(n,i)}}}function Yn(e){let t,o=e[0],n=tn(e);return{c(){t=B("div"),n.c(),this.h()},l(i){t=p(i,"DIV",{class:!0});var l=Q(t);n.l(l),l.forEach(h),this.h()},h(){P(t,"class","log svelte-1xp6uq")},m(i,l){V(i,t,l),n.m(t,null)},p(i,[l]){l&1&&De(o,o=i[0])?(n.d(1),n=tn(i),n.c(),n.m(t,null)):n.p(i,l)},i:ne,o:ne,d(i){i&&h(t),n.d(i)}}}function Gn(e,t,o){let n=[],{state:i}=t;return Ue(()=>{setInterval(()=>{o(0,n=i.actionLog)},1e3)}),e.$$set=l=>{"state"in l&&o(1,i=l.state)},[n,i]}class Fn extends Ke{constructor(t){super(),Ye(this,t,Gn,Yn,De,{state:1})}}function qn(e){let t,o,n,i,l,d,v,g,f,C,y,L,N,we="UL",pe,oe,G,_e="U",Ee,se,a,r="UR",A,c,m,T="Next",E,k,F,x,Fe="L",qe,Oe,We,he,ie,Bt="R",$e,Ce,ae,pt="Search",xe,q,ve,le,Et="DL",ze,Ie,re,ht="D",Je,ke,Ae,Ct="DR",Xe,ye,ce,vt="Pick lock",Ve,de,Qe,ge,It="Save",Ze,Te,ue,kt="Load",je,z,et,He,tt,yt;n=new Un({props:{state:e[0]}});function An(b){e[2](b)}let Qt={};e[0]!==void 0&&(Qt.state=e[0]),l=new Mn({props:Qt}),Kt.push(()=>Ft(l,"state",An));function cn(b){e[4](b)}let Tt={};return e[0]!==void 0&&(Tt.state=e[0]),z=new Fn({props:Tt}),Kt.push(()=>Ft(z,"state",cn)),{c(){t=B("div"),o=B("div"),nt(n.$$.fragment),i=w(),nt(l.$$.fragment),v=w(),g=B("div"),f=B("div"),C=B("table"),y=B("tr"),L=B("td"),N=B("button"),N.textContent=we,pe=w(),oe=B("td"),G=B("button"),G.textContent=_e,Ee=w(),se=B("td"),a=B("button"),a.textContent=r,A=w(),c=B("td"),m=B("button"),m.textContent=T,E=w(),k=B("tr"),F=B("td"),x=B("button"),x.textContent=Fe,qe=w(),Oe=B("td"),We=w(),he=B("td"),ie=B("button"),ie.textContent=Bt,$e=w(),Ce=B("td"),ae=B("button"),ae.textContent=pt,xe=w(),q=B("tr"),ve=B("td"),le=B("button"),le.textContent=Et,ze=w(),Ie=B("td"),re=B("button"),re.textContent=ht,Je=w(),ke=B("td"),Ae=B("button"),Ae.textContent=Ct,Xe=w(),ye=B("td"),ce=B("button"),ce.textContent=vt,Ve=w(),de=B("tr"),Qe=B("td"),ge=B("button"),ge.textContent=It,Ze=w(),Te=B("td"),ue=B("button"),ue.textContent=kt,je=w(),nt(z.$$.fragment),this.h()},l(b){t=p(b,"DIV",{class:!0});var U=Q(t);o=p(U,"DIV",{class:!0});var Re=Q(o);ot(n.$$.fragment,Re),Re.forEach(h),i=_(U),ot(l.$$.fragment,U),U.forEach(h),v=_(b),g=p(b,"DIV",{class:!0});var fe=Q(g);f=p(fe,"DIV",{class:!0});var be=Q(f);C=p(be,"TABLE",{});var Z=Q(C);y=p(Z,"TR",{});var j=Q(y);L=p(j,"TD",{});var Rt=Q(L);N=p(Rt,"BUTTON",{"data-svelte-h":!0}),M(N)!=="svelte-fw3uxo"&&(N.textContent=we),Rt.forEach(h),pe=_(j),oe=p(j,"TD",{});var bt=Q(oe);G=p(bt,"BUTTON",{"data-svelte-h":!0}),M(G)!=="svelte-1jeoia6"&&(G.textContent=_e),bt.forEach(h),Ee=_(j),se=p(j,"TD",{});var Dt=Q(se);a=p(Dt,"BUTTON",{"data-svelte-h":!0}),M(a)!=="svelte-1p8c8vc"&&(a.textContent=r),Dt.forEach(h),A=_(j),c=p(j,"TD",{});var Lt=Q(c);m=p(Lt,"BUTTON",{"data-svelte-h":!0}),M(m)!=="svelte-1rtxc14"&&(m.textContent=T),Lt.forEach(h),j.forEach(h),E=_(Z),k=p(Z,"TR",{});var ee=Q(k);F=p(ee,"TD",{});var wt=Q(F);x=p(wt,"BUTTON",{"data-svelte-h":!0}),M(x)!=="svelte-10dnpu6"&&(x.textContent=Fe),wt.forEach(h),qe=_(ee),Oe=p(ee,"TD",{}),Q(Oe).forEach(h),We=_(ee),he=p(ee,"TD",{});var _t=Q(he);ie=p(_t,"BUTTON",{"data-svelte-h":!0}),M(ie)!=="svelte-12287ni"&&(ie.textContent=Bt),_t.forEach(h),$e=_(ee),Ce=p(ee,"TD",{});var Ot=Q(Ce);ae=p(Ot,"BUTTON",{"data-svelte-h":!0}),M(ae)!=="svelte-cps1bu"&&(ae.textContent=pt),Ot.forEach(h),ee.forEach(h),xe=_(Z),q=p(Z,"TR",{});var te=Q(q);ve=p(te,"TD",{});var Ht=Q(ve);le=p(Ht,"BUTTON",{"data-svelte-h":!0}),M(le)!=="svelte-1ji074i"&&(le.textContent=Et),Ht.forEach(h),ze=_(te),Ie=p(te,"TD",{});var St=Q(Ie);re=p(St,"BUTTON",{"data-svelte-h":!0}),M(re)!=="svelte-li5tq6"&&(re.textContent=ht),St.forEach(h),Je=_(te),ke=p(te,"TD",{});var Mt=Q(ke);Ae=p(Mt,"BUTTON",{"data-svelte-h":!0}),M(Ae)!=="svelte-3esmwe"&&(Ae.textContent=Ct),Mt.forEach(h),Xe=_(te),ye=p(te,"TD",{});var Pt=Q(ye);ce=p(Pt,"BUTTON",{"data-svelte-h":!0}),M(ce)!=="svelte-sacog4"&&(ce.textContent=vt),Pt.forEach(h),te.forEach(h),Ve=_(Z),de=p(Z,"TR",{});var Se=Q(de);Qe=p(Se,"TD",{});var Nt=Q(Qe);ge=p(Nt,"BUTTON",{"data-svelte-h":!0}),M(ge)!=="svelte-1vr5zyk"&&(ge.textContent=It),Nt.forEach(h),Ze=_(Se),Te=p(Se,"TD",{});var Ut=Q(Te);ue=p(Ut,"BUTTON",{"data-svelte-h":!0}),M(ue)!=="svelte-1m2jkw7"&&(ue.textContent=kt),Ut.forEach(h),Se.forEach(h),Z.forEach(h),be.forEach(h),je=_(fe),ot(z.$$.fragment,fe),fe.forEach(h),this.h()},h(){P(o,"class","characterSide svelte-kvu9lt"),P(t,"class","container svelte-kvu9lt"),P(f,"class","commands svelte-kvu9lt"),P(g,"class","container svelte-kvu9lt")},m(b,U){V(b,t,U),u(t,o),st(n,o,null),u(t,i),st(l,t,null),V(b,v,U),V(b,g,U),u(g,f),u(f,C),u(C,y),u(y,L),u(L,N),u(y,pe),u(y,oe),u(oe,G),u(y,Ee),u(y,se),u(se,a),u(y,A),u(y,c),u(c,m),u(C,E),u(C,k),u(k,F),u(F,x),u(k,qe),u(k,Oe),u(k,We),u(k,he),u(he,ie),u(k,$e),u(k,Ce),u(Ce,ae),u(C,xe),u(C,q),u(q,ve),u(ve,le),u(q,ze),u(q,Ie),u(Ie,re),u(q,Je),u(q,ke),u(ke,Ae),u(q,Xe),u(q,ye),u(ye,ce),u(C,Ve),u(C,de),u(de,Qe),u(Qe,ge),u(de,Ze),u(de,Te),u(Te,ue),u(g,je),st(z,g,null),He=!0,tt||(yt=[S(window,"keydown",Bn(e[1])),S(N,"click",function(){K(R("UL",e[0]))&&R("UL",e[0]).apply(this,arguments)}),S(G,"click",function(){K(R("U",e[0]))&&R("U",e[0]).apply(this,arguments)}),S(a,"click",function(){K(R("UR",e[0]))&&R("UR",e[0]).apply(this,arguments)}),S(m,"click",function(){K(dt(e[0]))&&dt(e[0]).apply(this,arguments)}),S(x,"click",function(){K(R("L",e[0]))&&R("L",e[0]).apply(this,arguments)}),S(ie,"click",function(){K(R("R",e[0]))&&R("R",e[0]).apply(this,arguments)}),S(ae,"click",function(){K(ct(e[0]))&&ct(e[0]).apply(this,arguments)}),S(le,"click",function(){K(R("DL",e[0]))&&R("DL",e[0]).apply(this,arguments)}),S(re,"click",function(){K(R("D",e[0]))&&R("D",e[0]).apply(this,arguments)}),S(Ae,"click",function(){K(R("DR",e[0]))&&R("DR",e[0]).apply(this,arguments)}),S(ce,"click",function(){K(At(e[0]))&&At(e[0]).apply(this,arguments)}),S(ge,"click",function(){K(Xt(e[0]))&&Xt(e[0]).apply(this,arguments)}),S(ue,"click",e[3])],tt=!0)},p(b,[U]){e=b;const Re={};U&1&&(Re.state=e[0]),n.$set(Re);const fe={};!d&&U&1&&(d=!0,fe.state=e[0],Yt(()=>d=!1)),l.$set(fe);const be={};!et&&U&1&&(et=!0,be.state=e[0],Yt(()=>et=!1)),z.$set(be)},i(b){He||(it(n.$$.fragment,b),it(l.$$.fragment,b),it(z.$$.fragment,b),He=!0)},o(b){at(n.$$.fragment,b),at(l.$$.fragment,b),at(z.$$.fragment,b),He=!1},d(b){b&&(h(t),h(v),h(g)),lt(n),lt(l),lt(z),tt=!1,dn(yt)}}}function Wn(e,t,o){let n=In();Ue(()=>{setInterval(l,1e3)});function i(f){switch(f.key){case"6":case"d":R("R",n);break;case"9":case"e":R("UR",n);break;case"8":case"w":R("U",n);break;case"7":case"q":R("UL",n);break;case"4":case"a":R("L",n);break;case"1":case"z":R("DL",n);break;case"2":case"x":R("D",n);break;case"3":case"c":R("DR",n);break;case"0":case" ":dt(n);break;case"-":case"r":At(n);break;case"+":case"f":ct(n);break}}const l=()=>{if(n.dungeon.beaten&&n.dungeon.nextDungeon){o(0,n.dungeon=n.dungeon.nextDungeon,n);const f=nn.filter(C=>!n.heroes.find(y=>C.name===y.name));n.heroes.push(...f),on(n.heroes,n.dungeon),o(0,n.actionLog=["You have reached "+n.dungeon.name],n)}};function d(f){n=f,o(0,n)}const v=()=>o(0,n=vn());function g(f){n=f,o(0,n)}return[n,i,d,v,g]}class zn extends Ke{constructor(t){super(),Ye(this,t,Wn,qn,De,{})}}export{zn as component};
