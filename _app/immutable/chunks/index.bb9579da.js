import{_ as k}from"./preload-helper.a4192956.js";import{w as T,d as j}from"./index.c0b5b41d.js";import{j as d}from"./scheduler.8ae2156d.js";var ne=Object.defineProperty,ce=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,M=(r,e,a)=>e in r?ne(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,u=(r,e)=>{for(var a in e||(e={}))Q.call(e,a)&&M(r,a,e[a]);if(R)for(var a of R(e))U.call(e,a)&&M(r,a,e[a]);return r},m=(r,e)=>ce(r,ue(e)),E=(r,e)=>{var a={};for(var t in r)Q.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&R)for(var t of R(r))e.indexOf(t)<0&&U.call(r,t)&&(a[t]=r[t]);return a},I=["error","warn","debug"],X=({logger:r=console,level:e=I[1],prefix:a="[i18n]: "})=>I.reduce((t,i,l)=>m(u({},t),{[i]:o=>I.indexOf(e)>=l&&r[i](`${a}${o}`)}),{}),p=X({}),de=r=>{p=r},z=r=>{var e=r,{parser:a,key:t,params:i,translations:l,locale:o,fallbackLocale:s}=e,n=E(e,["parser","key","params","translations","locale","fallbackLocale"]);if(!t)return p.warn(`No translation key provided ('${o}' locale). Skipping translation...`),"";if(!o)return p.warn(`No locale provided for '${t}' key. Skipping translation...`),"";let c=(l[o]||{})[t];return s&&c===void 0&&(c=(l[s]||{})[t]),n.hasOwnProperty("fallbackValue")&&c===void 0?n.fallbackValue:a.parse(c,i,o,t)},y=(...r)=>r.length?r.filter(e=>!!e).map(e=>{let a=`${e}`.toLowerCase();try{let[t]=Intl.Collator.supportedLocalesOf(e);if(!t)throw new Error;a=t}catch{p.warn(`'${e}' locale is non-standard.`)}return a}):[],S=(r,e,a)=>Object.keys(r||{}).reduce((t,i)=>{let l=r[i],o=a?`${a}.${i}`:`${i}`;return e&&Array.isArray(l)?m(u({},t),{[o]:l.map(s=>S(s,e))}):l&&typeof l=="object"?u(u({},t),S(l,e,o)):m(u({},t),{[o]:l})},{}),pe=r=>r.reduce((e,{key:a,data:t,locale:i})=>{if(!t)return e;let[l]=y(i),o=m(u({},e[l]||{}),{[a]:t});return m(u({},e),{[l]:o})},{}),fe=async r=>{try{let e=await Promise.all(r.map(a=>{var t=a,{loader:i}=t,l=E(t,["loader"]);return new Promise(async o=>{let s;try{s=await i()}catch(n){p.error(`Failed to load translation. Verify your '${l.locale}' > '${l.key}' Loader.`),p.error(n)}o(m(u({loader:i},l),{data:s}))})}));return pe(e)}catch(e){p.error(e)}return{}},he=r=>e=>{try{if(typeof e=="string")return e===r;if(typeof e=="object")return e.test(r)}catch{p.error("Invalid route config!")}return!1},H=(r,e)=>{let a=!0;try{a=Object.keys(r).filter(t=>r[t]!==void 0).every(t=>r[t]===e[t])}catch{}return a},q=1e3*60*60*24,me=class{constructor(r){this.cachedAt=0,this.loadedKeys={},this.currentRoute=T(),this.config=T(),this.isLoading=T(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(e,a)=>{let{fallbackLocale:t}=d(this.config),i=Array.from(this.promises).filter(l=>{let o=H({locale:y(e)[0],route:a},l);return t&&(o=o||H({locale:y(t)[0],route:a},l)),o}).map(({promise:l})=>l);return Promise.all(i)},get:()=>d(this.isLoading)},this.privateRawTranslations=T({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>d(this.rawTranslations)},this.privateTranslations=T({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>d(this.translations)},this.locales=m(u({},j([this.config,this.privateTranslations],([e,a])=>{if(!e)return[];let{loaders:t=[]}=e,i=t.map(({locale:o})=>o),l=Object.keys(a).map(o=>o);return Array.from(new Set([...y(...i),...y(...l)]))},[])),{get:()=>d(this.locales)}),this.internalLocale=T(),this.loaderTrigger=j([this.internalLocale,this.currentRoute],([e,a],t)=>{var i,l;e!==void 0&&a!==void 0&&!(e===((i=d(this.loaderTrigger))==null?void 0:i[0])&&a===((l=d(this.loaderTrigger))==null?void 0:l[1]))&&(p.debug("Triggering translation load..."),t([e,a]))},[]),this.localeHelper=T(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>d(this.locale)},this.initialized=j([this.locale,this.currentRoute,this.privateTranslations],([e,a,t],i)=>{d(this.initialized)||i(e!==void 0&&a!==void 0&&!!Object.keys(t).length)}),this.translation=j([this.privateTranslations,this.locale,this.isLoading],([e,a,t],i)=>{let l=e[a];l&&Object.keys(l).length&&!t&&i(l)},{}),this.t=m(u({},j([this.config,this.translation],e=>{var[a]=e,t=a,{parser:i,fallbackLocale:l}=t,o=E(t,["parser","fallbackLocale"]);return(s,...n)=>z(u({parser:i,key:s,params:n,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:l},o.hasOwnProperty("fallbackValue")?{fallbackValue:o.fallbackValue}:{}))})),{get:(e,...a)=>d(this.t)(e,...a)}),this.l=m(u({},j([this.config,this.translations],e=>{var[a,...t]=e,i=a,{parser:l,fallbackLocale:o}=i,s=E(i,["parser","fallbackLocale"]),[n]=t;return(c,f,...w)=>z(u({parser:l,key:f,params:w,translations:n,locale:c,fallbackLocale:o},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(e,a,...t)=>d(this.l)(e,a,...t)}),this.getLocale=e=>{let{fallbackLocale:a}=d(this.config)||{},t=e||a;if(!t)return;let i=this.locales.get();return i.find(l=>y(t).includes(l))||i.find(l=>y(a).includes(l))},this.setLocale=e=>{if(e&&e!==d(this.internalLocale))return p.debug(`Setting '${e}' locale.`),this.internalLocale.set(e),this.loading.toPromise(e,d(this.currentRoute))},this.setRoute=e=>{if(e!==d(this.currentRoute)){p.debug(`Setting '${e}' route.`),this.currentRoute.set(e);let a=d(this.internalLocale);return this.loading.toPromise(a,e)}},this.loadConfig=async e=>{await this.configLoader(e)},this.getTranslationProps=async(e=this.locale.get(),a=d(this.currentRoute))=>{let t=d(this.config);if(!t||!e)return[];let i=this.translations.get(),{loaders:l,fallbackLocale:o="",cache:s=q}=t||{},n=Number.isNaN(+s)?q:+s;this.cachedAt?Date.now()>n+this.cachedAt&&(p.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(p.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[c,f]=y(e,o),w=i[c],L=i[f],_=(l||[]).map(h=>{var v=h,{locale:V}=v,g=E(v,["locale"]);return m(u({},g),{locale:y(V)[0]})}).filter(({routes:h})=>!h||(h||[]).some(he(a))).filter(({key:h,locale:v})=>v===c&&(!w||!(this.loadedKeys[c]||[]).includes(h))||o&&v===f&&(!L||!(this.loadedKeys[f]||[]).includes(h)));if(_.length){this.isLoading.set(!0),p.debug("Fetching translations...");let h=await fe(_);this.isLoading.set(!1);let v=Object.keys(h).reduce((g,b)=>m(u({},g),{[b]:Object.keys(h[b])}),{}),V=_.filter(({key:g,locale:b})=>(v[b]||[]).some(P=>`${P}`.startsWith(g))).reduce((g,{key:b,locale:P})=>m(u({},g),{[P]:[...g[P]||[],b]}),{});return[h,V]}return[]},this.addTranslations=(e,a)=>{if(!e)return;let t=d(this.config),{preprocess:i}=t||{};p.debug("Adding translations...");let l=Object.keys(e||{});this.privateRawTranslations.update(o=>l.reduce((s,n)=>m(u({},s),{[n]:u(u({},s[n]||{}),e[n])}),o)),this.privateTranslations.update(o=>l.reduce((s,n)=>{let c=!0,f=e[n];return typeof i=="function"&&(f=i(f)),(typeof i=="function"||i==="none")&&(c=!1),m(u({},s),{[n]:u(u({},s[n]||{}),c?S(f,i==="preserveArrays"):f)})},o)),l.forEach(o=>{let s=Object.keys(e[o]).map(n=>`${n}`.split(".")[0]);a&&(s=a[o]),this.loadedKeys[o]=Array.from(new Set([...this.loadedKeys[o]||[],...s||[]]))})},this.loader=async([e,a])=>{let t=this.getLocale(e)||void 0;p.debug(`Adding loader promise for '${t}' locale and '${a}' route.`);let i=(async()=>{let l=await this.getTranslationProps(t,a);l.length&&this.addTranslations(...l)})();this.promises.add({locale:t,route:a,promise:i}),i.then(()=>{t&&this.locale.get()!==t&&this.locale.forceSet(t)})},this.loadTranslations=(e,a=d(this.currentRoute)||"")=>{let t=this.getLocale(e);if(t)return this.setRoute(a),this.setLocale(t),this.loading.toPromise(t,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async e=>{e&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),p.debug("Loader promises have been purged."))}),r&&this.loadConfig(r)}async configLoader(r){if(!r)return p.error("No config provided!");let e=r,{initLocale:a,fallbackLocale:t,translations:i,log:l}=e,o=E(e,["initLocale","fallbackLocale","translations","log"]);l&&de(X(l)),[a]=y(a),[t]=y(t),p.debug("Setting config."),this.config.set(u({initLocale:a,fallbackLocale:t,translations:i},o)),i&&this.addTranslations(i),a&&await this.loadTranslations(a)}},Y=Object.defineProperty,ye=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,W=(r,e,a)=>e in r?Y(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,O=(r,e)=>{for(var a in e||(e={}))Z.call(e,a)&&W(r,a,e[a]);if(A)for(var a of A(e))ee.call(e,a)&&W(r,a,e[a]);return r},N=(r,e)=>ye(r,ve(e)),$=(r,e)=>{var a={};for(var t in r)Z.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&A)for(var t of A(r))e.indexOf(t)<0&&ee.call(r,t)&&(a[t]=r[t]);return a},ge=(r,e)=>{for(var a in e)Y(r,a,{get:e[a],enumerable:!0})},ae={};ge(ae,{ago:()=>Pe,currency:()=>Te,date:()=>Le,eq:()=>K,gt:()=>re,gte:()=>Oe,lt:()=>te,lte:()=>ke,ne:()=>be,number:()=>we});var x=(r,e)=>{let{modifierDefaults:a}=e||{},{[r]:t}=a||{};return t||{}},K=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()===`${r}`.toLowerCase())||{}).value||a,be=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()!==`${r}`.toLowerCase())||{}).value||a,te=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,i)=>+t.key-+i.key).find(({key:t})=>+r<+t)||{}).value||a,re=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,i)=>+i.key-+t.key).find(({key:t})=>+r>+t)||{}).value||a,ke=({value:r,options:e=[],defaultValue:a=""})=>K({value:r,options:e,defaultValue:te({value:r,options:e,defaultValue:a})}),Oe=({value:r,options:e=[],defaultValue:a=""})=>K({value:r,options:e,defaultValue:re({value:r,options:e,defaultValue:a})}),we=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:i})=>{if(!t)return"";let l=x("number",i),{maximumFractionDigits:o}=l,s=$(l,["maximumFractionDigits"]),n=(e==null?void 0:e.number)||{},{maximumFractionDigits:c=o||2}=n,f=$(n,["maximumFractionDigits"]);return new Intl.NumberFormat(t,O(N(O({},s),{maximumFractionDigits:c}),f)).format(+r||+a)},Le=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:i})=>{if(!t)return"";let l=$(x("date",i),[]),o=$((e==null?void 0:e.date)||{},[]);return new Intl.DateTimeFormat(t,O(O({},l),o)).format(+r||+a)},F=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],le=(r="",e="")=>new RegExp(`^${r}s?$`).test(e),$e=r=>F.indexOf(F.find(({key:e})=>le(e,r))),_e=(r,e)=>F.reduce(([a,t],{key:i,multiplier:l},o)=>{if(le(t,e))return[a,t];if(!t||o===$e(t)+1){let s=Math.round(a/l);if(!t||Math.abs(s)>=1||e!=="auto")return[s,i]}return[a,t]},[r,""]),Pe=({value:r,defaultValue:e="",locale:a="",props:t,parserOptions:i})=>{if(!a)return"";let l=x("ago",i),{format:o,numeric:s}=l,n=$(l,["format","numeric"]),c=(t==null?void 0:t.ago)||{},{format:f=o||"auto",numeric:w=s||"auto"}=c,L=$(c,["format","numeric"]),_=+r||+e,h=_e(_,f);return new Intl.RelativeTimeFormat(a,O(N(O({},n),{numeric:w}),L)).format(...h)},Te=({value:r,defaultValue:e="",locale:a="",props:t,parserOptions:i})=>{if(!a)return"";let l=x("currency",i),{ratio:o,currency:s}=l,n=$(l,["ratio","currency"]),c=(t==null?void 0:t.currency)||{},{ratio:f=o||1,currency:w=s}=c,L=$(c,["ratio","currency"]);return new Intl.NumberFormat(a,O(N(O({},n),{style:"currency",currency:w}),L)).format(f*(r||e))},Ve=r=>typeof r=="string"&&/{{(?:(?!{{|}}).)+}}/.test(r),C=r=>typeof r=="string"?r.replace(/\\(?=:|;|{|})/g,""):r,je=({value:r,props:e,payload:a,parserOptions:t,locale:i})=>`${r}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,l=>{let o=C(`${l.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),s=a==null?void 0:a[o],[,n=""]=l.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];n=n||(a==null?void 0:a.default)||"";let[,c=""]=l.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(s===void 0&&c!=="ne")return n;let f=!!c,{customModifiers:w}=t||{},L=O(O({},ae),w||{});c=Object.keys(L).includes(c)?c:"eq";let _=L[c],h=(l.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((v,V,g)=>{if(g>0){let b=C(`${V.match(/(?:(?:\\:)|[^:])+/)}`.trim()),P=`${V.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(b&&b!=="default"&&P)return[...v,{key:b,value:P}]}return v},[]);return!f&&!h.length?s:_({value:s,options:h,props:e,defaultValue:n,locale:i,parserOptions:t})}),ie=({value:r,props:e,payload:a,parserOptions:t,locale:i})=>{if(Ve(r)){let l=je({value:r,payload:a,props:e,parserOptions:t,locale:i});return ie({value:l,payload:a,props:e,parserOptions:t,locale:i})}else return C(r)},Ee=r=>({parse:(e,[a,t],i,l)=>(a!=null&&a.default&&e===void 0&&(e=a.default),e===void 0&&(e=l),ie({value:e,payload:a,props:t,parserOptions:r,locale:i}))}),Re=Ee,Ae=Object.defineProperty,De=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,B=(r,e,a)=>e in r?Ae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,Ie=(r,e)=>{for(var a in e||(e={}))oe.call(e,a)&&B(r,a,e[a]);if(D)for(var a of D(e))se.call(e,a)&&B(r,a,e[a]);return r},Se=(r,e)=>De(r,xe(e)),Fe=(r,e)=>{var a={};for(var t in r)oe.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&D)for(var t of D(r))e.indexOf(t)<0&&se.call(r,t)&&(a[t]=r[t]);return a},G=r=>{var e=r,{parserOptions:a={}}=e,t=Fe(e,["parserOptions"]);return Se(Ie({},t),{parser:Re(a)})},Ce=class extends me{constructor(e){super(e&&G(e)),this.loadConfig=a=>super.configLoader(G(a))}},Ne=Ce;const Ke="English",Me="Svenska",J={en:Ke,sv:Me},ze={translations:{en:{lang:J},sv:{lang:J}},loaders:[{locale:"en",key:"content",loader:async()=>(await k(()=>import("./content.26e5da43.js"),[],import.meta.url)).default},{locale:"en",key:"logs",loader:async()=>(await k(()=>import("./logs.b31dd378.js"),[],import.meta.url)).default},{locale:"en",key:"events",loader:async()=>(await k(()=>import("./events.1fe683db.js"),[],import.meta.url)).default},{locale:"en",key:"campaign",loader:async()=>(await k(()=>import("./campaign.8abcd90c.js"),[],import.meta.url)).default},{locale:"en",key:"items",loader:async()=>(await k(()=>import("./items.be48f146.js"),[],import.meta.url)).default},{locale:"sv",key:"content",loader:async()=>(await k(()=>import("./content.3ebad3fc.js"),[],import.meta.url)).default},{locale:"sv",key:"logs",loader:async()=>(await k(()=>import("./logs.2dbce5b6.js"),[],import.meta.url)).default},{locale:"sv",key:"events",loader:async()=>(await k(()=>import("./events.917f3fa3.js"),[],import.meta.url)).default},{locale:"sv",key:"campaign",loader:async()=>(await k(()=>import("./campaign.c7c0e189.js"),[],import.meta.url)).default},{locale:"sv",key:"items",loader:async()=>(await k(()=>import("./items.f253da75.js"),[],import.meta.url)).default}]},{t:Je,loading:He,locales:Qe,locale:Ue,loadTranslations:Xe,setLocale:Ye}=new Ne(ze);He.subscribe(r=>r);export{Ue as a,Xe as l,Ye as s,Je as t};
